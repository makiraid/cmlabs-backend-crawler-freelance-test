"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2175],{51618:(e,t,i)=>{i.d(t,{sR:()=>r,LX:()=>c,Pn:()=>p});var a=i(71030),s=i(42645),o=i(41380),n=i(61537),l=i(87317);const d=[0];function r(e){const{detailInfo:t,successStatusCodeList:i=d,Header:s,Error:o,List:n}=e;return i.includes(t.statusCode)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s,{detailInfo:t},void 0),(0,a.jsx)(n,{detailInfo:t},void 0)]},void 0):(0,a.jsx)(o,{detailInfo:t},void 0)}function c(e){const{detailInfo:t,listInfo:i,Error:s,Empty:o,List:n,Skeleton:l,successStatusCodeList:r=d,listKey:c,hasLivePreview:p}=e,{list:u,loading:g,hasMore:h}=i;if(!u.length){if(g)return(0,a.jsx)(l,{},void 0);if(!r.includes(i.statusCode))return(0,a.jsx)(s,{detailInfo:t,listInfo:i,listKey:c},void 0);if(!h&&!p)return(0,a.jsx)(o,{detailInfo:t,listInfo:i,listKey:c},void 0)}return(0,a.jsx)(n,{listInfo:i,detailInfo:t,listKey:c},void 0)}function p(...e){return function(t){return function(e){const t=function(t){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e,Object.assign({},t),void 0),(0,a.jsx)(n.vr,{},"static")]},void 0)};return t.displayName=`WithFixedBottom(${(0,l.i)(e)})`,t}((0,s.l)((0,o.r)(...e)(t)))}}},23297:(e,t,i)=>{i.d(t,{JW:()=>p,xB:()=>u,bT:()=>c});var a=i(99333),s=i(31738),o=i(5909),n=i(66943),l=i(15137),d=i(25508),r=i(47294);function c(){const{language:e,abTestVersion:t,user:i,appType:a}=(0,n.m7)((0,l.Lh)((()=>["language","abTestVersion","user","appType"]),[])),{uniqueId:r}=(0,o.UO)();return(0,s.useMemo)((()=>Object.assign({language:e,abTestVersion:t,user:i,appType:a},function(e){const t=d.c.isRealUniqueId(e),i=d.c.isPureNumber(e,!1);return t?{uniqueId:e.toLowerCase(),secUid:""}:i?{uniqueId:"",secUid:"",userId:e}:{uniqueId:"",secUid:e}}(r))),[r,e,t,i,a])}function p({uniqueId:e,secUid:t}){const{user:i}=(0,n.m7)((0,l.Lh)((()=>["user"]),[]));return!!i&&(Boolean(e&&e===i.uniqueId)||Boolean(t&&t===i.secUid))}function u({user:e,listKey:t}){const{language:i,abTestVersion:o,user:d}=(0,n.m7)((0,l.Lh)((()=>["language","abTestVersion","user"]),[])),c=(0,a.q)(r.h);return(0,s.useCallback)((()=>{var a;c.getUserVideoList({secUid:null!==(a=null==e?void 0:e.secUid)&&void 0!==a?a:"",key:t,language:i,abTestVersion:o,user:d})}),[c,t,i,o,d,null==e?void 0:e.secUid])}},97329:(e,t,i)=>{i.d(t,{t:()=>T});var a,s=i(22403),o=i(98279),n=i(3312),l=i(82790),d=i(66943),r=i(73836),c=i(30458),p=i(59477),u=i(47294),g=i(88573),h=i(25379),m=i(98171),y=i(33512),_=i(82941),v=i(28291),x=i(45809),b=i(8460),f=i(28952),I=i(90950),C=i(35380),j=i(4389),P=i(80986),k=i(27503),w=i(11580);!function(e){e.Initial="initial",e.CreatePlaylist="create_playlist",e.CreatePlaylistReady="create_playlist_ready"}(a||(a={}));let T=class extends o.D{constructor(e,t,i,a,s,o,n,l){super(),this.service=e,this.playlistModule=t,this.seoModule=i,this.itemList=a,this.user=s,this.recommendUser=o,this.bizContext=n,this.accountList=l,this.defaultState={uniqueId:void 0,statusCode:void 0,secUid:void 0,profileState:"initial"}}setUniqueId(e,t){e.uniqueId=t}setSecUid(e,t){e.secUid=t}setStatusCode(e,t){e.statusCode=t}setProfileState(e,t){e.profileState=t}resetUserPage(e){return e.pipe((0,I.z)((()=>(0,_.of)(this.getActions().setUniqueId(void 0),this.recommendUser.getActions().setUniqueId(void 0),this.getActions().setSecUid(void 0),this.getActions().setStatusCode(0),this.itemList.getActions().resetItemList({key:"favorites"}),this.itemList.getActions().resetItemList({key:"user-post"}),this.itemList.getActions().resetItemList({key:"user-liked"}),this.accountList.getActions().resetUserFollowInfo(),this.itemList.getActions().dispose$(),this.playlistModule.getActions().resetData(),this.getActions().setProfileState("initial")))))}getUserInfo(e){return e.pipe((0,C.M)(this.user.state$,this.bizContext.state$),(0,j.w)((([e,t,i])=>{var a,s,o,n,l;const{uniqueId:r,language:c,abTestVersion:p,user:u,appType:g}=e,{uniqueId:h,secUid:m}=(0,d.m7)(u),y=t.users[null!=r?r:""];let f;const C=new v.c;if("number"==typeof(null===(a=null==y?void 0:y.extraInfo)||void 0===a?void 0:a.statusCode)){const e=this.itemList.getUserVideoList$({secUid:null!==(s=y.secUid)&&void 0!==s?s:"",key:"user-post",abTestVersion:p,user:u,language:c},{onVideoList(e){C.next(e),C.complete()}}),t=Boolean(u)&&(Boolean(h&&h===y.uniqueId)||Boolean(m&&m===y.secUid));f=(0,x.T)(e,this.setSEO(c,g,null===(o=null==i?void 0:i.bizContext)||void 0===o?void 0:o.isBot,C,y),(0,_.of)(this.getActions().setUniqueId(y.uniqueId),this.recommendUser.getActions().setUniqueId(y.uniqueId),this.getActions().setSecUid(y.secUid),!t&&y.privateAccount?this.noop():this.playlistModule.getActions().getVideoPlaylistData({uid:null!==(n=y.id)&&void 0!==n?n:"",secUid:null!==(l=y.secUid)&&void 0!==l?l:"",isReset:!0})))}else{let t=!1;f=this.service.getUserDetail(e).pipe((0,I.z)((e=>{var a,s,{needFix:o}=e,n=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(i[a[s]]=e[a[s]])}return i}(e,["needFix"]);const{statusCode:l,userInfo:{user:r,stats:y}={}}=n,v=[(0,_.of)(this.getActions().setStatusCode(l),this.getActions().setUniqueId(null==r?void 0:r.uniqueId),this.recommendUser.getActions().setUniqueId(null==r?void 0:r.uniqueId),this.getActions().setSecUid(null==r?void 0:r.secUid))];let b;(null==r?void 0:r.id)&&(v.push((0,_.of)(this.user.getActions().setUser(Object.assign(Object.assign({},r),{extraInfo:{statusCode:l}})))),y&&v.push((0,_.of)(this.user.getActions().setUserStats({stats:Object.assign(Object.assign({},y),{needFix:o}),uniqueId:r.uniqueId}))),0!==l&&10222!==l||(b=this.itemList.getUserVideoList$({secUid:null!==(a=r.secUid)&&void 0!==a?a:"",key:"user-post",userId:null==r?void 0:r.id,language:c,abTestVersion:p,user:u},{onVideoList(e){C.next(e),C.complete()}}),v.push(b),t=!0)),t||(C.next(void 0),C.complete()),v.push(this.setSEO(c,g,null===(s=i.bizContext)||void 0===s?void 0:s.isBot,C,r,y));const f=Boolean(u)&&(Boolean(h&&h===(null==r?void 0:r.uniqueId))||Boolean(m&&m===(null==r?void 0:r.secUid)));if(!(null==r?void 0:r.privateAccount)||f){const{id:e="",secUid:t=""}=(0,d.m7)(r);v.push((0,_.of)(this.playlistModule.getActions().getVideoPlaylistData({uid:e,secUid:t,isReset:!0})))}return(0,x.T)(...v)})))}return f.pipe((0,P.K)((e=>(console.error(e),(0,_.of)(this.getActions().setStatusCode(-1))))),(0,b.O)(this.getActions().resetUserPage()),(0,k.l)(this.terminate()),(0,w.R)(this.dispose$))})))}setSEO(e,t,i=!1,a,s,o){const n={statusCode:0,userInfo:{user:null!=s?s:{},stats:null!=o?o:{}}},l={language:e};return i&&a?a.pipe((0,I.z)((e=>this.seoModule.setUserSEOProps(n,l,t,e)))):this.seoModule.setUserSEOProps(n,l,t)}};(0,s.__decorate)([(0,n.cQ)(),(0,s.__metadata)("design:type",f.y)],T.prototype,"dispose$",void 0),(0,s.__decorate)([(0,n.lF)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Object]),(0,s.__metadata)("design:returntype",void 0)],T.prototype,"setUniqueId",null),(0,s.__decorate)([(0,n.lF)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Object]),(0,s.__metadata)("design:returntype",void 0)],T.prototype,"setSecUid",null),(0,s.__decorate)([(0,n.lF)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,Number]),(0,s.__metadata)("design:returntype",void 0)],T.prototype,"setStatusCode",null),(0,s.__decorate)([(0,n.lF)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object,String]),(0,s.__metadata)("design:returntype",void 0)],T.prototype,"setProfileState",null),(0,s.__decorate)([(0,n.Qm)(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[f.y]),(0,s.__metadata)("design:returntype",void 0)],T.prototype,"resetUserPage",null),(0,s.__decorate)([(0,n.Qm)({payloadGetter:1}),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[f.y]),(0,s.__metadata)("design:returntype",void 0)],T.prototype,"getUserInfo",null),T=(0,s.__decorate)([(0,l.Y)("UserPage"),(0,s.__metadata)("design:paramtypes",[r.K,c.c,p.q,u.h,g.z,h.R,m.r,y.G])],T)},63013:(e,t,i)=>{i.d(t,{T9:()=>C,EN:()=>h,XL:()=>f,PN:()=>P,nI:()=>x,k:()=>O,WX:()=>y,$M:()=>b,GI:()=>m,ez:()=>I,tI:()=>T,l2:()=>v,vw:()=>_,ou:()=>j,s_:()=>k,y2:()=>w});var a=i(30471),s=i(58718),o=i(97978),n=i(43340),l=i(71030),d=i(31738),r=i(77613);const c={id:"video-dark-407479bb",use:"video-dark-407479bb-usage",viewBox:"0 0 40 40",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" id="video-dark-407479bb"><path fill="white" fill-opacity=".34" d="M28.447 35.066H4.777A4.211 4.211 0 0 1 .57 30.86V8.776A4.211 4.211 0 0 1 4.776 4.57H28.45a4.211 4.211 0 0 1 4.206 4.206v5.782l5.367-4.817a.843.843 0 0 1 1.405.625V29.27a.843.843 0 0 1-1.405.626l-5.367-4.818v5.782a4.215 4.215 0 0 1-4.209 4.206Z" /><path fill="white" fill-rule="evenodd" stroke="white" stroke-width=".6" d="M15.965 20.105v5.25c0 .198.16.358.357.358h.929c.197 0 .357-.16.357-.358v-5.25h5.25c.197 0 .357-.16.357-.357v-.928a.357.357 0 0 0-.358-.357h-5.25v-5.25a.357.357 0 0 0-.356-.357h-.929a.357.357 0 0 0-.357.357v5.25h-5.25a.357.357 0 0 0-.358.357v.928c0 .198.16.357.358.357h5.25Z" clip-rule="evenodd" /></symbol>'};function p(e){const t=(0,d.useContext)(r.e);return(0,d.useLayoutEffect)((()=>(t.add(c),()=>{t.remove("video-dark-407479bb")})),[]),(0,l.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,l.jsx)("use",{xlinkHref:"#video-dark-407479bb"},void 0)}),void 0)}const u={id:"video-1aaf63be",use:"video-1aaf63be-usage",viewBox:"0 0 40 40",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" id="video-1aaf63be"><path fill="#161823" fill-opacity=".34" d="M28.447 35.067H4.777A4.211 4.211 0 0 1 .57 30.861V8.777a4.211 4.211 0 0 1 4.206-4.205H28.45a4.211 4.211 0 0 1 4.206 4.205v5.782l5.367-4.817a.843.843 0 0 1 1.405.625v18.904a.843.843 0 0 1-1.405.626l-5.367-4.817v5.781a4.215 4.215 0 0 1-4.209 4.206Z" /><path fill="white" fill-rule="evenodd" stroke="white" stroke-width=".6" d="M15.965 20.107v5.25c0 .197.16.357.357.357h.929c.197 0 .357-.16.357-.357v-5.25h5.25c.197 0 .357-.16.357-.357v-.929a.357.357 0 0 0-.358-.357h-5.25v-5.25a.357.357 0 0 0-.356-.357h-.929a.357.357 0 0 0-.357.357v5.25h-5.25a.357.357 0 0 0-.358.357v.929c0 .197.16.357.358.357h5.25Z" clip-rule="evenodd" /></symbol>'};function g(e){const t=(0,d.useContext)(r.e);return(0,d.useLayoutEffect)((()=>(t.add(u),()=>{t.remove("video-1aaf63be")})),[]),(0,l.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,l.jsx)("use",{xlinkHref:"#video-1aaf63be"},void 0)}),void 0)}const h=(0,a.Z)("div",{target:"e3q47hb0"})((({theme:{isDark:e,colors:t}})=>({width:"100%",display:"flex",flexDirection:"column",background:e?t.BGSecondary:t.BGPrimary,padding:"40px 24px 92px",boxSizing:"border-box",borderRadius:"8px",height:"calc(100vh - 145px)",position:"relative"})),"label:DivContentContainer;"),m=(0,a.Z)("p",{target:"e3q47hb1"})((({theme:e})=>[(0,n.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"semiBold",typography:"P2",color:"TextSecondary"}),{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:"16px"}]),"label:PBackText;"),y=(0,a.Z)("h3",{target:"e3q47hb2"})((({theme:e})=>[(0,n.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"bold",typography:"H3",color:"TextPrimary"})]),"label:H3Title;"),_=(0,a.Z)(s.Z,{target:"e3q47hb3"})((({theme:{direction:e}})=>({width:"20px",height:"20px",marginInlineEnd:"4px",transform:`rotateZ(${"rtl"===e?"180deg":0})`})),"label:StyledBackIcon;"),v=(0,a.Z)("p",{target:"e3q47hb4"})((({theme:e})=>[(0,n.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"normal",typography:"P2",color:"TextTertiaryAlt"}),{marginTop:"4px"}]),"label:PSubtitle;"),x=(0,a.Z)("div",{target:"e3q47hb5"})({height:"32px",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"32px 0 12px"},"label:DivNameContainer;"),b=(0,a.Z)("h6",{target:"e3q47hb6"})((({theme:e})=>[(0,n.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"bold",typography:"H6",color:"TextPrimary"}),{fontSize:"24px",lineHeight:"28px"}]),"label:H6Title;"),f=(0,a.Z)("div",{target:"e3q47hb7"})({display:"flex"},"label:DivCountContainer;"),I=(0,a.Z)("p",{target:"e3q47hb8"})((({theme:e,isRed:t=!1})=>[(0,n.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"normal",typography:"P4",color:t?"Primary":"TextTertiaryAlt"}),{fontSize:"14px",lineHeight:"17px"}]),"label:PCount;"),C=(0,a.Z)("div",{target:"e3q47hb9"})((({theme:e})=>[(0,n.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"semiBold",typography:"P3",color:"Primary"}),{display:"flex",height:"24px",alignItems:"center",justifyContent:"flex-end",cursor:"pointer"}]),"label:DivAddVideoContainer;"),j=(0,a.Z)(o.Z,{target:"e3q47hb10"})({width:"20px",height:"20px",marginInlineEnd:"4px"},"label:StyledPlus;"),P=(0,a.Z)("div",{target:"e3q47hb11"})((({theme:e})=>({width:"100%",height:"206px",borderRadius:"4px",background:e.colors.BGView,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",cursor:"pointer"})),"label:DivEmptyContainer;"),k=(0,a.Z)(g,{target:"e3q47hb12"})({width:"40px",height:"40px",marginBottom:"12px"},"label:StyledVideoIcon;"),w=(0,a.Z)(p,{target:"e3q47hb13"})({width:"40px",height:"40px",marginBottom:"12px"},"label:StyledVideoIconDark;"),T=(0,a.Z)("p",{target:"e3q47hb14"})((({theme:e})=>[(0,n.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"normal",typography:"P2",color:"TextSecondary"})]),"label:PEmptyText;"),O=(0,a.Z)("div",{target:"e3q47hb15"})({display:"flex",flexDirection:"column",width:"100%",height:"100%",overflowY:"auto"},"label:DivVideoListContainer;")},55496:(e,t,i)=>{i.d(t,{X:()=>p,H:()=>c});var a=i(71030),s=i(31738),o=i(56362),n=i(66943),l=i(30471);const d=(0,l.Z)("div",{target:"e150kk9w0"})({width:"100%"},"label:DivDraggableListContainer;"),r=(0,l.Z)("div",{target:"e150kk9w1"})((({isDragging:e=!1,theme:t})=>({background:e?t.colors.BGView:"",width:"100%"})),"label:DivDraggableItemContainer;");function c(e,t,i){const a=Array.from(e),[s]=a.splice(t,1);return a.splice(i,0,s),a}const p=(0,s.memo)((({supportDrag:e=!0,list:t=[],onDragEnd:i,renderItem:s})=>e?(0,a.jsx)(o.Z5,Object.assign({onDragEnd:i},{children:(0,a.jsx)(o.bK,Object.assign({droppableId:"droppable"},{children:(e,i)=>(0,a.jsxs)(d,Object.assign({},e.droppableProps,{ref:e.innerRef,isDraggingOver:i.isDraggingOver},{children:[t.map(((e,t)=>(0,a.jsx)(o._l,Object.assign({draggableId:e,index:t},{children:(i,o)=>{let{transform:l}=(0,n.m7)(i.draggableProps.style);o.isDragging&&l&&(l=l.replace(/\(.+,/,"(0,"));const d=Object.assign(Object.assign({},i.draggableProps.style),{transform:l});return(0,a.jsx)(r,Object.assign({ref:i.innerRef},i.draggableProps,i.dragHandleProps,{style:d,isDragging:o.isDragging},{children:s({index:t,id:e})}),void 0)}}),e))),e.placeholder]}),void 0)}),void 0)}),void 0):(0,a.jsx)(d,{children:t.map(((e,t)=>(0,a.jsx)(r,{children:s({index:t,id:e})},e)))},void 0)))},18483:(e,t,i)=>{i.d(t,{T:()=>j});var a=i(22403),s=i(98279),o=i(3312),n=i(82790),l=i(70517),d=i(90950),r=i(82941),c=i(4389),p=i(80986),u=i(8460),g=i(27503),h=i(35380),m=i(28952),y=i(9597),_=i(46682),v=i(40362),x=i(43549),b=i(59271),f=i(40589),I=i(32565);let C=class{constructor(e){this.fetch=e}checkPlaylistName(e){return this.fetch.get("/api/playlist/name_check",{query:{name:e},baseUrlType:2,headers:{[f.eD]:this.fetch.csrfToken}})}updatePlaylistName(e){return this.fetch.post("/api/playlist/update/",{baseUrlType:2,headers:{[f.eD]:this.fetch.csrfToken},body:b.stringify(e)})}};C=(0,a.__decorate)([(0,x.G)(),(0,a.__metadata)("design:paramtypes",[I.r])],C);let j=class extends s.D{constructor(e,t){super(),this.service=e,this.t=t,this.defaultState={playlistName:"",loading:!1,updatePlaylistNameLoading:!1,statusCode:0,isValid:!0,hasChecked:!1}}setLoading(e,t){e.loading=t}setUpdatePlaylistNameLoading(e,t){e.updatePlaylistNameLoading=t}setStatusCode(e,t){e.statusCode=t}setIsValid(e,t){e.isValid=t}setHasChecked(e,t){e.hasChecked=t}setPlaylistName(e,t){e.playlistName=t}resetData(e){return e.pipe((0,d.z)((()=>(0,r.of)(this.getActions().dispose$(),this.getActions().setLoading(!1),this.getActions().setPlaylistName(""),this.getActions().setUpdatePlaylistNameLoading(!1),this.getActions().setIsValid(!0),this.getActions().setStatusCode(0),this.getActions().setHasChecked(!1)))))}checkPlaylistName(e){return e.pipe((0,c.w)((e=>this.service.checkPlaylistName(e).pipe((0,p.K)((()=>(0,r.of)({statusCode:-1,isValid:!1}))),(0,d.z)((({statusCode:e,isValid:t=!1})=>(0,r.of)(this.getActions().setIsValid(t),this.getActions().setStatusCode(e)))),(0,u.O)(this.getActions().setHasChecked(!1),this.getActions().setLoading(!0)),(0,g.l)(this.getActions().setHasChecked(!0),this.getActions().setLoading(!1))))))}updatePlaylistName(e){return e.pipe((0,h.M)(this.state$),(0,c.w)((([e,{playlistName:t}])=>this.service.updatePlaylistName(Object.assign(Object.assign({},e),{name:t})).pipe((0,p.K)((()=>(0,r.of)({statusCode:-1}))),(0,d.z)((({statusCode:i})=>{const{playlistId:a,successCallback:s}=e;return _.I.handleCompleteEditingPlaylist({playlist_id:a,enter_method:"rename_playlist",status:0===i?"1":"0"}),0!==i&&v.h.open({content:this.t("playlist_webapp_toast_error_tryagain"),duration:3,widthType:"half"}),null==s||s(a,t),(0,r.of)(this.noop())})),(0,u.O)(this.getActions().setUpdatePlaylistNameLoading(!0)),(0,g.l)(this.getActions().setUpdatePlaylistNameLoading(!1))))))}};(0,a.__decorate)([(0,o.cQ)(),(0,a.__metadata)("design:type",m.y)],j.prototype,"dispose$",void 0),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],j.prototype,"setLoading",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],j.prototype,"setUpdatePlaylistNameLoading",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Number]),(0,a.__metadata)("design:returntype",void 0)],j.prototype,"setStatusCode",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],j.prototype,"setIsValid",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],j.prototype,"setHasChecked",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,String]),(0,a.__metadata)("design:returntype",void 0)],j.prototype,"setPlaylistName",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[m.y]),(0,a.__metadata)("design:returntype",void 0)],j.prototype,"resetData",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[m.y]),(0,a.__metadata)("design:returntype",void 0)],j.prototype,"checkPlaylistName",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[m.y]),(0,a.__metadata)("design:returntype",void 0)],j.prototype,"updatePlaylistName",null),j=(0,a.__decorate)([(0,n.Y)("PlaylistNameModule"),(0,a.__param)(1,(0,l.t)(y.s$)),(0,a.__metadata)("design:paramtypes",[C,Function])],j)},71607:(e,t,i)=>{i.d(t,{D:()=>C,v:()=>j});var a=i(71030),s=i(71928),o=i(99333),n=i(31738),l=i(10442),d=i(30036),r=i(76709),c=i(18483),p=i(61216),u=i(30471),g=i(41573),h=i(41830),m=i(43340);const y=(0,u.Z)("div",{target:"e1e94w3e0"})({position:"relative",width:"100%"},"label:DivEditAreaContainer;"),_=(0,u.Z)("input",{target:"e1e94w3e1"})((({theme:{colors:e,isDark:t}})=>({width:"100%",height:"38px",borderRadius:"4px",background:t?e.BGView:e.BGInput,caretColor:"#fe2c55",fontSize:"16px",color:e.TextPrimary,lineHeight:"24px",outline:"none",border:"none",padding:"7px 12px",boxSizing:"border-box",paddingInlineEnd:"38px","&:focus":{background:e.BGInput2,outline:"1.5px solid rgba(22, 24, 35, 0.2)"}})),"label:InputText;"),v=(_.withComponent("textarea"),(0,u.Z)("p",{target:"e1e94w3e10"})({height:"18px",lineHeight:"18px",color:"#FF4C3A",fontSize:"15px",marginTop:"6px",display:"flex",alignItems:"center"},"label:PInputError;")),x=(0,u.Z)("div",{target:"e1e94w3e11"})((({theme:{colors:e}})=>({width:"16px",height:"16px",marginInlineEnd:"4px",display:"flex",justifyContent:"center",alignItems:"center","*":{fill:e.Primary}})),"label:DivIconWrapper;"),b=(0,u.Z)(g.Z,{target:"e1e94w3e12"})((({theme:e})=>[(0,m.YJ)({direction:e.direction,end:"12px"}),{position:"absolute",top:"11px"}]),"label:StyledTickBold;"),f=(0,p.F4)({from:{transform:"rotateZ(0)"},to:{transform:"rotateZ(360deg)"}}),I=(0,u.Z)(h.Z,{target:"e1e94w3e13"})((({theme:e})=>[(0,m.YJ)({direction:e.direction,end:"12px"}),{position:"absolute",top:"7px",animation:`${f} 1s infinite`}]),"label:StyledProgressCircle;"),C=25,j=(0,n.memo)((({initialPlaylistName:e="",placeholder:t,style:i})=>{const p=(0,d.Q)(),{colors:u}=(0,s.u)(),[{playlistName:g="",loading:h=!1,isValid:m,hasChecked:f},j]=(0,o.b)(c.T,{selector:e=>({playlistName:e.playlistName,loading:e.loading,isValid:e.isValid,hasChecked:e.hasChecked}),dependencies:[]}),P=f&&m,k=f&&!m,w=(0,n.useMemo)((()=>g.length>C?p("playlist_webapp_creation_namePlaylist_characterCount_limit"):k?p("yproject_playlist_name_toast",{name:g}):""),[k,g,p]),T=(0,n.useCallback)((()=>k||g.length>C?(0,a.jsxs)(v,{children:[(0,a.jsx)(x,{children:(0,a.jsx)(l.j,{size:16},void 0)},void 0),w]},void 0):h?(0,a.jsx)(I,{fill:u.LineInput,width:24,height:24},void 0):P?(0,a.jsx)(b,{fill:"#0BE09B",width:16,height:16},void 0):void 0),[k,P,u.LineInput,w,h,g.length]),O=(0,r.Nr)(((e="")=>{0===e.trim().length||e.length>C||j.checkPlaylistName(e)}),[j],1e3),S=(0,n.useCallback)((e=>{const{value:t}=e.target;O(t),j.setStatusCode(0),j.setIsValid(!0),j.setHasChecked(!1),j.setPlaylistName(t)}),[O,j]);return(0,n.useEffect)((()=>(e&&j.setPlaylistName(e),j.reset)),[j,e]),(0,a.jsxs)(y,Object.assign({style:i,"data-e2e":"edit-playlist-name-input"},{children:[(0,a.jsx)(_,{style:{outline:k?"1.5px solid #FF4C3A":""},placeholder:null!=t?t:p("playlist_webapp_upload_nameplaylist_header"),value:g,onChange:S},void 0),T()]}),void 0)}))},10151:(e,t,i)=>{i.d(t,{j:()=>q});var a=i(71030),s=i(71928),o=i(99333),n=i(25879),l=i(31738),d=i(28972),r=i(7548),c=i(30036),p=i(52869),u=i(47294),g=i(75942),h=i(66943),m=i(95925),y=i(40362),_=i(23739),v=i(5909),x=i(8098),b=i(30471);const f=(0,b.Z)("div",{target:"e1cea6s60"})((({theme:e})=>({position:"fixed",zIndex:1001,background:e.colors.BGPrimary})),"label:DivContainer;"),I=(0,b.Z)("div",{target:"e1cea6s61"})((({theme:{colors:e}})=>({position:"fixed",left:0,top:0,right:0,bottom:0,background:e.ConstBGInverse2})),"label:DivMask;"),C=(0,b.Z)("div",{target:"e1cea6s62"})((({position:e="left",width:t="320px",theme:{isDark:i,colors:a}})=>[{position:"fixed",top:0,bottom:0,right:"right"===e?0:"unset",left:"right"===e?"unset":0,width:t,overflowY:"auto",WebkitOverflowScrolling:"touch",boxSizing:"border-box",lineHeight:"32px",transform:`translateX(${"right"===e?"100%":"-100%"})`,transition:"transform 300ms",background:i?a.BGSecondary:a.BGPrimary,"::-webkit-scrollbar":{display:"none"},"&.enter-done":{transform:"translateX(0)"}}]),"label:DivContent;"),j=(0,l.memo)((e=>{const{active:t,setActive:i,zIndex:s=1001,width:o,position:n="right",children:d}=e,[r,c]=(0,l.useState)(!1),p=(0,v.k6)(),u=(0,l.useCallback)((()=>{i(!1)}),[i]);return(0,l.useEffect)((()=>(c(!0),p.listen((()=>{i(!1)})))),[]),(0,a.jsxs)(f,Object.assign({style:{zIndex:s}},{children:[(0,a.jsx)(x.Z,Object.assign({unmountOnExit:!0,timeout:300,in:r&&t},{children:(0,a.jsx)(I,{onClick:u},void 0)}),void 0),(0,a.jsx)(x.Z,Object.assign({unmountOnExit:!0,timeout:300,in:r&&t},{children:(0,a.jsx)(C,Object.assign({width:o,position:n},{children:d}),void 0)}),void 0)]}),void 0)}));var P=i(45401),k=i(15532),w=i(44370),T=i(43340);const O=(0,b.Z)("div",{target:"evsm5jd0"})((({theme:{isDark:e,colors:t}})=>({position:"sticky",top:0,left:0,width:"100%",display:"flex",flexDirection:"column",padding:"24px 16px",boxSizing:"border-box",background:e?t.BGSecondary:t.BGPrimary,zIndex:10})),"label:DivDrawerHeaderContainer;"),S=(0,b.Z)("p",{target:"evsm5jd1"})((({theme:e})=>[(0,T.GI)({theme:e,fontFamily:"TikTokDisplayFont",fontWeight:"bold",typography:"H6",color:"TextPrimary"}),{fontSize:"24px",lineHeight:"28px"}]),"label:PDrawerTitle;"),D=(0,b.Z)("p",{target:"evsm5jd2"})((({theme:e})=>[(0,T.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"normal",typography:"P1",color:"TextTertiaryAlt"}),{marginTop:"4px",fontSize:"14px",lineHeight:"17px"}]),"label:PDrawerSubtitle;"),F=(0,b.Z)("div",{target:"evsm5jd3"})((({theme:{direction:e}})=>[(0,T.YJ)({direction:e,end:20}),{position:"absolute",top:"24px",width:"24px",height:"24px",cursor:"pointer"}]),"label:DivCloseContainer;"),L=(0,b.Z)("div",{target:"evsm5jd4"})({width:"100%",display:"flex",flexDirection:"column",height:"100%",overflowY:"auto"},"label:DivContentContainer;"),A=(0,b.Z)("div",{target:"evsm5jd5"})({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh",boxSizing:"border-box",padding:"0 59px",position:"relative"},"label:DivErrorContainer;"),U=(0,b.Z)("p",{target:"evsm5jd6"})((({theme:e})=>[(0,T.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"bold",typography:"P1",color:"TextPrimary"}),{marginTop:"24px",textAlign:"center"}]),"label:PErrorTitle;"),V=(0,b.Z)("p",{target:"evsm5jd7"})((({theme:e})=>[(0,T.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"normal",typography:"P3",color:"TextSecondary"}),{marginTop:"8px",textAlign:"center"}]),"label:PErrorDesc;"),q=(0,l.memo)((({needRequestAfterClickItem:e=!1,playlistId:t="",drawerActive:i,setDrawerActive:v,itemListKey:x,selectedVideoListKey:b,onHitBottom:f})=>{const I=(0,c.Q)(),{isRTL:C}=(0,p.Y)(),{colors:T}=(0,s.u)(),q=C?"left":"right",[{list:Z=[],loading:z=!1,hasMore:B=!0},E]=(0,o.b)(u.h,{selector:e=>{var t;return null!==(t=e[x])&&void 0!==t?t:{}},dependencies:[x]}),M=(0,o.q)(k.a),[N,G]=(0,o.b)(g.y,{selector:e=>{var i;return null!==(i=e[t])&&void 0!==i?i:{}},dependencies:[t]}),{list:H=[]}=(0,h.m7)((0,n.m)(u.h,{selector:e=>e[b],dependencies:[b]})),W=(0,l.useCallback)((e=>()=>{const{videoCount:t=0}=(0,h.m7)(N);G.setPlaylistItem(Object.assign(Object.assign({},N),{videoCount:t+e}))}),[G,N]),$=(0,l.useCallback)((i=>()=>{const a=[...H],s=H.findIndex((e=>e===i)),o=s>=0;if(o)a.splice(s,1);else{if(H.length>=P.hX)return void y.h.open({content:I("playlist_webapp_toast_error_vidlimit",{number:P.hX}),duration:3,widthType:"half"});a.push(i)}e?M.modifyPlaylistItems({playlistId:t,addItemIds:o?void 0:[i],deleteItemsIds:o?[i]:void 0,key:"video_playlist",enter_method:o?"remove_playlist_video":"add_playlist_video",onSuccess:W(o?-1:1)}):E.setItemListById({key:"create_video_playlist",list:a})}),[E,e,W,t,M,H,I]),R=(0,l.useCallback)((()=>{v(!1)}),[v]),Q=0===Z.length&&!B&&!z,K=(0,l.useRef)(null);return(0,m.su)({onHitBottom:f,elemRef:K}),(0,l.useEffect)((()=>{i&&0===Z.length&&B&&(null==f||f())}),[i,B,Z.length,z,f]),(0,a.jsxs)(j,Object.assign({active:i,setActive:v,width:"476px",position:q},{children:[Q&&(0,a.jsxs)(A,{children:[(0,a.jsx)(F,Object.assign({onClick:R},{children:(0,a.jsx)(d.Z,{width:24,height:24,fill:T.TextTertiary},void 0)}),void 0),(0,a.jsx)(r.Z,{width:72,height:72,fill:T.TextTertiary},void 0),(0,a.jsx)(U,{children:I("playlist_webapp_selectvid_error_header")},void 0),(0,a.jsx)(V,{children:I("playlist_webapp_selectvid_error_desc")},void 0)]},void 0),!Q&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(O,{children:[(0,a.jsx)(S,{children:I("playlist_webapp_selectvid_header")},void 0),(0,a.jsx)(D,{children:I("playlist_webapp_selectvid_desc")},void 0),(0,a.jsx)(F,Object.assign({onClick:R},{children:(0,a.jsx)(d.Z,{width:24,height:24,fill:T.TextTertiary},void 0)}),void 0)]},void 0),(0,a.jsxs)(L,Object.assign({ref:K},{children:[Z.map(((e,t)=>(0,a.jsx)(w.mo,{id:e,index:t,onClickVideoItem:$(e),selectedVideos:H,needShowMaskWhenAddedToOtherPlaylist:!0,needPostCheckbox:!0,supportPreview:!0},e))),z&&(0,a.jsx)(_.g,{center:!0},void 0)]}),void 0)]},void 0)]}),void 0)}))},44370:(e,t,i)=>{i.d(t,{mo:()=>f,VV:()=>C});var a=i(71030),s=i(25879),o=i(99333),n=i(43226),l=i.n(n),d=i(31738),r=i(42589),c=i(30036),p=i(45179),u=i(66943),g=i(81530),h=i(98999),m=i(10967),y=i(94163),_=i(40362),v=i(22074),x=i(23959);const b=(0,i(30471).Z)("div",{target:"e117us4s0"})((({theme:e})=>({width:"36px",height:"28px",display:"flex",justifyContent:"center",alignItems:"center","*":{fill:e.colors.TextSecondary}})),"label:DivIconWrapper;"),f=(0,d.memo)((({id:e,index:t,target:i="_self",onClickVideoItem:n=l(),editState:v="none",selectedVideos:f=[],needPostCheckbox:I=!1,needPostDragIcon:C=!1,supportPreview:j=!1,needShowMaskWhenAddedToOtherPlaylist:P=!1,extraTeaParams:k={}})=>{const w=(0,c.Q)(),T=(0,s.m)(p.A,{selector:t=>t[e],dependencies:[e]}),{video:O,playlistId:S,stats:D,statsV2:F,desc:L="",authorId:A="",scheduleTime:U=0,secret:V,forFriend:q}=(0,u.m7)(T),Z=null!=F?F:D,{duration:z,zoomCover:B,cover:E="",playAddr:M="",bitrateInfo:N,bitrate:G,volumeInfo:H}=(0,u.m7)(O),W=(null==B?void 0:B[240])||(null==B?void 0:B[480])||E,{playCount:$=0}=(0,u.m7)(Z),R=f.includes(e),Q=P&&Boolean(S)&&"0"!==S,K=(0,d.useMemo)((()=>({group_id:e,author_id:A,is_scheduled:Boolean(U),playlist_id:S,secret:V,forFriend:q})),[e,A,U,S,V,q]),X=(0,d.useMemo)((()=>Object.assign({playlist_id:S},k)),[k,S]),Y=(0,o.q)(g.f),J=(0,d.useRef)(null),ee=(0,d.useCallback)((i=>{var a,s;Q||((0,h.NS)(i),Y.updateVideo({currentVideo:{id:e,index:t,mode:1},playProgress:null!==(s=null===(a=J.current)||void 0===a?void 0:a.currentTime)&&void 0!==s?s:0}))}),[Q,Y,e,t]),te=(0,d.useCallback)((()=>{if(Q)return _.h.destroy(),void _.h.open({content:w("playlist_webapp_selectvid_toast_alreadyadded"),duration:3,widthType:"half"});null==n||n()}),[Q,n,w]);return(0,a.jsxs)(x.Ni,Object.assign({onClick:te,hasBeenAddedToOtherPlaylist:Q},{children:[("none"===v||"initial"===v||"add_videos"===v)&&(0,a.jsx)(x.fU,{children:t<9?`0${t+1}`:t+1},void 0),"remove_videos"===v&&(0,a.jsx)(x.fU,{children:R?(0,a.jsx)(x.Xc,{},void 0):(0,a.jsx)(x.nj,{},void 0)},void 0),j?(0,a.jsx)(x.UP,Object.assign({onMouseEnter:ee},{children:(0,a.jsx)(x.U$,{children:(0,a.jsx)(m.S,{desc:L,poster:W,horizontal:!1,mode:1,ref:J,id:e,playUrl:M,index:t,itemMute:!0,duration:z,bitrateInfo:N,teaParams:K,disableDownload:!0,volumeInfo:H,bitrate:Number(G)},void 0)},void 0)}),void 0):(0,a.jsx)(x.qf,{src:W},void 0),(0,a.jsxs)(x.UE,{children:[(0,a.jsx)(y.Q,{onLinkClick:l(),ellispsisLine:2,ellipsisOnNarrow:!0,item:T,target:i,e2eTag:"browse-video-desc",reportParams:X},void 0),(0,a.jsx)(x.ne,{children:w("playlist_webapp_profileview_playlists_numberviews",{num:$,number:(0,u.BT)($)})},void 0)]},void 0),I&&(0,a.jsx)(x.o_,{children:R||Q?(0,a.jsx)(x.Xc,{},void 0):(0,a.jsx)(x.nj,{},void 0)},void 0),C&&(0,a.jsx)(b,{children:(0,a.jsx)(r.S,{size:28},void 0)},void 0)]}),void 0)})),I=(0,d.memo)((({index:e})=>(0,a.jsxs)(x.Ni,{children:[(0,a.jsx)(x.fU,{children:e<9?`0${e+1}`:e+1},void 0),(0,a.jsx)(v.Xu,{style:{width:"80px",height:"106px",flexShrink:0}},void 0),(0,a.jsxs)(x.UE,{children:[(0,a.jsx)(v.kQ,{style:{width:"50%",height:"20px"}},void 0),(0,a.jsx)(v.kQ,{style:{width:"30%",height:"17px",marginTop:"6px"}},void 0)]},void 0)]},void 0))),C=(0,d.memo)((({startIndex:e=0})=>(0,a.jsx)(a.Fragment,{children:new Array(10).fill(0).map(((t,i)=>(0,a.jsx)(I,{index:e+i},`${e+i}`)))},void 0)))},45401:(e,t,i)=>{i.d(t,{hX:()=>s,jn:()=>a});const a={width:"154px",height:"44px",fontSize:"15px",lineHeight:"18px",minHeight:"unset",marginInlineStart:"8px"},s=100;var o;!function(e){e.None="none",e.Initial="initial",e.RemoveVideos="remove_videos",e.AddVideos="add_videos"}(o||(o={}))},57569:(e,t,i)=>{i.d(t,{OD:()=>h,cs:()=>m,xx:()=>y});var a=i(71030),s=i(99333),o=i(25879),n=i(31738),l=i(5909),d=i(66943),r=i(15137),c=i(47294),p=i(10347),u=i(53292),g=i(79331);function h(e){const{language:t="en",abTestVersion:i,user:a}=(0,d.m7)((0,r.Lh)((()=>["language","abTestVersion","user"]),[])),[o,l]=(0,s.b)(c.h,{selector:e=>{var t;return null!==(t=e.video_playlist)&&void 0!==t?t:p.n},dependencies:[]}),{loading:u,hasMore:g}=o;return(0,n.useCallback)((()=>{!u&&g&&l.getPlaylistVideoList({mixId:e,key:"video_playlist",abTestVersion:i,user:a,language:t})}),[u,g,l,e,i,a,t])}const m=()=>{const{mixInfo:e}=(0,o.m)(g.N,{selector:e=>({mixInfo:e.mixInfo}),dependencies:[]}),{id:t="",name:i="",creator:a}=(0,d.m7)(e),{uniqueId:s=""}=(0,d.m7)(a),r=(0,l.k6)(),{pathname:c}=(0,l.TH)(),{id:p}=(0,l.UO)();(0,n.useEffect)((()=>{if(!s||!t)return;const e=u.SN.videoPlaylist({id:t,uniqueId:s,content:i});if(i&&p===t&&e!==c){const t=`${e}${location.search}`;r.replace(t)}}),[t,c,r,i,p,s])},y=e=>(0,n.useMemo)((()=>{const t=e.length-e.trimStart().length;return t?(0,a.jsx)(a.Fragment,{children:new Array(t).fill(0).map(((e,t)=>(0,a.jsx)(n.Fragment,{children:"Â "},`${t}`)))},void 0):null}),[e])},15532:(e,t,i)=>{i.d(t,{a:()=>I});var a=i(22403),s=i(98279),o=i(3312),n=i(82790),l=i(70517),d=i(35380),r=i(17620),c=i(80986),p=i(82941),u=i(90950),g=i(28952),h=i(9597),m=i(47294),y=i(46682),_=i(40362),v=i(43549),x=i(59271),b=i(32565);let f=class{constructor(e){this.fetch=e}modifyPlaylistVideoItems(e){const{playlistId:t,addItemIds:i=[],deleteItemsIds:a=[],commitItemIds:s=[],enter_method:o}=e;let n={};switch(o){case"remove_playlist_video":n={playlistId:t,deleteItemsIds:a.join(",")};break;case"add_playlist_video":n={playlistId:t,addItemIds:i.join(",")};break;case"reorder_playlist_video":n={playlistId:t,commitItemIds:s.join(",")}}return this.fetch.post("/api/playlist/modify_items/",{baseUrlType:2,body:x.stringify(n)})}};f=(0,a.__decorate)([(0,v.G)(),(0,a.__metadata)("design:paramtypes",[b.r])],f);let I=class extends s.D{constructor(e,t,i){super(),this.service=e,this.itemList=t,this.t=i,this.defaultState={loading:!1,statusCode:0}}setLoading(e,t){e.loading=t}setStatusCode(e,t){e.statusCode=t}modifyPlaylistItems(e){return e.pipe((0,d.M)(this.itemList.state$),(0,r.z)((([e,t])=>this.service.modifyPlaylistVideoItems(e).pipe((0,c.K)((()=>(0,p.of)({statusCode:-1}))),(0,u.z)((({statusCode:i})=>{var a,s,o,n;const{key:l="",addItemIds:d=[],deleteItemsIds:r=[],commitItemIds:c=[],enter_method:u,playlistId:g,onSuccess:h,onError:m}=e,v=0===i?"1":"0";if(y.I.handleCompleteEditingPlaylist({playlist_id:g,enter_method:u,status:v}),"remove_playlist_video"===u&&y.I.handleRemovePlaylistVideo({playlist_id:g,enter_method:"edit_playlist",video_list:r.join(","),video_cnt:r.length,status:v}),206003===i)return _.h.open({content:this.t("playlist_webapp_toast_error_cheatPlaylistCannotAdd"),duration:3,widthType:"half"}),(0,p.of)(this.noop());if(0!==i)return _.h.open({content:this.t("playlist_webapp_toast_error_tryagain"),duration:3,widthType:"half"}),null==m||m(),(0,p.of)(this.noop());let x=[...null!==(s=null===(a=t[l])||void 0===a?void 0:a.list)&&void 0!==s?s:[]];const b=null===(n=null===(o=t[l])||void 0===o?void 0:o.hasMore)||void 0===n||n;return"reorder_playlist_video"===u?x.splice(0,c.length,...c):"remove_playlist_video"===u?(x=x.filter((e=>!r.includes(e))),_.h.open({content:this.t("playlist_webapp_profileview_toast_vidremoved",{num:r.length,number:r.length}),duration:3,widthType:"half"})):"add_playlist_video"===u&&x.unshift(...d),null==h||h(),(0,p.of)(this.getActions().setStatusCode(i),this.itemList.getActions().setItemListById({key:l,list:x,hasMore:b}))}))))))}};(0,a.__decorate)([(0,o.cQ)(),(0,a.__metadata)("design:type",g.y)],I.prototype,"dispose$",void 0),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],I.prototype,"setLoading",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Number]),(0,a.__metadata)("design:returntype",void 0)],I.prototype,"setStatusCode",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[g.y]),(0,a.__metadata)("design:returntype",void 0)],I.prototype,"modifyPlaylistItems",null),I=(0,a.__decorate)([(0,n.Y)("PlaylistVideoItemsModule"),(0,a.__param)(2,(0,l.t)(h.s$)),(0,a.__metadata)("design:paramtypes",[f,m.h,Function])],I)},79331:(e,t,i)=>{i.d(t,{N:()=>j});var a=i(22403),s=i(98279),o=i(3312),n=i(82790),l=i(82941),d=i(28291),r=i(45809),c=i(28952),p=i(90950),u=i(17620),g=i(80986),h=i(8460),m=i(27503),y=i(11580),_=i(66943),v=i(59477),x=i(47294),b=i(75942),f=i(43549),I=i(32565);let C=class{constructor(e){this.fetch=e}getPlaylistDetail(e){return this.fetch.get("/api/mix/detail/",{query:e,baseUrlType:2})}};C=(0,a.__decorate)([(0,f.G)(),(0,a.__metadata)("design:paramtypes",[I.r])],C);let j=class extends s.D{constructor(e,t,i,a){super(),this.service=e,this.seoModule=t,this.itemList=i,this.playlistItemModule=a,this.defaultState={statusCode:0,mixInfo:void 0,loading:!0}}setPlaylistInfo(e,t){const{statusCode:i=0,mixInfo:a}=(0,_.m7)(t);e.statusCode=i,e.mixInfo=a}resetData(e){e.loading=!0,e.statusCode=0,e.mixInfo=void 0}setLoading(e,t){e.loading=t}resetPlaylistData(e){return e.pipe((0,p.z)((()=>(0,l.of)(this.getActions().dispose$(),this.getActions().resetData(),this.itemList.getActions().dispose$(),this.itemList.getActions().resetItemList({key:"video_playlist"})))))}getVideoPlaylistPageData(e){return e.pipe((0,u.z)((({mixId:e,language:t,abTestVersion:i,user:a,appType:s})=>this.service.getPlaylistDetail({mixId:e,language:t,scene:147}).pipe((0,g.K)((()=>(0,l.of)({statusCode:-1}))),(0,p.z)((o=>{const{statusCode:n,mixInfo:c={}}=o,p=[(0,l.of)(this.getActions().setPlaylistInfo(o),this.getActions().setLoading(!1),this.playlistItemModule.getActions().setPlaylistItem(c))],u=new d.c;if(0===n){const s=this.itemList.getPlaylistVideoList$({mixId:e,key:"video_playlist",abTestVersion:i,user:a,language:t},{onVideoList(e){u.next(e),u.complete()}});p.push(s)}else u.next([]),u.complete();return(0,r.T)(...p,this.setSEO(o,u,t,s))})),(0,h.O)(this.getActions().setLoading(!0)),(0,m.l)(this.getActions().setLoading(!1),this.terminate()),(0,y.R)(this.dispose$),(0,g.K)((e=>(console.error(e),(0,l.of)(this.noop()))))))))}setSEO(e,t,i,a){return t.pipe((0,p.z)((t=>this.seoModule.setVideoPlaylistSEOProps({mixInfo:e.mixInfo,statusCode:e.statusCode},t,{language:null!=i?i:"en"},a))))}};(0,a.__decorate)([(0,o.cQ)(),(0,a.__metadata)("design:type",c.y)],j.prototype,"dispose$",void 0),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],j.prototype,"setPlaylistInfo",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],j.prototype,"resetData",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],j.prototype,"setLoading",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[c.y]),(0,a.__metadata)("design:returntype",void 0)],j.prototype,"resetPlaylistData",null),(0,a.__decorate)([(0,o.Qm)({payloadGetter:1}),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[c.y]),(0,a.__metadata)("design:returntype",void 0)],j.prototype,"getVideoPlaylistPageData",null),j=(0,a.__decorate)([(0,n.Y)("VideoPlaylistPageModule"),(0,a.__metadata)("design:paramtypes",[C,v.q,x.h,b.y])],j)},23959:(e,t,i)=>{i.d(t,{v3:()=>f,UP:()=>w,fU:()=>C,Sh:()=>x,eh:()=>b,bn:()=>u,cW:()=>g,U$:()=>T,nj:()=>k,UE:()=>S,Ni:()=>I,k:()=>v,pn:()=>h,qf:()=>O,V3:()=>y,ne:()=>D,Xc:()=>P,o_:()=>j,AD:()=>_,TF:()=>m});var a=i(30471),s=i(80984),o=i(43340),n=i(27237),l=i(71030),d=i(31738),r=i(77613);const c={id:"checked-b672a52f",use:"checked-b672a52f-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="checked-b672a52f"><path fill="#FE2C55" fill-rule="evenodd" d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12Z" clip-rule="evenodd" /><path fill="white" d="m10.25 15.064 7.88-8.12a.5.5 0 0 1 .708-.01l.717.697a.5.5 0 0 1 .01.707l-8.597 8.859a1 1 0 0 1-1.436 0l-4.098-4.223a.5.5 0 0 1 .01-.707l.718-.697a.5.5 0 0 1 .707.011l3.381 3.483Z" /></symbol>'};function p(e){const t=(0,d.useContext)(r.e);return(0,d.useLayoutEffect)((()=>(t.add(c),()=>{t.remove("checked-b672a52f")})),[]),(0,l.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,l.jsx)("use",{xlinkHref:"#checked-b672a52f"},void 0)}),void 0)}const u=(0,a.Z)("div",{target:"e1dztoqb0"})((({theme:{isDark:e,colors:t}})=>({width:"100%",flexGrow:1,background:e?t.BGCreation3:t.BGView,padding:"20px 48px",boxSizing:"border-box","@media screen and (min-width: 1536px)":{paddingInlineStart:"calc(50vw - 240px - 480px)"}})),"label:DivPageContainer;"),g=(0,a.Z)("div",{target:"e1dztoqb1"})({display:"flex",flexDirection:"column",width:"100%",flexGrow:0,flexShrink:1,maxWidth:"960px"},"label:DivPageInnerContainer;"),h=(0,a.Z)("h1",{target:"e1dztoqb2"})((({theme:e})=>[(0,o.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"bold",typography:"P1",color:"TextPrimary"}),{fontSize:"28px",lineHeight:"38px",wordBreak:"break-word"},(0,o.FC)(2)]),"label:H1ShareTitle;"),m=(0,a.Z)(s.D,{target:"e1dztoqb3"})((({theme:e})=>[(0,o.GI)({theme:e,typography:"P2",fontFamily:"TikTokFont",fontWeight:"semiBold"}),{marginTop:"5px"}]),"label:StyledUserLink;"),y=(0,a.Z)("p",{target:"e1dztoqb4"})((({theme:e})=>[(0,o.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"normal",typography:"P3",color:"TextSecondary"}),{fontSize:"16px",lineHeight:"20px"}]),"label:PVideoCount;"),_=(0,a.Z)(n.Lp,{target:"e1dztoqb5"})({marginRight:"25px"},"label:StyledSkeletonContainer;"),v=(0,a.Z)("div",{target:"e1dztoqb6"})((({theme:{isDark:e,colors:t},needPadding:i})=>({width:"100%",height:`calc(100vh - ${i?320:290}px)`,display:"flex",flexDirection:"column",padding:"12px 22px",boxSizing:"border-box",background:e?t.BGSecondary:t.BGPrimary,borderRadius:"8px",position:"relative",paddingBottom:i?"92px":"12px"})),"label:DivVideoListContainer;"),x=(0,a.Z)("div",{target:"e1dztoqb7"})({display:"flex",flexDirection:"column",height:"100%",overflow:"auto"},"label:DivListContainer;"),b=(0,a.Z)("div",{target:"e1dztoqb8"})({display:"flex",flexDirection:"column"},"label:DivListInnerContainer;"),f=(0,a.Z)("div",{target:"e1dztoqb9"})((({theme:e})=>({height:"92px",width:"100%",boxSizing:"border-box",display:"flex",justifyContent:"flex-end",alignItems:"center",position:"absolute",bottom:0,left:0,paddingInlineEnd:"24px",":before":{display:"block",position:"absolute",left:0,top:0,content:'""',height:"0.5px",width:"100%",background:e.colors.LinePrimary}})),"label:DivBtnContainer;"),I=(0,a.Z)("div",{target:"e1dztoqb10"})((({theme:e,hasBeenAddedToOtherPlaylist:t=!1})=>({position:"relative",width:"100%",display:"flex",alignItems:"center",padding:"12px 0",paddingInlineEnd:"24px",boxSizing:"border-box",borderRadius:"8px",cursor:t?"not-allowed":"pointer",opacity:t?.34:1,":hover":{background:e.colors.BGView}})),"label:DivVideoItemContainer;"),C=(0,a.Z)("div",{target:"e1dztoqb11"})((({theme:e})=>[(0,o.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"semiBold",typography:"P2",color:"TextSecondary"}),{minWidth:"36px",justifyContent:"center",marginInlineEnd:"12px",textAlign:"center",alignItems:"center"}]),"label:DivIndex;"),j=(0,a.Z)(C,{target:"e1dztoqb12"})({margin:0},"label:StyledPostCheckboxContainer;"),P=(0,a.Z)(p,{target:"e1dztoqb13"})({width:"24px",height:"24px"},"label:StyledChecked;"),k=(0,a.Z)("div",{target:"e1dztoqb14"})((({theme:e})=>({width:"24px",height:"24px",borderRadius:"24px",border:`1.5px solid ${e.colors.LineSecondary}`,display:"inline-block",overflow:"visible"})),"label:DivUnChecked;"),w=(0,a.Z)("div",{target:"e1dztoqb15"})({position:"relative",width:"80px",height:"106px",flexShrink:0,display:"flex",justifyContent:"center",alignItems:"center",overflow:"visible",borderRadius:"2px"},"label:DivCoverContainer;"),T=(0,a.Z)("div",{target:"e1dztoqb16"})({width:"100%",height:"100%",objectFit:"cover",transition:"all 0.3s ease",borderRadius:"2px",overflow:"hidden",":hover":{transform:"scale(1.4)"}},"label:DivPreviewContainer;"),O=(0,a.Z)("img",{target:"e1dztoqb17"})({width:"80px",height:"106px",objectFit:"cover",flexShrink:0,borderRadius:"2px"},"label:ImgVideoCover;"),S=(0,a.Z)("div",{target:"e1dztoqb18"})({display:"flex",flexDirection:"column",justifyContent:"center",marginInlineStart:"20px",flexGrow:1},"label:DivVideoDescContainer;"),D=(0,a.Z)("span",{target:"e1dztoqb19"})((({theme:e})=>[(0,o.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"normal",color:"TextTertiaryAlt"}),{fontSize:"14px",lineHeight:"17px",marginTop:"6px"}]),"label:SpanVideoViews;")},49702:(e,t,i)=>{i.d(t,{c:()=>s});var a=i(59271);function s(e,t){var i;const s={sender_device:t.sender_device,is_from_webapp:null!==(i=t.is_from_webapp)&&void 0!==i?i:1};return e?(0,a.stringifyUrl)({url:e,query:s}):(0,a.stringifyUrl)({url:location.origin+location.pathname,query:Object.assign(Object.assign({},(0,a.parse)(location.search.slice(1))),s)})}},30458:(e,t,i)=>{i.d(t,{c:()=>O});var a=i(22403),s=i(98279),o=i(3312),n=i(82790),l=i(70517),d=i(90950),r=i(82941),c=i(35380),p=i(17620),u=i(80986),g=i(45809),h=i(8460),m=i(27503),y=i(28952),_=i(46682),v=i(40362),x=i(9597),b=i(66943),f=i(43549),I=i(59271),C=i(46273),j=i(32565),P=i(23324);let k=class{constructor(e){this.fetch=e}getPlayList(e){const t=(0,P.ni)("userPlayList");if(t)return(0,C.D)(t);const{uid:i}=e,s=(0,a.__rest)(e,["uid"]);return this.fetch.get("/api/user/playlist/",{query:s,baseUrlType:2})}changePlaylistOrder(e){var t;return this.fetch.post("/api/playlist/modify_order/",{baseUrlType:2,body:I.stringify({commitMixIds:null!==(t=e.commitMixIds)&&void 0!==t?t:""})})}};k=(0,a.__decorate)([(0,f.G)(),(0,a.__metadata)("design:paramtypes",[j.r])],k);var w=i(75942);const T={loading:!1,changeOrderLoading:!1,hasMore:!0,statusCode:0,playList:[],cursor:"0"};let O=class extends s.D{constructor(e,t,i){super(),this.service=e,this.itemModule=t,this.t=i,this.defaultState=T}resetData(e){var t,i;t=T,i=e,Object.keys(t).forEach((e=>i[e]=t[e]))}setLoading(e,t){e.loading=t}setChangeOrderLoading(e,t){e.changeOrderLoading=t}setPlaylist(e,t){var i;const{statusCode:a,playList:s=[],hasMore:o,cursor:n,isMerge:l=!1}=(0,b.m7)(t);e.statusCode=null!=a?a:e.statusCode,e.hasMore=null!=o?o:e.hasMore,e.cursor=null!=n?n:e.cursor,e.playList=l?[...null!==(i=e.playList)&&void 0!==i?i:[],...s]:s}doNothing(){}resetVideoPlaylistData(e){return e.pipe((0,d.z)((()=>(0,r.of)(this.getActions().dispose$(),this.getActions().resetData()))))}changePlaylistOrder(e){return e.pipe((0,c.M)(this.state$),(0,p.z)((([{playlist:e=[],endIndex:t=-1,successCallback:i},{playList:a=[]}])=>{const s=e.slice(0,t+1);return s.length?this.service.changePlaylistOrder({commitMixIds:null==s?void 0:s.join(",")}).pipe((0,u.K)((()=>(0,r.of)({statusCode:-1}))),(0,d.z)((({statusCode:e})=>{if(_.I.handleSaveChangePlaylistOrder({status:0===e?"1":"0"}),0!==e)return v.h.open({content:this.t("playlist_webapp_toast_error_tryagain"),duration:3,widthType:"half"}),(0,r.of)(this.noop());const o=[...s,...a.slice(t+1)];return null==i||i(),(0,g.T)((0,r.of)(this.getActions().setPlaylist({playList:o})))})),(0,h.O)(this.getActions().setChangeOrderLoading(!0)),(0,m.l)(this.getActions().setChangeOrderLoading(!1),this.terminate()),(0,u.K)((e=>(console.error(e),(0,r.of)(this.noop()))))):(0,r.of)(this.noop())})))}getVideoPlaylistData(e){return e.pipe((0,c.M)(this.state$),(0,p.z)((([{uid:e,secUid:t,isReset:i},{cursor:s="0"}])=>{if(!this.state.hasMore)return(0,r.of)(this.noop());const o=i?"0":s;return this.service.getPlayList({uid:e,secUid:t,cursor:o,count:20}).pipe((0,u.K)((()=>(0,r.of)({statusCode:-1,playList:[]}))),(0,d.z)((e=>{var t;const{playList:s=[]}=e,o=(0,a.__rest)(e,["playList"]),n=null!==(t=s.filter((({id:e})=>e)))&&void 0!==t?t:[],l=n.map((({id:e})=>e));return(0,g.T)((0,r.of)(this.itemModule.getActions().multiSetPlaylistItem(n),this.getActions().setPlaylist(Object.assign(Object.assign({},o),{playList:l,isMerge:!i}))))})),(0,h.O)(this.getActions().setLoading(!0)),(0,m.l)(this.getActions().setLoading(!1)),(0,u.K)((e=>(console.error(e),(0,r.of)(this.noop())))))})))}};(0,a.__decorate)([(0,o.cQ)(),(0,a.__metadata)("design:type",y.y)],O.prototype,"dispose$",void 0),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],O.prototype,"resetData",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],O.prototype,"setLoading",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],O.prototype,"setChangeOrderLoading",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],O.prototype,"setPlaylist",null),(0,a.__decorate)([(0,o.lF)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],O.prototype,"doNothing",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[y.y]),(0,a.__metadata)("design:returntype",void 0)],O.prototype,"resetVideoPlaylistData",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[y.y]),(0,a.__metadata)("design:returntype",void 0)],O.prototype,"changePlaylistOrder",null),(0,a.__decorate)([(0,o.Qm)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[y.y]),(0,a.__metadata)("design:returntype",void 0)],O.prototype,"getVideoPlaylistData",null),O=(0,a.__decorate)([(0,n.Y)("VideoPlaylistSharedModule"),(0,a.__param)(2,(0,l.t)(x.s$)),(0,a.__metadata)("design:paramtypes",[k,w.y,Function])],O)},75942:(e,t,i)=>{i.d(t,{y:()=>l});var a=i(22403),s=i(98279),o=i(3312),n=i(82790);let l=class extends s.D{constructor(){super(...arguments),this.defaultState={}}multiSetPlaylistItem(e,t){const i={};return t.forEach((t=>{var a;const{id:s=""}=t,o=null!==(a=e[s])&&void 0!==a?a:{};i[s]=Object.assign(Object.assign({},o),t)})),Object.assign(Object.assign({},e),i)}setPlaylistItem(e,t){var i;const{id:a=""}=t,s=null!==(i=e[a])&&void 0!==i?i:{};return Object.assign(Object.assign({},e),{[a]:Object.assign(Object.assign({},s),t)})}};(0,a.__decorate)([(0,o.j)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Array]),(0,a.__metadata)("design:returntype",void 0)],l.prototype,"multiSetPlaylistItem",null),(0,a.__decorate)([(0,o.j)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],l.prototype,"setPlaylistItem",null),l=(0,a.__decorate)([(0,n.Y)("PlaylistItemModule")],l)},10347:(e,t,i)=>{i.d(t,{n:()=>a});const a=Object.freeze({statusCode:0,loading:!0,list:[],browserList:[],hasMore:!0,cursor:"0",preloadList:[]})},46682:(e,t,i)=>{i.d(t,{I:()=>o});var a,s=i(3979);!function(e){e.CreatePlaylist="create_playlist",e.ClickAddPlaylistVideo="click_add_playlist_video",e.AddPlaylistVideo="add_playlist_video",e.PostCreatingPlaylist="post_creating_playlist",e.ClickChangePlaylistOrder="click_change_playlist_order",e.SaveChangePlaylistOrder="save_change_playlist_order",e.CompleteEditingPlaylist="complete_editing_playlist",e.ClickPlaylistEntrance="click_playlist_entrance",e.ClickRenamePlaylist="click_rename_playlist",e.ClickDeletePlaylist="click_delete_playlist",e.DeletePlaylist="delete_playlist",e.ClickRemovePlaylistVideo="click_remove_playlist_video",e.RemovePlaylistVideo="remove_playlist_video"}(a||(a={}));const o={handleCreatePlaylist:()=>{s.W.event("create_playlist")},handleClickAddPlaylistVideo:e=>{s.W.event("click_add_playlist_video",e)},handleAddPlaylistVideo:e=>{s.W.event("add_playlist_video",e)},handlePostCreatingPlaylist:e=>{s.W.event("post_creating_playlist",e)},handleClickChangePlaylistOrder:()=>{s.W.event("click_change_playlist_order")},handleSaveChangePlaylistOrder:e=>{s.W.event("save_change_playlist_order",e)},handleCompleteEditingPlaylist:e=>{s.W.event("complete_editing_playlist",e)},handleClickPlaylistEntrance:e=>{s.W.event("click_playlist_entrance",e)},handleClickRenamePlaylist:e=>{s.W.event("click_rename_playlist",e)},handleClickDeletePlaylist:e=>{s.W.event("click_delete_playlist",e)},handleDeletePlaylist:e=>{s.W.event("delete_playlist",e)},handleClickRemovePlaylistVideo:e=>{s.W.event("click_remove_playlist_video",e)},handleRemovePlaylistVideo:e=>{s.W.event("remove_playlist_video",e)}}}}]);