document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("form-wdyt"),t=e.querySelectorAll(".input-rating"),n=document.getElementById("toast-error"),d=(document.getElementById("toast-success"),e.dataset.id),c=e.dataset.url,a=e.dataset.type;fetch("/page/api/wdyt/data",{headers:{"Content-Type":"application/json",Accept:"application/json, text-plain, */*","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},method:"post",body:JSON.stringify({page_id:d,url:c,type:a})}).then((function(e){return e.json()})).then((function(e){"success"==e.status&&(document.getElementById("meh").checked=!1,document.getElementById("smile").checked=!1,document.getElementById("happy").checked=!1,document.getElementById("value-meh").innerHTML=e.data.opinions[0],document.getElementById("value-smile").innerHTML=e.data.opinions[1],document.getElementById("value-happy").innerHTML=e.data.opinions[2],0==e.data.value?document.getElementById("meh").checked=!0:1==e.data.value?document.getElementById("smile").checked=!0:2==e.data.value&&(document.getElementById("happy").checked=!0))})).catch((function(e){console.log(e)})),t.forEach((function(e){e.addEventListener("click",(function(t){var o=e.value;fetch("/page/api/wdyt",{headers:{"Content-Type":"application/json",Accept:"application/json, text-plain, */*","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},method:"post",body:JSON.stringify({page_id:d,url:c,type:a,value:o})}).then((function(e){return e.json()})).then((function(e){document.getElementById("meh").checked=!1,document.getElementById("smile").checked=!1,document.getElementById("happy").checked=!1,"success"==e.status?(document.getElementById("value-meh").innerHTML=e.data.opinions[0],document.getElementById("value-smile").innerHTML=e.data.opinions[1],document.getElementById("value-happy").innerHTML=e.data.opinions[2],0==e.data.value?document.getElementById("meh").checked=!0:1==e.data.value?document.getElementById("smile").checked=!0:2==e.data.value&&(document.getElementById("happy").checked=!0)):(n.querySelector(".message").innerHTML=e.message,n.style.display="block",setTimeout((function(){n.style.display="none"}),3e3))})).catch((function(e){console.log(e)}))}))}))}));