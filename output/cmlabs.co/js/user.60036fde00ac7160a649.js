"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[378],{66764:(e,t,i)=>{i.d(t,{C:()=>l,I:()=>a});var o=i(71030),n=i(31738),r=i(46390);const a=(0,n.memo)((function({mode:e}){return(0,o.jsx)(r.Lp,Object.assign({mode:e},{children:new Array(24).fill(1).map(((e,t)=>e+t)).map((t=>(0,o.jsx)(r.l3,{mode:e},t)))}),void 0)})),l=(0,n.memo)((function({row:e=4,gap:t="18px",radius:i="8px",cardWidth:n="226px",cardHeight:a="302px"}){return(0,o.jsx)(r.Np,{children:new Array(e).fill(1).map(((e,t)=>e+t)).map((e=>{return l=e,(0,o.jsx)(r.t4,{children:new Array(3).fill(1).map(((e,t)=>e+t)).map((e=>(0,o.jsx)(r.vr,{cardWidth:n,cardHeight:a,gap:t,radius:i},e)))},l);var l}))},void 0)}))},46390:(e,t,i)=>{i.d(t,{Lp:()=>s,Np:()=>c,l3:()=>d,t4:()=>u,vr:()=>p});var o=i(61216),n=i(30471),r=i(43340),a=i(96703);const l=(0,o.F4)({"0%":{backgroundPositionX:"200%"},"100%":{backgroundPositionX:"-150%"}}),s=a.YK,d=(0,n.Z)("div",{target:"e15jf4tc0"})((({theme:e,mode:t})=>[{borderRadius:"explore"===t?"8px":"4px",position:"relative",width:"100%",paddingTop:276/208*100+"%",backgroundColor:e.colors.BGPlaceholderDefault,backgroundImage:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .04) 50%, rgba(22, 24, 35, 0) 100%)",backgroundSize:"200% 100%",backgroundRepeat:"no-repeat",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`}]),"label:DivSkeletonCard;"),c=(0,n.Z)("div",{target:"e15jf4tc1"})({display:"flex",flexDirection:"column",paddingTop:"20px"},"label:DivSkeletonContainerV1;"),u=(0,n.Z)("div",{target:"e15jf4tc2"})({display:"flex"},"label:DivSkeletonRowContainer;"),p=(0,n.Z)("div",{target:"e15jf4tc3"})((({theme:e,cardWidth:t,cardHeight:i,gap:o,radius:n})=>[(0,r.YJ)({direction:e.direction,marginEnd:o}),{width:t,height:i,borderRadius:n,marginBottom:o,display:"block",float:"left",overflow:"hidden",flex:"0 0 auto",backgroundColor:e.colors.BGPlaceholderDefault,backgroundImage:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .04) 50%, rgba(22, 24, 35, 0) 100%)",backgroundSize:"200% 100%",backgroundRepeat:"no-repeat",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`}]),"label:DivSkeletonCardV1;")},61809:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Al});var o=i(71030),n=i(99333),r=i(25879),a=i(55453),l=i(51548),s=i(15220),d=i(88573),c=i(30036),u=i(22403),p=i(31738),h=i(32565),g=i(29054);const m=(0,g.cn)({isLive:!1,isError:!1,isBlock:!1}),v=(0,g.cn)({isFatal:!1,isEnd:!1,roomInfo:null}),f=(0,g.cn)((e=>e(v)),((e,t,i)=>(0,u.__awaiter)(void 0,void 0,void 0,(function*(){try{const o=yield(e=i,h.h.get("/webcast/room/preload_room/",{query:e,baseUrlType:4}));if(!(null==o?void 0:o.data))throw Error("no data");t(v,{roomInfo:o.data,isFatal:!0,isEnd:!0})}catch(e){t(v,{roomInfo:null,isFatal:!0,isEnd:!0})}var e}))));var b=i(65575);const x=(e,t)=>{const[i,o]=(0,b.KO)(m);(0,p.useEffect)((()=>{let n=null;function r(){n&&(clearTimeout(n),n=null)}return e&&"0"!==e?(function a(){var l;return(0,u.__awaiter)(this,void 0,void 0,(function*(){if(i.isError)return void r();const s=yield(d={room_ids:e,enter_from:t},h.h.get("/webcast/room/check_alive/",{query:d,baseUrlType:4}));var d;const c=null===(l=s.data)||void 0===l?void 0:l.find((t=>t.alive&&t.room_id_str===e));o(Object.assign(Object.assign({},i),{isLive:!!c})),r(),n=setTimeout((()=>{a()}),1e4)}))}(),o(Object.assign(Object.assign({},i),{isLive:!0}))):o(Object.assign(Object.assign({},i),{isLive:!1})),()=>{r()}}),[i.isError,e])};var _=i(98999),y=i(72975),j=i(40362),k=i(51366),w=i.n(k),C=i(5909),I=i(83167),S=i(51618),T=i(46044),P=i(71928),O=i(66943),M=i(47294),D=i(15137),L=i(45179),F=i(46682),U=i(30524),B=i(97329),Z=i(45401),E=i(23959),R=i(18483),z=i(71607),W=i(10151),q=i(41380),A=i(37071),N=i(55496),H=i(44370),G=i(63013);const V=(0,q.r)("create_video_playlist")((0,p.memo)((()=>{const[{list:e},t]=(0,n.b)(M.h,{selector:e=>{var t;return null!==(t=e.create_video_playlist)&&void 0!==t?t:{}},dependencies:[]}),{showBrowserMode:i}=(0,p.useContext)(A._),r=(0,p.useCallback)((e=>()=>{i({index:e,itemListKey:"create_video_playlist",playProgress:0,reportTeaParams:{}})}),[i]),a=(0,p.useCallback)((({id:e,index:t})=>(0,o.jsx)(H.mo,{target:"_blank",rel:"opener",needPostDragIcon:!0,id:e,index:t,onClickVideoItem:r(t)},e)),[r]),l=(0,p.useCallback)((i=>{if(!i.destination)return;const o=(0,N.H)(e,i.source.index,i.destination.index);t.setItemListById({key:"create_video_playlist",list:o})}),[t,e]);return(0,o.jsx)(G.k,{children:(0,o.jsx)(N.X,{onDragEnd:l,renderItem:a,list:e},void 0)},void 0)})));var $=i(98279),Y=i(3312),X=i(82790),K=i(70517),Q=i(90950),J=i(82941),ee=i(35380),te=i(4389),ie=i(80986),oe=i(8460),ne=i(27503),re=i(28952),ae=i(9597),le=i(30458),se=i(75942),de=i(43549),ce=i(59271),ue=i(40589);let pe=class{constructor(e){this.fetch=e}createPlaylistWithItems(e){var t;return this.fetch.post("/api/playlist/create_with_items/",{baseUrlType:2,headers:{[ue.eD]:this.fetch.csrfToken},body:ce.stringify({name:e.name,itemIds:null!==(t=e.itemIds)&&void 0!==t?t:""})})}};pe=(0,u.__decorate)([(0,de.G)(),(0,u.__metadata)("design:paramtypes",[h.r])],pe);let he=class extends $.D{constructor(e,t,i,o,n,r){super(),this.service=e,this.videoPlaylistModule=t,this.playlistItemModule=i,this.itemList=o,this.userPage=n,this.t=r,this.defaultState={loading:!1,statusCode:0}}setLoading(e,t){e.loading=t}setStatusCode(e,t){e.statusCode=t}resetCreatePlaylistState(e){return e.pipe((0,Q.z)((()=>(0,J.of)(this.getActions().dispose$(),this.getActions().setLoading(!1),this.getActions().setStatusCode(0)))))}createPlaylistWithItems(e){return e.pipe((0,ee.M)(this.videoPlaylistModule.state$),(0,te.w)((([{name:e,cover:t,itemIds:i=[],creator:o},n])=>{const r={name:e,cover:t,itemIds:null==i?void 0:i.join(",")};return this.service.createPlaylistWithItems(r).pipe((0,ie.K)((()=>(0,J.of)({statusCode:-1,playlistId:"",statusMsg:""}))),(0,Q.z)((({statusCode:r,playlistId:a="",statusMsg:l=""})=>{const s=0===r?"1":"0",d=i.length;if(F.I.handlePostCreatingPlaylist({status:s,fail_reason:l,video_cnt:d,playlist_id:a}),F.I.handleAddPlaylistVideo({enter_method:"create_playlist",video_cnt:d,playlist_id:a,video_list:i.join(","),status:s}),206001===r)return j.h.open({content:this.t("playlist_webapp_toast_error_cheatPlaylist"),duration:3,widthType:"half"}),(0,J.of)(this.noop());if(0!==r&&206002!==r)return j.h.open({content:this.t("playlist_webapp_toast_error_tryagain"),duration:3,widthType:"half"}),(0,J.of)(this.noop());const{playList:c=[]}=n,u={id:a,name:e,mixId:a,mixName:e,cover:t,videoCount:d,creator:o};return j.h.open({content:this.t("playlist_webapp_toast_created"),type:"success",duration:3,widthType:"half"}),(0,J.of)(this.getActions().setStatusCode(r),this.videoPlaylistModule.getActions().setPlaylist(Object.assign(Object.assign({},n),{playList:[a,...c]})),this.playlistItemModule.getActions().setPlaylistItem(u),this.itemList.getActions().setItemListById({key:a,list:i}),this.itemList.getActions().resetItemList({key:"create_video_playlist"}),this.itemList.getActions().resetItemList({key:"user-post-public",loading:!1}),this.userPage.getActions().setProfileState("initial"))})),(0,oe.O)(this.getActions().setLoading(!0)),(0,ne.l)(this.getActions().setLoading(!1)))})))}};(0,u.__decorate)([(0,Y.cQ)(),(0,u.__metadata)("design:type",re.y)],he.prototype,"dispose$",void 0),(0,u.__decorate)([(0,Y.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],he.prototype,"setLoading",null),(0,u.__decorate)([(0,Y.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Number]),(0,u.__metadata)("design:returntype",void 0)],he.prototype,"setStatusCode",null),(0,u.__decorate)([(0,Y.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[re.y]),(0,u.__metadata)("design:returntype",void 0)],he.prototype,"resetCreatePlaylistState",null),(0,u.__decorate)([(0,Y.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[re.y]),(0,u.__metadata)("design:returntype",void 0)],he.prototype,"createPlaylistWithItems",null),he=(0,u.__decorate)([(0,X.Y)("CreatePlaylistModule"),(0,u.__param)(5,(0,K.t)(ae.s$)),(0,u.__metadata)("design:paramtypes",[pe,le.c,se.y,M.h,B.t,Function])],he);const ge=(0,p.memo)((()=>{var e;const t=(0,c.Q)(),{isDark:i}=(0,P.u)(),[{secUid:a=""},l]=(0,n.b)(B.t),[{loading:s},u]=(0,n.b)(he,{selector:e=>({loading:e.loading}),dependencies:[]}),{loading:h=!1,hasMore:g=!0}=(0,O.m7)((0,r.m)(M.h,{selector:e=>e["user-post-public"],dependencies:[]})),{user:m,abTestVersion:v,language:f}=(0,O.m7)((0,D.Lh)((()=>["user","abTestVersion","language"]),[])),{uid:b}=(0,O.m7)(m),[{list:x=[]},_]=(0,n.b)(M.h,{selector:e=>{var t;return null!==(t=e.create_video_playlist)&&void 0!==t?t:{}},dependencies:[]}),y=null!==(e=x[0])&&void 0!==e?e:"",{video:j,author:k=""}=(0,O.m7)((0,r.m)(L.A,{selector:e=>e[y],dependencies:[y]})),w=(0,O.m7)((0,r.m)(d.z,{selector:e=>e.users[k],dependencies:[k]})),{cover:C}=(0,O.m7)(j),{playlistName:I,checkSuccess:S}=(0,r.m)(R.T,{selector:e=>({playlistName:e.playlistName,checkSuccess:e.isValid&&e.hasChecked}),dependencies:[]}),T=0===x.length,q=I.length>0&&I.length<=z.D&&S&&!T,[A,N]=(0,p.useState)(!1),H=(0,p.useCallback)((()=>{N(!0),F.I.handleClickAddPlaylistVideo({enter_method:"create_playlist"})}),[]),$=(0,p.useCallback)((()=>{l.setProfileState("initial")}),[l]);(0,p.useEffect)((()=>()=>_.resetItemList({key:"create_video_playlist"})),[]);const Y=(0,p.useCallback)((()=>{!h&&g&&_.getUserVideoListByType({secUid:a,key:"user-post-public",userId:b,abTestVersion:v,language:f,user:m})}),[v,g,_,f,h,a,b,m]),X=(0,p.useCallback)((()=>{s||u.createPlaylistWithItems({name:I,itemIds:x,cover:C,creator:w})}),[C,s,u,w,I,x]);return(0,o.jsxs)(E.bn,{children:[(0,o.jsxs)(E.cW,{children:[(0,o.jsxs)(G.GI,Object.assign({onClick:$},{children:[(0,o.jsx)(G.vw,{},void 0),t("playlist_webapp_creation_backBtn")]}),void 0),(0,o.jsxs)(G.EN,{children:[(0,o.jsx)(G.WX,{children:t("playlist_webapp_creation_header_create")},void 0),(0,o.jsx)(G.l2,{children:t("playlist_webapp_creation_desc")},void 0),(0,o.jsxs)(G.nI,{children:[(0,o.jsx)(G.$M,{children:t("playlist_webapp_upload_dropdown_nameaplaylist")},void 0),(0,o.jsxs)(G.XL,{children:[(0,o.jsx)(G.ez,Object.assign({isRed:I.length>z.D},{children:`${I.length}`}),void 0),"Â ",(0,o.jsx)(G.ez,{children:` / ${z.D}`},void 0)]},void 0)]},void 0),(0,o.jsx)(z.v,{},void 0),(0,o.jsxs)(G.nI,{children:[(0,o.jsxs)(G.$M,{children:[t("videos")," ",x.length>0?`(${x.length})`:""]},void 0),!T&&(0,o.jsxs)(G.T9,Object.assign({onClick:H},{children:[(0,o.jsx)(G.ou,{},void 0),t("playlist_webapp_upload_addtoplaylist")]}),void 0)]},void 0),T&&(0,o.jsxs)(G.PN,Object.assign({onClick:H},{children:[i?(0,o.jsx)(G.y2,{},void 0):(0,o.jsx)(G.s_,{},void 0),(0,o.jsx)(G.tI,{children:t("playlist_webapp_creation_selectvid_desc")},void 0)]}),void 0),!T&&(0,o.jsx)(V,{},void 0),(0,o.jsxs)(E.v3,{children:[(0,o.jsx)(U.W,Object.assign({style:Z.jn,onClick:$},{children:t("playlist_webapp_creation_btn_cancel")}),void 0),(0,o.jsx)(U.W,Object.assign({style:Z.jn,disabled:!q,loading:s,buttonTheme:"primary",loadingFill:i?"#fff":void 0,onClick:X},{children:t("playlist_webapp_creation_btn_create")}),void 0)]},void 0)]},void 0)]},void 0),(0,o.jsx)(W.j,{itemListKey:"user-post-public",drawerActive:A,setDrawerActive:N,onHitBottom:Y,selectedVideoListKey:"create_video_playlist"},void 0)]},void 0)}));var me=i(56232);let ve=class{constructor(e){this.fetch=e}updateUserProfile(e){return this.fetch.post("/api/update/profile/",{body:(0,ce.stringify)(Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken})),baseUrlType:2,headers:{[ue.eD]:this.fetch.csrfToken}})}removeBlueV(e){return this.fetch.post("/tiktok/v1/username/save_async/",{body:(0,ce.stringify)({username:e,process_type:1}),baseUrlType:2,headers:{[ue.eD]:this.fetch.csrfToken}})}checkUniqueId(e){return this.fetch.get("/api/uniqueid/check/",{query:{unique_id:e},baseUrlType:2,headers:{[ue.eD]:this.fetch.csrfToken}})}uploadImage(e){const t=new FormData;return t.append("file",e),t.append("source","0"),this.fetch.post("/api/upload/image/",{body:t,baseUrlType:2,headers:{[ue.eD]:this.fetch.csrfToken},omitContentType:!0})}updateUniqueId(e){return this.fetch.post("/passport/web/login_name/update/",{body:(0,ce.stringify)({login_name:e}),baseUrlType:2,headers:{[ue.eD]:this.fetch.csrfToken}})}};ve=(0,u.__decorate)([(0,de.G)(),(0,u.__metadata)("design:paramtypes",[h.r])],ve);const fe=-1;var be,xe,_e,ye;!function(e){e[e.InitialState=0]="InitialState",e[e.Valid=1]="Valid",e[e.Invalid=2]="Invalid"}(be||(be={})),function(e){e[e.IllegalLetter=1027]="IllegalLetter",e[e.SensitiveWord=1028]="SensitiveWord",e[e.Used=1024]="Used",e[e.OnceIn30day=1330]="OnceIn30day",e[e.ServerUpgrading=1331]="ServerUpgrading",e[e.ProfileUnderCertification=1332]="ProfileUnderCertification",e[e.ProfileUnderReview=1333]="ProfileUnderReview"}(xe||(xe={})),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.ErrServiceInternal=4]="ErrServiceInternal",e[e.ErrInvalidParam=5]="ErrInvalidParam",e[e.ErrPermissionDenied=7]="ErrPermissionDenied",e[e.ErrHitSharkSlideVerifyCode=3058]="ErrHitSharkSlideVerifyCode",e[e.ErrHitSharkClickVerifyCode=3059]="ErrHitSharkClickVerifyCode",e[e.UserUpdateProfileFailed=2060]="UserUpdateProfileFailed",e[e.UserSignatureTooLong=2080]="UserSignatureTooLong",e[e.UserNicknameTooLong=2079]="UserNicknameTooLong",e[e.ErrNicknameUpdateIllegal=2550]="ErrNicknameUpdateIllegal",e[e.ErrCheckMtUpdateUser=2160]="ErrCheckMtUpdateUser",e[e.MtUpdateProfileIsBan=23]="MtUpdateProfileIsBan",e[e.AccountIsBanned=9]="AccountIsBanned",e[e.UpdateNickNameFailedDueToFrequencyControl=3002265]="UpdateNickNameFailedDueToFrequencyControl",e[e.ECommerceNickNameUpdateFailed=3002328]="ECommerceNickNameUpdateFailed"}(_e||(_e={})),function(e){e[e.NotAvailable=4]="NotAvailable",e[e.InvalidParameters=5]="InvalidParameters",e[e.SUCCESS=0]="SUCCESS",e[e.OtherError=6]="OtherError"}(ye||(ye={}));let je=class extends $.D{constructor(e,t){super(),this.service=e,this.accountService=t,this.defaultState={uploadImgCode:fe,uniqueIdValid:0,checkLoading:!1,nickNameValid:0,saveCode:fe,avatarInfo:{url:"",uri:""},newUniqueInfo:{uniqueId:""},checkUniqueIdCode:fe,uploadingFile:!1,updatingProfile:!1}}setUploadImgCode(e,t){e.uploadImgCode=t}SetSaveCode(e,t){e.saveCode=t}SetCheckUniqueIdCode(e,t){e.checkUniqueIdCode=t}setUniqueIdValid(e,t){e.uniqueIdValid=t}setCheckLoading(e,t){e.checkLoading=t}setAvatarInfo(e,t){e.avatarInfo=t}setNewUniqueId(e,t){e.newUniqueInfo=t}setNickNameValid(e,t){e.nickNameValid=t}setUploadingFile(e,t){e.uploadingFile=t}setUpdatingProfile(e,t){e.updatingProfile=t}updateUserProfile(e){return e.pipe((0,te.w)((e=>{const{uniqueId:t,needUpdateUniqueId:i,needRemoveBlueV:o}=e,n=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]])}return i}(e,["uniqueId","needUpdateUniqueId","needRemoveBlueV"]);return i?this.accountService.updateUniqueId(t).pipe((0,ie.K)((()=>(0,J.of)({data:{error_code:1331}}))),(0,Q.z)((e=>{const{error_code:i}=e,r=[],a=void 0===i,l=1027===i||1028===i||1024===i;return r.push(this.getActions().setUniqueIdValid(l?2:1)),a&&o?this.service.removeBlueV(t).pipe((0,Q.z)((()=>this.handleUpdateProfile(n,t))),(0,ie.K)((()=>this.handleUpdateProfile(n,t)))):a?this.handleUpdateProfile(n,t):(0,J.of)(this.getActions().SetSaveCode(i),this.getActions().setUpdatingProfile(!1),...r)})),(0,oe.O)(this.getActions().setUpdatingProfile(!0))):o?this.service.removeBlueV(t).pipe((0,Q.z)((()=>this.handleUpdateProfile(n,t))),(0,ie.K)((()=>this.handleUpdateProfile(n,t)))):this.handleUpdateProfile(n,t)})))}handleUpdateProfile(e,t){return Object.values(e).some((e=>void 0!==e))?this.service.updateUserProfile(e).pipe((0,ie.K)((()=>(0,J.of)({status_code:1331,user:{unique_id:"",secUid:""}}))),(0,Q.z)((({status_code:e,user:t})=>{const i=[];return 2550===e?i.push(this.getActions().setNickNameValid(2550===e?2:1)):(0===e&&i.push(this.getActions().setNewUniqueId({uniqueId:t.unique_id})),i.push(this.getActions().SetSaveCode(e))),(0,J.of)(...i)})),(0,oe.O)(this.getActions().setUpdatingProfile(!0)),(0,ne.l)(this.getActions().setUpdatingProfile(!1))):(0,J.of)(this.getActions().setNewUniqueId({uniqueId:t}),this.getActions().SetSaveCode(0),this.getActions().setUpdatingProfile(!1))}checkUniqueId(e){return e.pipe((0,te.w)((e=>this.service.checkUniqueId(e).pipe((0,ie.K)((()=>(0,J.of)({status_code:6,is_valid:!1}))),(0,Q.z)((({status_code:e,is_valid:t})=>{const i=[];return t&&4!==e?t&&0===e&&i.push(this.getActions().setUniqueIdValid(1)):i.push(this.getActions().setUniqueIdValid(2)),i.push(this.getActions().SetCheckUniqueIdCode(e)),(0,J.of)(...i)})),(0,oe.O)(this.getActions().setCheckLoading(!0)),(0,ne.l)(this.getActions().setCheckLoading(!1))))))}uploadImage(e){return e.pipe((0,te.w)((e=>this.service.uploadImage(e).pipe((0,Q.z)((({status_code:e,data:t})=>{const i={url:"",uri:""};return t&&(i.uri=t.uri,i.url=t.url_list[0]),(0,J.of)(this.getActions().setAvatarInfo(i),this.getActions().setUploadImgCode(e))})),(0,oe.O)(this.getActions().setUploadingFile(!0)),(0,ne.l)(this.getActions().setUploadingFile(!1))))))}};(0,u.__decorate)([(0,Y.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Number]),(0,u.__metadata)("design:returntype",void 0)],je.prototype,"setUploadImgCode",null),(0,u.__decorate)([(0,Y.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Number]),(0,u.__metadata)("design:returntype",void 0)],je.prototype,"SetSaveCode",null),(0,u.__decorate)([(0,Y.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Number]),(0,u.__metadata)("design:returntype",void 0)],je.prototype,"SetCheckUniqueIdCode",null),(0,u.__decorate)([(0,Y.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Number]),(0,u.__metadata)("design:returntype",void 0)],je.prototype,"setUniqueIdValid",null),(0,u.__decorate)([(0,Y.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],je.prototype,"setCheckLoading",null),(0,u.__decorate)([(0,Y.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],je.prototype,"setAvatarInfo",null),(0,u.__decorate)([(0,Y.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Object]),(0,u.__metadata)("design:returntype",void 0)],je.prototype,"setNewUniqueId",null),(0,u.__decorate)([(0,Y.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Number]),(0,u.__metadata)("design:returntype",void 0)],je.prototype,"setNickNameValid",null),(0,u.__decorate)([(0,Y.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],je.prototype,"setUploadingFile",null),(0,u.__decorate)([(0,Y.lF)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object,Boolean]),(0,u.__metadata)("design:returntype",void 0)],je.prototype,"setUpdatingProfile",null),(0,u.__decorate)([(0,Y.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[re.y]),(0,u.__metadata)("design:returntype",void 0)],je.prototype,"updateUserProfile",null),(0,u.__decorate)([(0,Y.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[re.y]),(0,u.__metadata)("design:returntype",void 0)],je.prototype,"checkUniqueId",null),(0,u.__decorate)([(0,Y.Qm)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[re.y]),(0,u.__metadata)("design:returntype",void 0)],je.prototype,"uploadImage",null),je=(0,u.__decorate)([(0,X.Y)("EditProfileModule"),(0,u.__metadata)("design:paramtypes",[ve,me.Q])],je);var ke=i(61216),we=i(30471),Ce=i(41830),Ie=i(43340);const Se=(0,we.Z)("div",{target:"e1xjit530"})({width:"400px",padding:"32px",boxSizing:"border-box"},"label:DivContainer;"),Te=(0,we.Z)("p",{target:"e1xjit531"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontWeight:"semiBold",fontFamily:"TikTokFont",color:"TextPrimary"}),{fontSize:"24px",lineHeight:"36px",textAlign:"center",marginBottom:"16px"}]),"label:PTitle;"),Pe=(0,we.Z)("p",{target:"e1xjit532"})((({theme:{colors:e}})=>({color:e.TextSecondary,fontSize:"16px",lineHeight:"22px",textAlign:"center",marginBottom:"24px"})),"label:PInfo;"),Oe=(0,we.Z)("ul",{target:"e1xjit533"})({paddingInlineStart:"12px"},"label:UlInfo;"),Me=(0,we.Z)("li",{target:"e1xjit534"})((({theme:{colors:e}})=>({color:e.TextSecondary,fontSize:"15px",lineHeight:"18px",marginBottom:"11px",":last-child":{marginBottom:"24px"}})),"label:LiInfo;"),De=(0,we.Z)("div",{target:"e1xjit535"})({display:"flex",justifyContent:"space-between"},"label:DivBtnContainer;"),Le=(0,we.Z)(U.W,{target:"e1xjit536"})({minWidth:"164px",height:"48px",fontSize:"16px"},"label:StyledBtn;"),Fe=(0,we.Z)(U.W,{target:"e1xjit537"})({minWidth:"336px",width:"336px",":not(:last-child)":{marginBottom:"12px"}},"label:StyledLargeBtn;"),Ue=(0,we.Z)("div",{target:"e1xjit538"})((({theme:{colors:e}})=>({width:"336px",color:e.TextPrimary,fontSize:"16px",lineHeight:"24px",height:"48px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"})),"label:DivTextBtn;"),Be=(0,ke.F4)({from:{transform:"rotateZ(0)"},to:{transform:"rotateZ(360deg)"}}),Ze=(0,we.Z)(Ce.Z,{target:"e1xjit539"})({animation:`${Be} 1s infinite`},"label:StyledProgressCircle;"),Ee="48",Re=[{info:"blue_v_change_username_review_modal_desc",replaceUserNameTag:"%s"},{info:"blue_v_change_name_review_modal_desc",replaceNameTag:"%s"},{info:"blue_v_webapp_change_name_review_modal_desc",replaceUserNameTag:"%1s",replaceNameTag:"%2s"}],ze=(0,p.memo)((({onCancel:e,onConfirm:t,changeType:i,username:n,name:a})=>{const l=(0,c.Q)(),{updatingProfile:s}=(0,r.m)(je),d=(0,p.useCallback)((()=>{e()}),[e]),u=(0,p.useCallback)((()=>{!s&&t(!1)}),[t,s]),h=Re[i];let g=l(h.info);h.replaceUserNameTag&&(g=g.replace(h.replaceUserNameTag,n).replace("%d",Ee)),h.replaceNameTag&&(g=g.replace(h.replaceNameTag,a).replace("%d",Ee));const{colors:m}=(0,P.u)();return(0,o.jsxs)(Se,{children:[(0,o.jsx)(Te,{children:l("blue_v_change_name_review_modal_title")},void 0),(0,o.jsx)(Pe,{children:g},void 0),(0,o.jsxs)(De,{children:[(0,o.jsx)(Le,Object.assign({disabled:s,onClick:d},{children:l("blue_v_change_name_review_cancel_btn")}),void 0),(0,o.jsx)(Le,Object.assign({buttonTheme:"primary",onClick:u},{children:s?(0,o.jsx)(Ze,{fill:m.ConstTextInverse,width:20,height:20},void 0):l("blue_v_change_name_review_submit_btn")}),void 0)]},void 0)]},void 0)}));var We=i(16871),qe=i(77613);const Ae={id:"bookmark-96718fcd",use:"bookmark-96718fcd-usage",viewBox:"0 0 72 72",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72 72" id="bookmark-96718fcd"><path fill="currentColor" d="m36.206 48.785 24.891 18.36V7.676c0-1.317-.406-2.162-.884-2.658-.463-.482-1.25-.903-2.563-.903H14.76c-1.312 0-2.1.421-2.563.903-.478.496-.884 1.34-.884 2.657v59.472l24.892-18.36Zm0 3.835L11.944 70.516a2.331 2.331 0 0 1-3.715-1.877V7.674c0-3.934 2.481-6.646 6.533-6.646H57.65c4.051 0 6.533 2.712 6.533 6.646V68.64a2.331 2.331 0 0 1-3.716 1.877L36.206 52.62Z" /></symbol>'};var Ne=i(23297);const He=(0,o.jsx)(We.Z,Object.assign({},T.vj),void 0),Ge=(0,o.jsx)((function(e){const t=(0,p.useContext)(qe.e);return(0,p.useLayoutEffect)((()=>(t.add(Ae),()=>{t.remove("bookmark-96718fcd")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#bookmark-96718fcd"},void 0)}),void 0)}),Object.assign({},T.tC),void 0),Ve=(0,p.memo)((function({detailInfo:{statusCode:e}}){const t=(0,n.q)(B.t),i=(0,Ne.bT)(),r=(0,p.useCallback)((()=>{t.setUniqueId(void 0),t.getUserInfo(Object.assign({},i))}),[t,i]);return(0,o.jsx)(T.hl,{statusCode:e,iconElement:He,onRefresh:r},void 0)})),$e=(0,p.memo)((function({listInfo:{statusCode:e},detailInfo:t,listKey:i}){const r=(0,n.q)(M.h),a=(0,Ne.xB)({user:t.user,listKey:i}),l=(0,p.useCallback)((()=>{r.resetItemList({key:i})}),[r,i,a]);return(0,o.jsx)(T.hl,{statusCode:e,iconElement:He,onRefresh:l},void 0)})),Ye=(0,p.memo)((function({listKey:e,detailInfo:t}){const{uniqueId:i,secUid:n}=(0,O.m7)(t.user),r=(0,c.Q)(),{colors:a}=(0,P.u)(),l=(0,Ne.JW)({uniqueId:i,secUid:n}),s=(0,p.useMemo)((()=>"favorites"===e?(0,o.jsx)("div",Object.assign({style:{color:a.Primary2}},{children:Ge}),void 0):He),[e,a]),d=(0,p.useMemo)((()=>"user-post"===e?l?{title:r("profile_personal_no_content_title"),desc:r("profile_personal_no_content_body")}:{title:r("profile_no_content_title"),desc:r("profile_no_content_des")}:"favorites"===e?{title:r("fc_view_empty_videos_title"),desc:r("fc_view_fav_empty_videos_desc")}:"user-liked"===e?l?{title:r("profile_public_nolikes_title"),desc:r("profile_self_public_nolikes")}:{title:r("profile_public_nolikes_title"),desc:r("profile_others_public_nolikes").replace("%s",i)}:{title:"",desc:""}),[l,e,r,i]);return(0,o.jsx)(T.Te,{iconElement:s,emptyTip:d},void 0)}));var Xe=i(69988),Ke=i(16883),Qe=i(30329),Je=i(82509),et=i(52869),tt=i(85762),it=i(41115),ot=i(65325),nt=i(49702),rt=i(25129),at=i(86877),lt=i(46055),st=i(27237),dt=i(99084),ct=i(52338),ut=i(67351),pt=i(44812),ht=i(35991),gt=i(81197),mt=i(3979);const vt=(0,p.memo)((e=>{const{isFTC:t,user:i,e2eTag:n}=e,{uniqueId:r,secUid:a,avatarThumb:l}=i,[s]=(0,b.KO)(m),{livePreviewSonAb:d}=(0,ct.ry)(),c=s.isLive&&"v2"!==d&&"v3"!==d,u=(0,ut.CN)({user:i,enterMethod:"others_photo"}),h=(0,p.useMemo)((()=>({enter_from_merge:u.enter_from_merge,enter_method:u.enter_method})),[u]),{livePreviewAb:g}=(0,ct.iA)(),v="v2"!==g&&"v3"!==g||s.isError;(0,p.useEffect)((()=>{c&&gt.en.handleLiveShow({enter_from_merge:u.enter_from_merge,enter_method:u.enter_method,follow_status:u.follow_status,anchor_id:u.anchor_id,room_id:u.room_id,action_type:u.action_type,previous_page:mt.W.commonParams.previous_page})}),[c]);const f=(0,p.useCallback)((()=>{c&&gt.en.handleRecLivePlay({enter_from_merge:u.enter_from_merge,enter_method:u.enter_method,follow_status:u.follow_status,anchor_id:u.anchor_id,room_id:u.room_id,action_type:u.action_type,previous_page:mt.W.commonParams.previous_page})}),[u,c]),x=()=>(0,o.jsx)(pt.k,{isShowLive:c,src:l,size:116,needAnimation:v,e2eTag:n,isBiggerBadge:!0},void 0);return t?(0,o.jsx)(dt.Z,{width:96,height:96,"data-e2e":"user-avatar"},void 0):c?(0,o.jsx)(ht.G,Object.assign({uniqueId:r,secUid:a,teaParams:u,extraQuery:h,onClick:f},{children:x()}),void 0):x()}));var ft=i(6156),bt=i(17471),xt=i(46369),_t=i(63820),yt=i(45827),jt=i(11753);const kt=(0,we.Z)("div",{target:"e162h3pn0"})({padding:"16px",width:"264px",wordBreak:"break-word"},"label:DivTipWrapper;"),wt=(0,we.Z)("h3",{target:"e162h3pn1"})((({theme:e})=>(0,Ie.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{marginBottom:"4px"},"label:H3TipTitle;"),Ct=(0,we.Z)("p",{target:"e162h3pn2"})((({theme:e})=>(0,Ie.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),It=(0,we.Z)("div",{target:"e162h3pn3"})({display:"flex",justifyContent:"flex-end"},"label:DivButtonWrapper;"),St=(0,we.Z)("button",{target:"e162h3pn4"})(Ie.Ph,(({theme:e})=>(0,Ie.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{cursor:"pointer"},"label:ButtonOk;"),Tt=(0,we.Z)("button",{target:"e162h3pn5"})(Ie.Ph,(({theme:e})=>(0,Ie.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{cursor:"pointer"},"label:ButtonCancel;"),Pt=(0,p.memo)((({showPopover:e,title:t,description:i,cancelText:n,okText:r,onOkClick:a,onCancel:l})=>{const{colors:s,direction:d}=(0,P.u)(),c=(0,p.useRef)(!1);(0,p.useEffect)((()=>{let t;return e&&(t=window.setTimeout((()=>{c.current=!0,l("auto_cancel")}),5e3)),()=>clearTimeout(t)}),[l,e]),(0,p.useEffect)((()=>()=>{e&&!c.current&&l("other")}),[e]);const u=(0,p.useCallback)((()=>{a()}),[a]),h=(0,p.useCallback)((()=>{c.current=!0,l("cancel")}),[l]),g="ltr"===d?"bottomLeft":"bottomRight";return(0,o.jsx)(jt.G,Object.assign({active:e,backgroundColor:s.ConstSecondary2,placement:g,arrowMargin:"58px",margin:"0"},{children:(0,o.jsxs)(kt,{children:[(0,o.jsx)(wt,{children:t},void 0),(0,o.jsx)(Ct,{children:i},void 0),(0,o.jsxs)(It,{children:[(0,o.jsx)(Tt,Object.assign({onClick:h},{children:n}),void 0),r&&(0,o.jsx)(St,Object.assign({onClick:u},{children:r}),void 0)]},void 0)]},void 0)}),void 0)}));var Ot=i(28972),Mt=i(26014),Dt=i(35465),Lt=i(64119),Ft=i(58718),Ut=i(93697);const Bt=(0,we.Z)("div",{target:"e1gjao0r0"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontWeight:"semiBold",fontFamily:"TikTokFont"}),{height:"72px",padding:"12px 24px 0 24px",boxSizing:"border-box",fontSize:"24px",color:e.colors.TextPrimary,display:"flex",alignItems:"center",background:e.colors.BGPrimary}]),"label:DivHeaderContainer;"),Zt=(0,we.Z)("div",{target:"e1gjao0r1"})({lineHeight:"36px"},"label:DivText;"),Et=(0,we.Z)("div",{target:"e1gjao0r2"})((({theme:e})=>[{cursor:"pointer",width:"24px",height:"24px",display:"inline-block",transform:"rtl"===e.direction?"rotateY(180deg)":""},(0,Ie.YJ)({direction:e.direction,marginEnd:"8px"})]),"label:DivArrow;"),Rt=(0,we.Z)("div",{target:"e1gjao0r3"})({background:"#000000",paddingTop:"32px"},"label:DivContentContainer;"),zt=(0,we.Z)("div",{target:"e1gjao0r4"})({height:"441px",width:"700px",overflow:"hidden",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},"label:DivZoomArea;"),Wt=(0,we.Z)("div",{target:"e1gjao0r5"})({width:"360px",height:"360px",borderRadius:"360px",boxShadow:"0 0 0 250px rgba(0, 0, 0, 0.3)",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"},"label:DivMask;"),qt=(0,we.Z)("div",{target:"e1gjao0r6"})({fontSize:"14px",lineHeight:"22px",color:"#ffffff",height:"69px",display:"flex",alignItems:"center",justifyContent:"center"},"label:DivSlider;"),At=(0,we.Z)("span",{target:"e1gjao0r7"})((({theme:e})=>(0,Ie.YJ)({direction:e.direction,marginEnd:"16px"})),"label:SpanLabel;"),Nt=(0,we.Z)("div",{target:"e1gjao0r8"})((({theme:{colors:e}})=>({height:"86px",display:"flex",padding:"0 24px",justifyContent:"flex-end",alignItems:"center",background:e.BGPrimary})),"label:DivFooterContainer;"),Ht=(0,we.Z)(U.W,{target:"e1gjao0r9"})((({theme:e})=>[{lineHeight:"24px",minWidth:"0",padding:"7px 16px"},(0,Ie.YJ)({direction:e.direction,marginStart:"16px"})]),"label:StyledBtn;"),Gt=(0,we.Z)("div",{target:"e1gjao0r10"})({width:"320px",height:"16px",position:"relative"},"label:DivSliderContainer;"),Vt=(0,we.Z)("div",{target:"e1gjao0r11"})({height:"6px",borderRadius:"3px",background:"#ffffff",position:"absolute",width:"100%",left:"0",top:"5px",cursor:"pointer"},"label:DivSliderBar;"),$t=(0,we.Z)("div",{target:"e1gjao0r12"})({height:"6px",borderRadius:"3px",width:"100%",position:"absolute",left:"0",top:"5px",cursor:"pointer",overflow:"hidden"},"label:DivSliderProgress;"),Yt=(0,we.Z)("div",{target:"e1gjao0r13"})({width:"100%",background:"#FE2C55",height:"100%",transformOrigin:"left"},"label:DivSliderColor;"),Xt=(0,we.Z)("div",{target:"e1gjao0r14"})((({theme:e})=>[{width:"16px",height:"16px",borderRadius:"16px",background:"#FE2C55",position:"absolute",top:0,left:0,cursor:"pointer"},(0,Ie.YJ)({direction:e.direction,marginStart:"-8px"})]),"label:DivSliderDot;"),Kt=(0,we.Z)("img",{target:"e1gjao0r15"})({maxWidth:"unset"},"label:Img;"),Qt=(0,p.memo)((({onPercentChange:e,transformScalePercent:t})=>{const i=(0,p.useRef)(null),n=(0,p.useRef)(null),r=(0,p.useRef)(null),a=(0,p.useRef)(null),{direction:l}=(0,P.u)(),s=(0,p.useCallback)((t=>{e(t)}),[e]),{percent:d,bindDrag:c,seek:u,update:h}=(0,Ut.x)({direction:l,progressRef:a,circleRef:r,barRef:n,initialPercent:0,draggingPercentCb:s});(0,p.useEffect)((()=>{h(t)}),[h,t]);const g="ltr"===l?{left:`calc(${100*d}%)`}:{right:`calc(${100*d}%)`},m="ltr"===l?{transform:`scaleX(${d})`}:{transform:`scaleX(${d})`,transformOrigin:"right"};return(0,o.jsxs)(Gt,Object.assign({ref:i},{children:[(0,o.jsx)(Vt,{onMouseDown:c,onClick:u,ref:a},void 0),(0,o.jsx)($t,Object.assign({ref:n,onClick:u,onMouseDown:c},{children:(0,o.jsx)(Yt,{style:m},void 0)}),void 0),(0,o.jsx)(Xt,{style:g,onMouseDown:c,ref:r},void 0)]}),void 0)}));const Jt=360,ei=(0,p.memo)((({onClose:e,onSaveAvatar:t,imageInfo:i,style:r={}})=>{const{url:a,width:l,height:s,initScale:d}=i,[u,h]=(0,p.useState)(0),[{uploadImgCode:g,uploadingFile:m},v]=(0,n.b)(je),f=(0,c.Q)(),b=(0,p.useRef)(null),x=(0,p.useCallback)((()=>{e()}),[e]);(0,p.useEffect)((()=>{0===g?t():g!==fe&&j.h.open({content:f("editprofile_editpage_error_photofail_others"),duration:2})}),[g,t,f]);const _=(0,p.useCallback)((()=>{return e=void 0,t=void 0,o=function*(){if(b.current){const{positionX:e,positionY:t,scale:i}=b.current.state;try{const o=yield function(e,t,i,o,n,r,a,l){return new Promise(((n,r)=>{const a=new Image;a.src=e,a.onload=()=>{const e=document.createElement("canvas");e.width=200,e.height=200;const r=e.getContext("2d"),l=0-t/o,s=0-i/o,d=360/o,c=360/o;null==r||r.drawImage(a,l,s,d,c,0,0,200,200),e.toBlob((e=>{e&&n(e)}))},a.onerror=()=>{r()}}))}(a,e,t,i*d);v.uploadImage(o)}catch(e){j.h.open({content:f("editprofile_editpage_error_photofail_others"),duration:2})}}},new((i=void 0)||(i=Promise))((function(n,r){function a(e){try{s(o.next(e))}catch(e){r(e)}}function l(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}));var e,t,i,o}),[d,a,v,f]),y=(0,p.useMemo)((()=>({direction:"ltr",height:"360px",width:"360px",overflow:"unset"})),[]),k=(0,p.useMemo)((()=>({cursor:"move"})),[]),w=(0,p.useCallback)((e=>{const{scale:t}=e.state;h(Math.max(t-1,0)/7)}),[]),C=(0,p.useCallback)((e=>{if(b.current){const{setTransform:t,state:{positionX:i,positionY:o,scale:n}}=b.current,r=7*e+1;let a=Math.min(i-l*(r-n)/2,0),d=Math.min(o-s*(r-n)/2,0);d+s*r<Jt&&(d=Jt-s*r),a+l*r<Jt&&(a=Jt-l*r),t(a,d,r)}}),[s,l]);return(0,o.jsxs)("div",Object.assign({style:r},{children:[(0,o.jsxs)(Bt,{children:[(0,o.jsx)(Et,Object.assign({onClick:x},{children:(0,o.jsx)(Ft.Z,{width:24,height:24},void 0)}),void 0),(0,o.jsx)(Zt,{children:f("editprofile_editpage_photo_editphoto")},void 0)]},void 0),(0,o.jsx)(Rt,{children:(0,o.jsxs)(Lt.d$,Object.assign({centerOnInit:!0,ref:b,onZoom:w,maxScale:8,initialScale:1},{children:[(0,o.jsxs)(zt,{children:[(0,o.jsx)(Lt.Uv,Object.assign({wrapperStyle:y,contentStyle:k},{children:(0,o.jsx)(Kt,{src:a,width:l,height:s},void 0)}),void 0),(0,o.jsx)(Wt,{},void 0)]},void 0),(0,o.jsxs)(qt,{children:[(0,o.jsx)(At,{children:f("editprofile_editimage_zoom")},void 0),(0,o.jsx)(Qt,{transformScalePercent:u,onPercentChange:C},void 0)]},void 0)]}),void 0)},void 0),(0,o.jsxs)(Nt,{children:[(0,o.jsx)(Ht,Object.assign({size:"tiny",onClick:x},{children:f("editprofile_cancel")}),void 0),(0,o.jsx)(Ht,Object.assign({disabled:m,size:"tiny",buttonTheme:"primary",onClick:_},{children:f("editprofile_editpage_photo_apply")}),void 0)]},void 0)]}),void 0)})),ti=[{title:"editprofile_editpage_username_confirmtitle",info:"editprofile_editpage_username_confirmtext"},{title:"nickname_change_pop_up_title",info:"nickname_change_pop_up_description",replaceTag:"%d"},{title:"nickname_username_change_pop_up_title",info:"nickname_username_change_pop_up_description",replaceTag:"%d"}],ii=(0,p.memo)((({onCancel:e,onConfirm:t,active:i,changeType:n,replaceStr:r,isVerified:a,nextStep:l})=>{const s=(0,c.Q)(),d=(0,p.useCallback)((()=>{e()}),[e]),u=(0,p.useCallback)((()=>{a?l((e=>Object.assign(Object.assign({},e),{confirmStep:"blueVConfirm"}))):t(!1)}),[a,l,t]),h=ti[n];let g=s(h.info);return h.replaceTag&&(g=g.replace(h.replaceTag,r)),(0,o.jsxs)(Se,Object.assign({"data-e2e":"set-username-popup"},{children:[(0,o.jsx)(Te,Object.assign({"data-e2e":"set-username-popup-title"},{children:s(h.title)}),void 0),(0,o.jsx)(Pe,Object.assign({"data-e2e":"set-username-popup-desc"},{children:g}),void 0),(0,o.jsxs)(De,{children:[(0,o.jsx)(Le,Object.assign({"data-e2e":"set-username-popup-cancel",onClick:d},{children:s("editprofile_cancel")}),void 0),(0,o.jsx)(Le,Object.assign({"data-e2e":"set-username-popup-confirm",disabled:!i,buttonTheme:"primary",onClick:u},{children:s("nickname_username_change_pop_up_cta_2")}),void 0)]},void 0)]}),void 0)})),oi=[{title:"blue_v_change_username_modal_title",desc1:"blue_v_change_username_modal_desc",desc2:"blue_v_change_username_modal_desc_2"},{title:"blue_v_change_name_modal_title",desc1:"blue_v_change_name_modal_desc",desc2:"blue_v_change_name_modal_desc_2"},{title:"blue_v_change_username_name_modal_title",desc1:"blue_v_webapp_change_name_modal_desc",desc2:"blue_v_webapp_change_name_modal_desc_2"}],ni=(0,p.memo)((({onCancel:e,nextStep:t,changeType:i})=>{const n=(0,c.Q)(),r=(0,p.useCallback)((()=>{e()}),[e]),a=(0,p.useCallback)((()=>{t((e=>Object.assign(Object.assign({},e),{confirmStep:"loseVerifyConfirm"})))}),[t]),l=(0,p.useCallback)((()=>{t((e=>Object.assign(Object.assign({},e),{confirmStep:"submitConfirm"})))}),[t]),s=oi[i];return(0,o.jsxs)(Se,{children:[(0,o.jsx)(Te,{children:n(s.title)},void 0),(0,o.jsxs)(Oe,{children:[(0,o.jsx)(Me,{children:n(s.desc1)},void 0),(0,o.jsx)(Me,{children:n(s.desc2)},void 0)]},void 0),(0,o.jsxs)("div",{children:[(0,o.jsx)(Fe,Object.assign({buttonTheme:"primary",onClick:l},{children:n("blue_v_change_name_modal_submit_request_btn")}),void 0),(0,o.jsx)(Fe,Object.assign({onClick:a},{children:n("blue_v_change_name_modal_change_btn")}),void 0),(0,o.jsx)(Ue,Object.assign({buttonTheme:"default",onClick:r},{children:n("blue_v_change_name_review_cancel_btn")}),void 0)]},void 0)]},void 0)})),ri=[{info:"blue_v_change_username_lose_badge_modal_title",replaceUserNameTag:"%s"},{info:"blue_v_change_name_lose_badge_modal_title",replaceNameTag:"%s"},{info:"blue_v_webapp_change_name_lose_badge_modal_title",replaceUserNameTag:"%1s",replaceNameTag:"%2s"}],ai=(0,p.memo)((({onCancel:e,onConfirm:t,changeType:i,username:n,name:a})=>{const{updatingProfile:l}=(0,r.m)(je),s=(0,c.Q)(),d=(0,p.useCallback)((()=>{e()}),[e]),u=(0,p.useCallback)((()=>{!l&&t(!0)}),[t,l]),h=ri[i];let g=s(h.info);h.replaceUserNameTag&&(g=g.replace(h.replaceUserNameTag,n)),h.replaceNameTag&&(g=g.replace(h.replaceNameTag,a));const{colors:m}=(0,P.u)();return(0,o.jsxs)(Se,{children:[(0,o.jsx)(Te,{children:g},void 0),(0,o.jsx)(Pe,{children:s("blue_v_change_name_lose_badge_modal_desc")},void 0),(0,o.jsxs)(De,{children:[(0,o.jsx)(Le,Object.assign({disabled:l,onClick:d},{children:s("blue_v_change_name_review_cancel_btn")}),void 0),(0,o.jsx)(Le,Object.assign({buttonTheme:"primary",onClick:u},{children:l?(0,o.jsx)(Ze,{fill:m.ConstTextInverse,width:20,height:20},void 0):s("blue_v_change_name_lose_badge_confirm_btn")}),void 0)]},void 0)]},void 0)}));var li=i(41573);const si=(0,we.Z)("div",{target:"e13yu7jj0"})((({showVerified:e})=>({height:e?"754px":"700px"})),"label:DivModalContainer;"),di=(0,we.Z)("div",{target:"e13yu7jj1"})((({theme:e})=>[{padding:"24px 24px 12px 24px",lineHeight:"36px",borderBottom:`0.5px solid ${e.colors.LinePrimary2}`,display:"flex",justifyContent:"space-between",alignItems:"center"}]),"label:DivHeaderContainer;"),ci=(0,we.Z)("h1",{target:"e13yu7jj2"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontWeight:"semiBold",fontFamily:"TikTokFont"}),{fontSize:"24px",color:e.colors.TextPrimary}]),"label:H1Header;"),ui=(0,we.Z)("div",{target:"e13yu7jj3"})((({theme:e})=>[{width:"24px",height:"24px",cursor:"pointer","&:focus-visible":{outline:`2px solid ${e.colors.Negative}`}},(0,Ie.YJ)({direction:e.direction,marginEnd:"12px"})]),"label:DivCloseContainer;"),pi=(0,we.Z)("div",{target:"e13yu7jj4"})((({theme:{colors:e}})=>({height:"86px",display:"flex",padding:"0 24px",justifyContent:"flex-end",borderTop:`0.5px solid ${e.LinePrimary2}`,alignItems:"center",position:"absolute",width:"100%",bottom:0})),"label:DivFooterContainer;"),hi=(0,we.Z)(U.W,{target:"e13yu7jj5"})((({theme:e})=>[{lineHeight:"24px",padding:"7px 16px",minWidth:"96px",height:"36px"},(0,Ie.YJ)({direction:e.direction,marginStart:"16px"})]),"label:StyledBtn;"),gi=(0,we.Z)("div",{target:"e13yu7jj6"})({width:"700px",padding:"8px 24px 0 24px"},"label:DivContentContainer;"),mi=(0,we.Z)("div",{target:"e13yu7jj7"})({padding:"16px 0",display:"flex"},"label:DivItemContainer;"),vi=(0,we.Z)(mi,{target:"e13yu7jj10"})((({theme:{colors:e}})=>({borderBottom:`0.5px solid ${e.TUXLineSecondary3}`})),"label:StyledItemContainerWithLine;"),fi=(0,we.Z)("div",{target:"e13yu7jj11"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontWeight:"semiBold",fontFamily:"TikTokFont"}),{lineHeight:"24px",fontSize:"16px",width:"120px",marginRight:"24px"}]),"label:DivLabel;"),bi=(0,we.Z)("div",{target:"e13yu7jj12"})({position:"relative",height:"96px"},"label:DivAvatarContent;"),xi=(0,we.Z)("div",{target:"e13yu7jj13"})({position:"relative"},"label:DivEditAreaContainer;"),_i=(0,we.Z)("input",{target:"e13yu7jj14"})((({theme:{colors:e}})=>({width:"360px",height:"38px",borderRadius:"4px",background:e.BGInput,caretColor:"#fe2c55",fontSize:"16px",color:e.TextPrimary,lineHeight:"24px",outline:"none",border:"none",padding:"7px 12px",boxSizing:"border-box","&:focus":{background:e.BGInput2,outline:"1.5px solid rgba(22, 24, 35, 0.2)"}})),"label:InputText;"),yi=(0,we.Z)("div",{target:"e13yu7jj15"})((({theme:{colors:e}})=>({fontSize:"16px",lineHeight:"24px",color:e.TextPrimary,marginBottom:"16px"})),"label:DivReadOnlyText;"),ji=_i.withComponent("textarea"),ki=(0,we.Z)(ji,{target:"e13yu7jj16"})({height:"100px",padding:"12px",resize:"none"},"label:StyledInputTextArea;"),wi=(0,we.Z)("p",{target:"e13yu7jj17"})((({theme:{colors:e}})=>({fontSize:"12px",color:e.TextSecondary,lineHeight:"18px",marginTop:"16px",maxWidth:"460px",overflow:"hidden"})),"label:PProfileSite;"),Ci=(0,we.Z)(wi,{target:"e13yu7jj18"})({marginTop:"8px",width:"360px"},"label:StyledTip;"),Ii=(0,we.Z)("div",{target:"e13yu7jj19"})((({theme:{colors:e}})=>({color:e.TextSecondary,fontSize:"12px",lineHeight:"18px"})),"label:DivTextCount;"),Si=(0,we.Z)("div",{target:"e13yu7jj20"})((({theme:e})=>[{width:"32px",height:"32px",borderRadius:"16px",background:e.colors.BGTertiary,border:"1px solid #D0D0D3",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",position:"absolute",bottom:"0","&:focus-visible":{outline:`2px solid ${e.colors.Negative}`}},(0,Ie.YJ)({direction:e.direction,marginStart:"192px"})]),"label:DivAvatarEditIcon;"),Ti=(0,we.Z)(pt.k,{target:"e13yu7jj21"})((({theme:e})=>(0,Ie.YJ)({direction:e.direction,marginStart:"128px"})),"label:StyledAvatar;"),Pi=(0,we.Z)("input",{target:"e13yu7jj22"})({width:"1px",height:"1px",position:"absolute",top:0,left:0,opacity:0},"label:InputUpload;"),Oi=(0,we.Z)("p",{target:"e13yu7jj23"})({height:"18px",lineHeight:"18px",color:"#FF4C3A",fontSize:"12px",marginTop:"6px"},"label:PInputError;"),Mi=(0,we.Z)(li.Z,{target:"e13yu7jj24"})((({theme:e})=>[(0,Ie.YJ)({direction:e.direction,start:"328px"}),{position:"absolute",top:"11px"}]),"label:StyledTickBold;"),Di=(0,ke.F4)({from:{transform:"rotateZ(0)"},to:{transform:"rotateZ(360deg)"}}),Li=(0,we.Z)(Ce.Z,{target:"e13yu7jj25"})((({theme:e})=>[(0,Ie.YJ)({direction:e.direction,end:"12px"}),{position:"absolute",top:"7px",animation:`${Di} 1s infinite`}]),"label:StyledProgressCircle;"),Fi=e=>{const{onBioChange:t,bio:i,bioValid:n,onBioValidChange:r}=e,a=(0,c.Q)(),l=(0,p.useCallback)((e=>{const{value:i}=e.target;i.split("\n").length<=5?(r("bioValid",i.length<=80),t("bio",i)):j.h.open({content:a("editprofile_editpage_error_row"),duration:2})}),[t,r,a]);return(0,o.jsxs)(xi,{children:[(0,o.jsx)(ki,{"data-e2e":"edit-profile-bio-input",style:{outline:n?"":"1.5px solid #FF4C3A"},placeholder:a("editprofile_editpage_bio"),onChange:l,value:i},void 0),(0,o.jsxs)(Ii,{children:[(0,o.jsxs)("span",Object.assign({style:{color:n?"":"#FF4C3A"}},{children:[i.length,"/"]}),void 0),80]},void 0)]},void 0)};var Ui=i(33696);const Bi=["jpg","jpeg","png","tiff","heic","webp"],Zi=Bi.map((e=>`.${e}`)).join(","),Ei=({fileUploadRef:e,processCallback:t,errorCallback:i})=>{const o=(0,p.useRef)({url:"",width:0,height:0,initScale:1}),n=(0,p.useCallback)((()=>{e.current.value="",e.current.click()}),[e]),r=(0,p.useCallback)((e=>{return n=void 0,r=void 0,l=function*(){const n=e.target.files[0];if(n.size>10485760)return void i(0);try{const e=yield(e=>new Promise(((t,i)=>{const o=new FileReader;o.onload=function(e){var o,n,r;const a=null===(o=e.target)||void 0===o?void 0:o.result;if(a&&"string"!=typeof a){const e=null!==(n=(0,Ui.filetypeinfo)(new Uint8Array(a)))&&void 0!==n?n:[{typename:""}];t(null===(r=e[0])||void 0===r?void 0:r.typename)}else i()},o.onerror=()=>{i()},o.readAsArrayBuffer(e)})))(n);if(!Bi.includes(e))return void i(1)}catch(e){return void i(1)}const r=URL.createObjectURL(n),{width:a,height:l}=yield function(e){return new Promise(((t,i)=>{const o=new Image;o.src=e,o.onload=()=>{t({width:o.width,height:o.height})},o.onerror=()=>{i()}}))}(r);let s=Jt,d=Jt;a>l?s=d*a/l:d=s*l/a,o.current={url:r,width:s,height:d,initScale:s/a},t()},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{s(l.next(e))}catch(e){t(e)}}function o(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(i,o)}s((l=l.apply(n,r||[])).next())}));var n,r,a,l}),[t,i]);return{handleFileChange:r,imageInfoRef:o,handleAvatarEditIconClick:n}},Ri=e=>{const{onNameChange:t,onNameErrorChange:i,name:n,nameErrMsg:a,nameChangeInfo:l,nickNameControlDay:s}=e,d=(0,c.Q)(),{nickNameValid:u}=(0,r.m)(je);(0,p.useEffect)((()=>{1===u?i("nameErrMsg",""):2===u&&i("nameErrMsg",d("editprofile_editpage_error_namenotavail"))}),[u,i,d]);const h=(0,p.useCallback)((e=>{const{value:o}=e.target;o.length>30?i("nameErrMsg",d("editprofile_editpage_error_max")):i("nameErrMsg",""),t("name",o)}),[t,i,d]);return(0,o.jsx)(xi,Object.assign({"data-e2e":"edit-profile-name-input"},{children:l.changeable?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_i,{"aria-invalid":Boolean(a),"aria-label":a,style:{outline:a?"1.5px solid #FF4C3A":""},placeholder:d("editprofile_editpage_name"),value:n,onChange:h},void 0),a?(0,o.jsx)(Oi,{children:a},void 0):(0,o.jsx)(Ci,{children:d("nickname_change_1st_time_description").replace("%d",s)},void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(yi,{children:n},void 0),(0,o.jsx)(Ci,{children:d("nickname_change_description").replace("%d",s).replace("%s",l.nextTimeStr)},void 0)]},void 0)}),void 0)};var zi=i(76709);const Wi=/^[0-9a-z._A-Z]{2,24}$/,qi=e=>{const{username:t,onUsernameChange:i,onUsernameErrorChange:r,uniqueIdChangeInfo:a,usernameErrMsg:l}=e,[{checkLoading:s,uniqueIdValid:d,checkUniqueIdCode:u},h]=(0,n.b)(je),g=(0,c.Q)(),{colors:m}=(0,P.u)(),v=(0,zi.Nr)((e=>{h.checkUniqueId(e.toLowerCase())}),[h],1e3);(0,p.useEffect)((()=>{1===d&&Wi.test(t)?r("usernameErrMsg",""):2===d&&r("usernameErrMsg",g("editprofile_editpage_error_notavailable"))}),[d,t]),(0,p.useEffect)((()=>{6===u&&j.h.open({content:g("editprofile_editpage_error_tryagain"),duration:2})}),[u]);const f=(0,p.useCallback)((e=>{const{value:t}=e.target;t.length<2?r("usernameErrMsg",g("editprofile_editpage_error_min2char")):t.length>24?r("usernameErrMsg",g("editprofile_editpage_error_username_max")):Wi.test(t)?v(t):r("usernameErrMsg",g("editprofile_editpage_error_notavailable")),i("userName",t)}),[v,i,r,g]);return(0,o.jsx)(xi,Object.assign({"data-e2e":"edit-profile-username-input"},{children:a.changeable?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_i,{"aria-invalid":Boolean(l),"aria-label":l,style:{outline:l?"1.5px solid #FF4C3A":""},placeholder:g("editprofile_editpage_username"),value:t,onChange:f},void 0),(()=>{const e=l,t=d;return e?(0,o.jsx)(Oi,{children:e},void 0):s?(0,o.jsx)(Li,{fill:m.LineInput,width:24,height:24},void 0):t?(0,o.jsx)(Mi,{fill:"#0BE09B",width:16,height:16},void 0):void 0})(),(0,o.jsxs)(wi,Object.assign({"data-e2e":"edit-profile-username-link"},{children:["www.tiktok.com/@",t]}),void 0),(0,o.jsx)(Ci,Object.assign({"data-e2e":"edit-profile-username-tip"},{children:g("editprofile_editpage_username_subtext1")}),void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(yi,{children:t},void 0),(0,o.jsxs)(wi,{children:["www.tiktok.com/@",t]},void 0),(0,o.jsx)(Ci,{children:g("editprofile_editpage_username_subtext2").replace("%s",a.nextTimeStr)},void 0)]},void 0)}),void 0)},Ai="reset",Ni="report",Hi=(0,p.memo)((({visible:e=!1,user:t,onCloseModal:i,onUpdated:r,uniqueIdChangeInfo:a,editProfileFrom:l,nameChangeInfo:s,nickNameControlDay:d})=>{const{signature:u,nickname:h,avatarThumb:g,uniqueId:m}=t,[v,f]=(0,p.useState)(!1),[{confirmStep:b,changeType:x},_]=(0,p.useState)({changeType:3,confirmStep:"none"}),y=(0,p.useRef)(null),[{checkLoading:k,avatarInfo:w,saveCode:C,updatingProfile:I},S]=(0,n.b)(je),T=(0,c.Q)(),O=Boolean(t.verified),M=(0,p.useCallback)(((e,i)=>{if(i.type===Ni){const o=i.playload?2:1;return yt.p.handleSaveReport(Object.assign(Object.assign({},((e,t,i)=>({username_updated:e.userName===t.uniqueId?0:i,photo_updated:e.avatar===t.avatarThumb?0:i,bio_updated:e.bio===t.signature?0:i,name_updated:e.name===t.nickname?0:i}))(e,t,o)),{enter_from:l})),e}return i.type===Ai?Object.assign(Object.assign({},e),i.playload):Object.assign(Object.assign({},e),{[i.type]:i.playload})}),[t,l]),[D,L]=(0,p.useReducer)(M,{userName:m,name:h,bio:u,avatar:g,nameErrMsg:"",usernameErrMsg:"",bioValid:!0}),F=(0,p.useMemo)((()=>((e,t,i,o,n)=>{const{name:r,userName:a,bio:l,nameErrMsg:s,usernameErrMsg:d,bioValid:c,avatar:u}=e,{nickname:p,signature:h,uniqueId:g,avatarThumb:m}=i,v=Boolean(r)&&r!==p,f=Boolean(a)&&a!==g,b=l!==h,x=Boolean(n.uri&&u!==m);return(v||f||b||x)&&!s&&!d&&!o&&c&&!t})(D,I,t,k,w)),[D,I,k,t,w]),U=(0,p.useCallback)((()=>{f(!0)}),[]),B=(0,p.useCallback)((e=>{const t=((e,t)=>{let i="";return 0===e?i=t("editprofile_editpage_error_photofail_max"):1===e&&(i=t("editprofile_editpage_error_image_cantuse")),i})(e,T);j.h.open({content:t,duration:2})}),[T]),{imageInfoRef:Z,handleAvatarEditIconClick:E,handleFileChange:R}=Ei({fileUploadRef:y,processCallback:U,errorCallback:B}),z=(0,p.useCallback)((e=>{R(e)}),[R]);(0,p.useEffect)((()=>{w.url&&L({type:"avatar",playload:w.url})}),[w]),(0,p.useEffect)((()=>{if(!I){if(0===C)return L({type:Ni}),void r("submitConfirm"===b);const e=((e,t,i)=>{let o="";switch(e){case 1332:o=t("editprofile_editpage_error_cantmodify_others");break;case 1333:o=t("editprofile_editpage_error_cantmodify_review");break;case 1330:o=t("editprofile_editpage_error_username_cantchange");break;case 23:o=t("alert_user_update_profile_limited_toast");break;case 9:o=t("account_status_banned");break;case 3002265:o=t("nickname_change_fail_toast").replace("%d",i);break;case 3002328:o=t("ecom_changename_web");break;default:e!==fe&&(o=t("editprofile_editpage_error_tryagain"))}return o})(C,T,d);e&&L({type:Ni,playload:" "}),e&&j.h.open({content:e,duration:2})}}),[C,I,b]);const W=(0,p.useCallback)((()=>{L({type:Ai,playload:{userName:m,name:h,bio:u,avatar:g,nameErrMsg:"",usernameErrMsg:"",bioValid:!0}}),S.setUpdatingProfile(!1),S.setAvatarInfo({uri:"",url:""}),S.SetSaveCode(fe),S.setNickNameValid(0),S.setUploadImgCode(fe),S.setUniqueIdValid(0)}),[g,S,h,u,m]);(0,p.useEffect)((()=>{L({type:Ai,playload:{userName:m,name:h,bio:u,avatar:g,nameErrMsg:"",usernameErrMsg:"",bioValid:!0}})}),[g,h,u,m]);const q=(0,p.useCallback)((()=>{i(),yt.p.handleCancelEditProfile({enter_from:l}),W()}),[l,i,W]),A=(0,p.useCallback)((()=>{D.userName!==m&&D.name!==h?_({changeType:2,confirmStep:"frequencyConfirm"}):D.userName!==m?_({changeType:0,confirmStep:"frequencyConfirm"}):D.name!==h?_({changeType:1,confirmStep:"frequencyConfirm"}):S.updateUserProfile({signature:D.bio!==u?D.bio:void 0,nickname:D.name!==h?D.name:void 0,avatar_uri:w.uri?w.uri:void 0,uniqueId:D.userName.toLowerCase(),needUpdateUniqueId:D.userName.toLowerCase()!==m,needRemoveBlueV:!1})}),[D.userName,D.name,D.bio,m,h,S,u,w.uri]),N=(0,p.useCallback)((()=>{_({changeType:3,confirmStep:"none"}),W()}),[W]),H=(0,p.useCallback)((e=>{S.updateUserProfile({signature:D.bio!==u?D.bio:void 0,nickname:D.name!==h?D.name:void 0,avatar_uri:w.uri?w.uri:void 0,uniqueId:D.userName.toLowerCase(),needUpdateUniqueId:D.userName.toLowerCase()!==m,needRemoveBlueV:e})}),[S,D.bio,D.name,D.userName,u,h,w.uri,m]),G=(0,p.useCallback)((e=>{27===e.keyCode&&(e.stopPropagation(),e.preventDefault(),q())}),[q]),V=(0,p.useCallback)((e=>{13===e.keyCode&&(e.stopPropagation(),e.preventDefault(),q())}),[q]),$=(0,p.useCallback)((e=>{var t;13===e.keyCode&&(e.stopPropagation(),e.preventDefault(),null===(t=y.current)||void 0===t||t.click())}),[]),Y=(0,p.useCallback)(((e,t)=>{L({type:e,playload:t})}),[]),X=(0,p.useCallback)((()=>{f(!1),S.setUploadImgCode(fe)}),[S]),{colors:K}=(0,P.u)();return(0,o.jsx)(Dt.d,Object.assign({style:{background:K.BGSecondary},compact:!0,isOpen:e},{children:"none"!==b?(()=>{const e={isVerified:O,replaceStr:d,changeType:x,active:!I,onCancel:N,onConfirm:H,username:D.userName,name:D.name,nextStep:_};switch(b){case"frequencyConfirm":return(0,o.jsx)(ii,Object.assign({},e),void 0);case"blueVConfirm":return(0,o.jsx)(ni,Object.assign({},e),void 0);case"loseVerifyConfirm":return(0,o.jsx)(ai,Object.assign({},e),void 0);case"submitConfirm":return(0,o.jsx)(ze,Object.assign({},e),void 0);default:return null}})():(0,o.jsxs)(si,Object.assign({"aria-label":T("editprofile_editprofile"),role:"dialog",onKeyDown:G,"data-e2e":"edit-profile-popup",showVerified:O&&!v},{children:[(0,o.jsxs)(di,Object.assign({"data-e2e":"edit-profile-header"},{children:[(0,o.jsx)(ci,{children:T("editprofile_editprofile")},void 0),(0,o.jsx)(ui,Object.assign({"aria-label":T("Close_button"),role:"button",tabIndex:0,onKeyDown:V,onClick:q,"data-e2e":"edit-profile-close"},{children:(0,o.jsx)(Ot.Z,{width:"24",height:"24",fill:K.TextSecondary},void 0)}),void 0)]}),void 0),(0,o.jsxs)(gi,{children:[(0,o.jsxs)(vi,{children:[(0,o.jsx)(fi,Object.assign({"data-e2e":"edit-profile-photo"},{children:T("editprofile_editpage_photo")}),void 0),(0,o.jsxs)(bi,Object.assign({"data-e2e":"edit-profile-avatar"},{children:[(0,o.jsx)(Ti,{onClick:E,src:D.avatar,isShowLive:!1,isShowLiveTag:!1,needAnimation:!1,size:96},void 0),(0,o.jsxs)(Si,Object.assign({"aria-label":T("editprofile_editpage_photo"),role:"button",tabIndex:0,onKeyDown:$,"data-e2e":"edit-profile-avatar-edit-icon",onClick:E},{children:[(0,o.jsx)(Mt.Z,{width:16,height:16},void 0),(0,o.jsx)(Pi,{ref:y,tabIndex:-1,type:"file",accept:Zi,onChange:z},void 0)]}),void 0)]}),void 0)]},void 0),(0,o.jsxs)(vi,{children:[(0,o.jsx)(fi,Object.assign({"data-e2e":"edit-profile-username"},{children:T("editprofile_editpage_username")}),void 0),(0,o.jsx)(qi,{username:D.userName,usernameErrMsg:D.usernameErrMsg,uniqueIdChangeInfo:a,onUsernameErrorChange:Y,onUsernameChange:Y},void 0)]},void 0),(0,o.jsxs)(vi,{children:[(0,o.jsx)(fi,Object.assign({"data-e2e":"edit-profile-name"},{children:T("editprofile_editpage_name")}),void 0),(0,o.jsx)(Ri,{name:D.name,nameErrMsg:D.nameErrMsg,onNameChange:Y,onNameErrorChange:Y,nameChangeInfo:s,nickNameControlDay:d},void 0)]},void 0),(0,o.jsxs)(mi,{children:[(0,o.jsx)(fi,Object.assign({"data-e2e":"edit-profile-bio"},{children:T("editprofile_editpage_bio")}),void 0),(0,o.jsx)(Fi,{bio:D.bio,bioValid:D.bioValid,onBioChange:Y,onBioValidChange:Y},void 0)]},void 0)]},void 0),(0,o.jsxs)(pi,{children:[(0,o.jsx)(hi,Object.assign({"data-e2e":"edit-profile-cancel",size:"tiny",onClick:q},{children:T("editprofile_cancel")}),void 0),(0,o.jsx)(hi,Object.assign({"data-e2e":"edit-profile-save",size:"tiny",buttonTheme:"primary",onClick:A,disabled:!F},{children:T("editprofile_save")}),void 0)]},void 0),v&&(0,o.jsx)(ei,{style:{position:"absolute",left:0,top:0,background:"#fff",borderRadius:"8px"},imageInfo:Z.current,onClose:X,onSaveAvatar:X},void 0)]}),void 0)}),void 0)})),Gi={id:"edit-5f4d9ed9",use:"edit-5f4d9ed9-usage",viewBox:"0 0 20 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="edit-5f4d9ed9"><path fill="currentColor" fill-rule="evenodd" d="M15.393 2.226a.842.842 0 0 0-1.17.02L8.142 8.33a.842.842 0 0 0-.247.595v2.34c0 .464.377.841.842.841h2.183a.842.842 0 0 0 .596-.246l6.237-6.238a.843.843 0 0 0-.02-1.211l-2.34-2.184ZM9.58 9.273l5.26-5.26 1.107 1.033-5.374 5.375H9.58V9.273ZM9.58 2a.42.42 0 0 1 .42.421v.842a.421.421 0 0 1-.42.421H4.526a.842.842 0 0 0-.842.842v10.948c0 .465.377.842.842.842h10.947a.842.842 0 0 0 .842-.842V10.42c0-.232.189-.421.421-.421h.842c.233 0 .422.188.422.421v5.053A2.526 2.526 0 0 1 15.473 18H4.526A2.526 2.526 0 0 1 2 15.474V4.526A2.526 2.526 0 0 1 4.526 2H9.58Z" clip-rule="evenodd" /></symbol>'};function Vi(e){const t=(0,p.useContext)(qe.e);return(0,p.useLayoutEffect)((()=>(t.add(Gi),()=>{t.remove("edit-5f4d9ed9")})),[]),(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,o.jsx)("use",{xlinkHref:"#edit-5f4d9ed9"},void 0)}),void 0)}const $i=(0,we.Z)("div",{target:"e33dl3i0"})({position:"relative",height:"36px",padding:0,margin:0,marginTop:"16px"},"label:DivEditContainer;"),Yi=(0,we.Z)(U.W,{target:"e33dl3i1"})((({theme:{direction:e}})=>[{height:"36px",fontSize:"16px",display:"flex",alignItems:"center",padding:"0 16px",minWidth:"136px",lineHeight:"24px","> span":{whiteSpace:"nowrap"}},(0,Ie.YJ)({direction:e,marginEnd:8})]),"label:StyledEditButton;"),Xi=(0,we.Z)(Vi,{target:"e33dl3i2"})((({theme:{direction:e,colors:t}})=>[{width:"20px",height:"20px",color:t.Primary2},(0,Ie.YJ)({direction:e,marginEnd:6})]),"label:StyledEditIcon;");function Ki(e,t){const i=e+24*t*60*60,o=Date.now();return e&&i>Math.ceil(o/1e3)?{changeable:!1,nextTime:i}:{changeable:!0,nextTime:0}}var Qi;!function(e){e.VerifyTip="1",e.ProfileUpdateTip="2"}(Qi||(Qi={}));const Ji=(0,p.memo)((function({user:e}){var t,i,r;const[a,l]=(0,p.useState)(!1),[s,d]=(0,p.useState)(!1),{uniqueIdModifyTime:u,nickNameModifyTime:h}=e,[g,m]=(0,p.useState)({changeable:!0,nextTimeStr:""}),[v,f]=(0,p.useState)({changeable:!0,nextTimeStr:""}),{language:b}=null!==(t=(0,D.Lh)((()=>["language"]),[]))&&void 0!==t?t:{},{config:x}=null!==(i=(0,bt.h)((()=>["config"]),[]))&&void 0!==i?i:{},j=null!==(r=null==x?void 0:x.nickNameControlDay)&&void 0!==r?r:"7",k=null!=b?b:"en",[{newUniqueInfo:w},C]=(0,n.b)(je),I=(0,xt.o)({pathname:(0,rt.ylP)({uniqueId:w.uniqueId}),search:{}}),S=(0,c.Q)(),[T,P]=(0,p.useState)(""),O=(0,D.bp)(),M=(0,bt.T)(),L=(0,ft.fz)(me.Q);(0,p.useEffect)((()=>{O.appContext&&M.bizContext&&L.setContext(O.appContext,M.bizContext)}),[O.appContext,L,M.bizContext]),(0,p.useEffect)((()=>{if(u){const{changeable:e,nextTime:t}=Ki(Number(u),30),i=(0,_t.wk)(Number(t),k,"MMM D, YYYY");m({changeable:e,nextTimeStr:i})}}),[k,u]),(0,p.useEffect)((()=>{if(h){const{changeable:e,nextTime:t}=Ki(Number(h),Number(j)),i=(0,_t.wk)(Number(t),k,"MMM D, YYYY");f((t=>Object.assign(Object.assign({},t),{changeable:e,nextTimeStr:i})))}}),[k,h,j]),(0,p.useEffect)((()=>{const e=!(0,_.le)(y.S0);e&&(yt.p.handleShowProfileTooltip({enter_from:"personal_homepage"}),(0,_.D$)(y.S0,"1")),d(e)}),[]),(0,p.useEffect)((()=>{const e=(0,_.St)(y.OB);e&&(P(e),l(!0),(0,_.lD)(y.OB))}),[]);const F=(0,p.useCallback)((()=>{yt.p.handleClickEditProfile({enter_from:"personal_homepage"}),P("personal_homepage"),l(!0)}),[]),U=(0,p.useCallback)((()=>{l(!1)}),[]),B=(0,p.useCallback)((e=>{yt.p.handleCloseProfileTooltip({enter_from:"personal_homepage",close_method:e}),d(!1)}),[]),Z=(0,p.useCallback)((e=>{(0,_.D9)(y.b7,e?"1":"2"),C.SetSaveCode(fe),l(!1),setTimeout((()=>{window.location.href=I}),3e3)}),[I,C]);return(0,o.jsxs)($i,Object.assign({"data-e2e":"edit-profile-entrance"},{children:[(0,o.jsxs)(Yi,Object.assign({onClick:F,size:"medium"},{children:[(0,o.jsx)(Xi,{},void 0),(0,o.jsx)("span",{children:S("editprofile_editprofile")},void 0)]}),void 0),(0,o.jsx)(Hi,{editProfileFrom:T,uniqueIdChangeInfo:g,nameChangeInfo:v,onUpdated:Z,onCloseModal:U,visible:a,user:e,nickNameControlDay:j},void 0),(0,o.jsx)(Pt,{onCancel:B,showPopover:s,cancelText:S("editprofile_close"),title:S("editprofile_tooltip_title"),description:S("editprofile_tooltip_subtitle")},void 0)]}),void 0)}));var eo=i(33512),to=i(42786),io=i(67850),oo=i(99065),no=i(16790);const ro=(0,we.Z)("div",{target:"edpgb5h0"})((()=>({height:"696px",minWidth:"560px",maxWidth:"700px"})),"label:DivModalContainer;"),ao=(0,we.Z)("div",{target:"edpgb5h1"})((()=>[{padding:"24px",lineHeight:"36px",display:"flex",justifyContent:"space-between",alignItems:"center"}]),"label:DivHeaderContainer;"),lo=(0,we.Z)("h1",{target:"edpgb5h2"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontWeight:"bold",fontFamily:"TikTokFont"}),{fontSize:"24px",color:e.colors.TextPrimary,width:"100%",textAlign:"center"}]),"label:H1Header;"),so=(0,we.Z)("div",{target:"edpgb5h3"})((({theme:e})=>[{width:"32px",height:"32px",cursor:"pointer","&:focus-visible":{outline:`2px solid ${e.colors.Negative}`}},(0,Ie.YJ)({direction:e.direction})]),"label:DivCloseContainer;"),co=(0,we.Z)("div",{target:"edpgb5h4"})((({theme:{colors:e,direction:t}})=>[{display:"flex",alignItems:"center",justifyContent:"space-around",width:"100%",height:"42px",borderBottom:`0.5px solid ${e.LineSecondary}`,marginBottom:"1px"},(0,Ie.YJ)({direction:t})]),"label:DivTabs;"),uo=(0,we.Z)("div",{target:"edpgb5h5"})((({theme:e,isActive:t})=>[(0,Ie.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"medium",typography:"P2"}),{position:"relative",lineHeight:"24px",display:"flex",height:"44px",padding:"10px 24px",cursor:"pointer",columnGap:"5px",borderBottom:t?`2px solid ${e.colors.TextPrimary}`:"none",color:t?e.colors.TextPrimary:e.colors.TextTertiary}]),"label:DivTabItem;"),po=(0,we.Z)("div",{target:"edpgb5h6"})({display:"flex",flexDirection:"column",height:"561px",width:"100%",alignItems:"center",paddingTop:"140px"},"label:DivEmptyListContainer;"),ho=(0,we.Z)("div",{target:"edpgb5h7"})((({theme:e})=>[(0,Ie.GI)({theme:e,typography:"P3",color:"TextPrimary",fontWeight:"bold"}),{textAlign:"center",lineHeight:"36px",fontSize:24,paddingTop:24}]),"label:DivTitle;"),go=(0,we.Z)("div",{target:"edpgb5h8"})((({theme:e})=>[(0,Ie.GI)({theme:e,typography:"P2",color:"TextSecondary",fontWeight:"normal"}),{fontSize:16,lineHeight:"24px",textAlign:"center",paddingTop:"8px"}]),"label:DivDesc;");var mo=i(76235);const vo=(0,we.Z)("div",{target:"eorzdsw0"})({height:"569px",width:"100%",padding:0,marginBottom:"20px",listStyleType:"none",overflowY:"auto","::-webkit-scrollbar":{display:"none"}},"label:DivUserListContainer;"),fo=(0,we.Z)("div",{target:"eorzdsw1"})({width:"100%",display:"flex",justifyContent:"center"},"label:DivLoadingWrapper;"),bo=(0,we.Z)("div",{target:"eorzdsw2"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontWeight:"medium",color:"TextTertiary"}),{lineHeight:"18.2px",paddingInlineStart:"40px",marginTop:"24px",display:"flex",flexDirection:"row",alignItems:"center"}]),"label:DivSuggestedAccountTitleContainer;"),xo=(0,we.Z)(mo.Z,{target:"eorzdsw3"})((({theme:e})=>[(0,Ie.GI)({theme:e,color:"TextQuaternary"}),{marginLeft:"4px",width:"12px",height:"12px"}]),"label:IconExclamationMark;");var _o=i(80984);const yo=(0,we.Z)("div",{target:"es616eb0"})({padding:"16px 40px",display:"flex",flexDirection:"column",width:"100%"},"label:DivUserContainer;"),jo=(0,we.Z)("div",{target:"es616eb1"})({display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"center"},"label:DivUserItem;"),ko=(0,we.Z)(_o.D,{target:"es616eb3"})({position:"relative",display:"flex",flexDirection:"row",":hover":{textDecoration:"none"}},"label:StyledUserInfoLink;"),wo=(0,we.Z)("div",{target:"es616eb4"})((({theme:{direction:e}})=>(0,Ie.YJ)({direction:e,marginStart:12,marginEnd:12})),"label:DivUserInfo;"),Co=(0,we.Z)("div",{target:"es616eb5"})({display:"flex",alignItems:"center"},"label:DivNicknameContainer;"),Io=(0,we.Z)("span",{target:"es616eb6"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontFamily:"TikTokFont",typography:"P1",fontWeight:"bold"}),{maxWidth:220},Ie.wj]),"label:SpanNickname;"),So=(0,we.Z)(Xe.Z,{target:"es616eb7"})((({theme:{direction:e}})=>[{flexShrink:0},(0,Ie.YJ)({direction:e,marginStart:4})]),"label:StyledVerifiedBadgeColor;"),To=(0,we.Z)("p",{target:"es616eb8"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontFamily:"TikTokFont",typography:"P3",color:"TextTertiary"}),{maxWidth:240,marginTop:2},Ie.wj]),"label:PUniqueId;"),Po=(0,we.Z)("div",{target:"es616eb9"})((()=>({display:"flex",flexDirection:"row",alignItems:"center"})),"label:DivCTAContainer;");var Oo=i(72914),Mo=i(11092),Do=i(62591),Lo=i(36580),Fo=i(8919),Uo=i(92639),Bo=i(40013);const Zo=(0,we.Z)("div",{target:"e18e4obn0"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontFamily:"TikTokDisplayFont",fontWeight:"semiBold",typography:"P1"}),{position:"relative",width:"208px",height:"36px",padding:"0",margin:"0",marginTop:"16px"}]),"label:DivShareFollowContainer;"),Eo=(0,we.Z)("div",{target:"e18e4obn1"})((({hide:e,status:t})=>{const i=t===Uo.d0||t===Uo.cn,o=t===Uo.d0||t===Uo.Ix;return[{display:"flex",position:"absolute",left:"0",top:"0",opacity:Number(i),zIndex:e?-1:"unset"},o?{transition:"opacity 0.5s"}:null]}),"label:DivMessageContainer;"),Ro=(0,we.Z)(Bo.Z,{target:"e18e4obn2"})((({theme:{direction:e}})=>(0,Ie.YJ)({direction:e,marginEnd:8})),"label:StyledArrowLeftRight;"),zo=(0,we.Z)(U.W,{target:"e18e4obn3"})((({theme:{direction:e}})=>[{height:"36px",lineHeight:"22px"},(0,Ie.YJ)({direction:e,marginEnd:8})]),"label:StyledMessageButton;"),Wo=(0,we.Z)("div",{target:"e18e4obn4"})((({hide:e,status:t})=>{const i=t===Uo.d0||t===Uo.cn,o=t===Uo.d0||t===Uo.Ix;return[{position:"absolute",left:"0",top:"0",minWidth:"208px",height:"36px",lineHeight:"22px",zIndex:e?-1:"unset",opacity:Number(i)},o?{transition:"opacity 0.5s"}:null]}),"label:DivFollowButtonWrapper;"),qo=(0,we.Z)(U.W,{target:"e18e4obn5"})({minWidth:"208px",lineHeight:"22px"},"label:StyledFollowButton;"),Ao=(0,we.Z)("div",{target:"e18e4obn6"})((({theme:{direction:e,colors:t}})=>[{display:"flex",justifyContent:"center",alignItems:"center",boxSizing:"border-box",width:"36px",height:"36px",border:"1px solid rgba(22, 24, 35, .12)",borderRadius:"4px",cursor:"pointer",position:"relative",backgroundColor:t.BGSecondary2,float:(0,Ie.$K)(e,"end"),":hover":{backgroundColor:t.BGView}}]),"label:DivFollowIconContainer;"),No=(0,we.Z)("div",{target:"e12yehbo0"})((({hide:e})=>[{display:e?"none":"1"}]),"label:DivFollowButtonWrapperV2;");function Ho(e,t){return e?{borderRadius:"8px",backgroundColor:t.BGInput,borderStyle:"none",":hover":{backgroundColor:t.BGInput2}}:{borderRadius:"8px"}}const Go=(0,we.Z)(U.W,{target:"e12yehbo1"})((({isButtonDefaultStyle:e,theme:t})=>[(0,Ie.GI)({theme:t,fontFamily:"TikTokFont",fontWeight:"semiBold"}),{fontSize:"16px",flex:1,lineHeight:"36px"},Ho(e,t.colors)]),"label:StyledFollowButtonV2;"),Vo=(0,p.memo)((function({relation:e,uniqueId:t,nickname:i,style:n={},hideMutualIcon:r=!1}){var a;const{user:l}=null!==(a=(0,D.Lh)((()=>["user"]),[]))&&void 0!==a?a:{},s=(0,p.useRef)(null),d=!!l&&t===l.uniqueId,c=(0,Do.Q)({query:{enter_method:"click_follow"}}),{handleFollow:u,text:h,isFollowing:g,relation:m}=(0,Qe.w)({uniqueId:t,onNeedLogin:c}),[v,f]=(0,p.useState)(!1),b=3===m,x=4===m,_=g&&!(null==l?void 0:l.hasIMPermission),y=x||b||_||g&&(null==l?void 0:l.hasIMPermission);(0,p.useEffect)((()=>{x&&Fo.g.handleBlockShow(!x)}),[x]);const j=(0,p.useCallback)((()=>{f(!0)}),[]),k=(0,p.useCallback)((()=>{f(!1)}),[]),w=(0,p.useCallback)((e=>{x?j():u(e)}),[x,j,u]);return(0,o.jsxs)(o.Fragment,{children:[!d&&(0,o.jsx)(No,Object.assign({ref:s},{children:(0,o.jsxs)(Go,Object.assign({size:"small",buttonTheme:y?"default":"primary","data-e2e":"follow-button",onClick:w,style:n,"aria-label":`${h} ${i}`,isButtonDefaultStyle:null!=y&&y},{children:[2!==e||r?null:(0,o.jsx)(Ro,{},void 0),h]}),void 0)}),void 0),(0,o.jsx)(Lo.y,{visible:v,uniqueId:t,onClose:k},void 0)]},void 0)}));var $o=i(24138),Yo=i(74293),Xo=i(5858);const Ko=(0,we.Z)("div",{target:"eq8nsxf0"})((({hide:e})=>[{display:e?"none":"1"}]),"label:DivMessageButtonContainer;"),Qo=(0,we.Z)(U.W,{target:"eq8nsxf1"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"semiBold"}),{fontSize:"16px",flex:1,minWidth:"113px",lineHeight:"36px",borderStyle:"none",borderRadius:"8px",backgroundColor:e.colors.BGInput,":hover":{backgroundColor:e.colors.BGInput2}}]),"label:StyledMessageButtonV2;"),Jo=(0,p.memo)((function({uniqueId:e,uid:t,style:i={},buttonText:n,enterMethod:r}){var a;const l=(0,c.Q)(),{user:s,language:d="en"}=null!==(a=(0,D.Lh)((()=>["user","language"]),[]))&&void 0!==a?a:{},u=(0,p.useRef)(null),h=!!s&&e===s.uniqueId,g=(0,p.useCallback)((()=>Xo.R.handleEnterChatList(void 0,r)),[r]),{path:m,target:v}=(0,$o.qO)(d);return(0,o.jsx)(o.Fragment,{children:!h&&(0,o.jsx)(Ko,Object.assign({ref:u},{children:(0,o.jsx)(Yo.v,Object.assign({forceSSR:!1,to:`${m}&u=${t}`,target:v,onClick:g,style:{textDecoration:"none"}},{children:(0,o.jsx)(Qo,Object.assign({size:"small",buttonTheme:"default",style:i},{children:l(n||"webdm_message_button")}),void 0)}),void 0)}),void 0)},void 0)})),en=(0,p.memo)((function(e){var t;const{uniqueId:i,activeType:n}=e,{user:a}=null!==(t=(0,D.Lh)((()=>["user"]),[]))&&void 0!==t?t:{},l=!!a&&i===a.uniqueId,s=(0,r.m)(d.z,{selector:e=>{const t=e.users[i];if(!t)return null;const{verified:o,avatarThumb:n,nickname:r,roomId:a,id:l,relation:s,secUid:d}=t;return{verified:o,avatarThumb:n,nickname:r,roomId:a,id:l,uniqueId:i,relation:s,secUid:d}},dependencies:[i]}),{verified:c,nickname:u,avatarThumb:h,relation:g,secUid:m,id:v}=(0,O.m7)(s),f="profile_popup",b=(0,ut.CN)({user:s,enterMethod:f}),x=(0,p.useCallback)((e=>{(0,_.UW)(e)}),[]);return(0,o.jsx)(yo,{children:(0,o.jsxs)(jo,{children:[(0,o.jsxs)(ko,Object.assign({uniqueId:i,secUid:m,teaParams:b,onClick:x},{children:[(0,o.jsx)(Oo.q,{size:48,src:h},void 0),(0,o.jsxs)(wo,{children:[(0,o.jsxs)(Co,{children:[(0,o.jsx)(Io,{children:u},void 0),c&&(0,o.jsx)(So,{width:14,height:14,style:{verticalAlign:"middle",marginLeft:4}},void 0)]},void 0),(0,o.jsx)(To,{children:i},void 0)]},void 0)]}),void 0),(0,o.jsxs)(Po,{children:[l&&(0,o.jsx)(_o.D,Object.assign({uniqueId:i,secUid:m,teaParams:b,onClick:x},{children:(0,o.jsx)(Mo.Z,{width:16,height:16},void 0)}),void 0),!l&&("friend"===n?(0,o.jsx)(Jo,{uniqueId:i,uid:v,style:{lineHeight:"24px"},enterMethod:f},void 0):(0,o.jsx)(Vo,{relation:g,uniqueId:i,nickname:u,style:{lineHeight:"24px"},buttonText:"profile_page_message_btn",hideMutualIcon:!0},void 0))]},void 0)]},void 0)},void 0)}));var tn=i(95925),on=i(23739),nn=i(74195),rn=i(75125);const an=(0,p.memo)((function(e){const{list:t,loading:i,hasMore:r,isProfile:a,activeType:l,secUid:s,onOpenSuggestedAccountPersonalizeModal:d,onCloseFollowModal:u}=e,h=(0,p.useRef)(null),g=(0,n.q)(eo.G),m=(0,ot.n4)(!0),v=(0,c.Q)(),f=(0,p.useCallback)((()=>{s&&r&&!i&&("others_following"===l?g.getTargetFollowingList({secUid:s}):"others_follower"===l?g.getTargetFollowerList({secUid:s}):"friend"===l?g.getFriendsList({}):"suggested_follow"===l&&g.getSuggestedList({isNonPersonalized:!m}))}),[g,l,s,r,i]);(0,tn.su)({elemRef:h,onHitBottom:f,bottomThreshold:200,throttle:200});const b=(0,it.GN)()&&"suggested_follow"===l;(0,p.useEffect)((()=>{b&&rn.k.handleShowSuggestedAccountInfo()}),[b]);const x=(0,p.useCallback)((()=>{u(),d()}),[]);return(0,o.jsxs)(vo,Object.assign({ref:h},{children:[b&&(0,o.jsxs)(bo,{children:[(0,o.jsx)(nn.iK,{children:v("sug_accounts")},void 0),(0,o.jsx)(xo,{onClick:x},void 0)]},void 0),t.map((e=>e?(0,o.jsx)("li",{children:(0,o.jsx)(en,{uniqueId:e,isPersonalFollowerTab:a&&"others_follower"===l,activeType:l},void 0)},e):null)),i&&r&&t.length>1?(0,o.jsx)(fo,{children:(0,o.jsx)(on.g,{},void 0)},void 0):null]}),void 0)})),ln={others_follower:{privateTitle:"profile_page_followerList_private_header",privateDesc:"profile_page_followerList_private_body",emptyTitle:"profile_page_profile_follower_tab",emptyDesc:"profile_page_profile_follower_view_desc"},others_following:{privateTitle:"profile_page_followingList_private_header",privateDesc:"profile_page_followingList_private_body",emptyTitle:"profile_page_profile_following_tab",emptyDesc:"profile_page_profile_following_view_desc"},follower:{privateTitle:"",privateDesc:"",emptyTitle:"profile_page_profile_follower_tab",emptyDesc:"profile_page_profile_follower_desc"},following:{privateTitle:"",privateDesc:"",emptyTitle:"profile_page_profile_following_tab",emptyDesc:"profile_page_profile_following_desc"},suggest:{privateTitle:"",privateDesc:"",emptyTitle:"",emptyDesc:""},suggested_follow:{privateTitle:"",privateDesc:"",emptyTitle:"profile_page_suggested_tab",emptyDesc:""},friend:{privateTitle:"",privateDesc:"",emptyTitle:"",emptyDesc:"profile_page_profile_friends_desc"}};var sn;!function(e){e.ClickFollowing="click_following",e.ClickFollowers="click_followers",e.ClickSuggested="click_suggested",e.ClickFriends="click_friends"}(sn||(sn={}));const dn=(e,t)=>{"others_following"===e?mt.W.event("click_following",{to_user_id:t}):"others_follower"===e?mt.W.event("click_followers",{to_user_id:t}):"suggested_follow"===e?mt.W.event("click_suggested",{to_user_id:t}):"friend"===e&&mt.W.event("click_friends",{to_user_id:t})},cn=(0,p.memo)((({visible:e=!1,onCloseModal:t,user:i,stats:r,isProfile:a,entranceType:l="others_following",onOpenSuggestedAccountPersonalizeModal:s})=>{var d,u,h,g,m,v,f,b,x,_,y,j,k,w;const C=(0,c.Q)(),{colors:I}=(0,P.u)(),{uniqueId:S,secUid:T,id:M}=i,[D,L]=(0,p.useState)(l),[F,U]=(0,n.b)(eo.G,{selector:e=>{var t,i,o,n;return{others_follower:Object.assign(Object.assign({},e.others_follower),{hasMore:e.others_follower.hasMore,statusCode:e.others_follower.statusCode,total:null!==(t=e.others_follower.total)&&void 0!==t?t:0}),others_following:Object.assign(Object.assign({},e.others_following),{hasMore:e.others_following.hasMore,statusCode:e.others_following.statusCode,total:null!==(i=e.others_following.total)&&void 0!==i?i:0}),friend:Object.assign(Object.assign({},e.friend),{hasMore:e.friend.hasMore,statusCode:e.friend.statusCode,total:null!==(o=e.friend.total)&&void 0!==o?o:0}),suggested_follow:Object.assign(Object.assign({},e.suggested_follow),{hasMore:e.suggested_follow.hasMore,statusCode:e.suggested_follow.statusCode,total:null!==(n=e.suggested_follow.total)&&void 0!==n?n:0})}},dependencies:[]}),{loading:B,list:Z}=F.others_follower,{loading:E,list:R}=F.others_following,{loading:z,list:W}=F.friend,{loading:q,list:A}=F.suggested_follow,N=(0,ot.n4)(!0);(0,p.useEffect)((()=>{T&&("others_following"===D&&!R.length&&E&&U.getTargetFollowingList({secUid:T}),"others_follower"===D&&!Z.length&&B&&U.getTargetFollowerList({secUid:T}),"friend"===D&&!W.length&&z&&U.getFriendsList({}),"suggested_follow"===D&&!A.length&&q&&U.getSuggestedList({isNonPersonalized:!N}))}),[T,D,U,F,Z.length,B,R.length,E,W.length,z,A,q,N]);const H=(0,p.useCallback)((e=>{27===e.keyCode&&(e.stopPropagation(),e.preventDefault(),t())}),[t]),G=(0,p.useCallback)((e=>()=>{dn(e,M),L(e)}),[M]),V=null===(d=F[D])||void 0===d?void 0:d.loading,$=10222===(null===(u=F[D])||void 0===u?void 0:u.statusCode),Y=(0,it.GN)()||N;return(0,o.jsx)(to.S,Object.assign({isMobile:!1,componentName:"user-follow-modal"},{children:(0,o.jsx)(Dt.d,Object.assign({compact:!0,style:{background:I.BGInput},isOpen:e,closeOnBackdropClick:!0,closeOnEsc:!0,onClose:t},{children:(0,o.jsxs)(ro,Object.assign({role:"dialog","data-e2e":"follow-info-popup"},{children:[(0,o.jsxs)(ao,{children:[(0,o.jsx)(lo,{children:S},void 0),(0,o.jsx)(so,Object.assign({"aria-label":C("Close_button"),role:"button",tabIndex:0,onKeyDown:H,onClick:t,"data-e2e":"follow-popup-close"},{children:(0,o.jsx)(io.l,{size:32,color:I.TextSecondary},void 0)}),void 0)]},void 0),(0,o.jsxs)(co,{children:[(0,o.jsxs)(uo,Object.assign({isActive:"others_following"===D,onClick:G("others_following")},{children:[(0,o.jsx)("div",{children:C("profile_page_profile_following_tab")},void 0),(0,o.jsx)("strong",Object.assign({title:C("profile_page_profile_following_tab")},{children:r?(0,O.BT)(r.followingCount):"--"}),void 0)]}),void 0),(0,o.jsxs)(uo,Object.assign({isActive:"others_follower"===D,onClick:G("others_follower")},{children:[(0,o.jsx)("div",{children:C("profile_page_profile_follower_tab")},void 0),(0,o.jsx)("strong",Object.assign({title:C("profile_page_profile_follower_tab")},{children:r?(0,O.BT)(r.followerCount):"--"}),void 0)]}),void 0),a&&(0,o.jsxs)(uo,Object.assign({isActive:"friend"===D,onClick:G("friend")},{children:[(0,o.jsx)("div",{children:C("profile_page_friends_tab")},void 0),(0,o.jsx)("strong",Object.assign({title:C("profile_page_friends_tab")},{children:r?(0,O.BT)(r.friendCount):"--"}),void 0)]}),void 0),Y&&(0,o.jsx)(uo,Object.assign({isActive:"suggested_follow"===D,onClick:G("suggested_follow")},{children:C("profile_page_suggested_tab")}),void 0)]},void 0),0===(null===(g=null===(h=F[D])||void 0===h?void 0:h.list)||void 0===g?void 0:g.length)&&V&&(0,o.jsx)(po,{children:(0,o.jsx)(on.g,{},void 0)},void 0),!V&&0===(null===(v=null===(m=F[D])||void 0===m?void 0:m.list)||void 0===v?void 0:v.length)&&($?(0,o.jsxs)(po,{children:[(0,o.jsx)(oo.H,{size:72,color:"TextQuaternary"},void 0),(0,o.jsx)(ho,{children:C(null===(f=ln[D])||void 0===f?void 0:f.privateTitle)},void 0),(0,o.jsx)(go,{children:C(null===(b=ln[D])||void 0===b?void 0:b.privateDesc,{nickname:S})},void 0)]},void 0):(0,o.jsxs)(po,{children:[(0,o.jsx)(no.r,{size:72,color:"TextQuaternary"},void 0),(0,o.jsx)(ho,{children:C(null===(x=ln[D])||void 0===x?void 0:x.emptyTitle)},void 0),(0,o.jsx)(go,{children:C(null===(_=ln[D])||void 0===_?void 0:_.emptyDesc,{nickname:S})},void 0)]},void 0)),(0,o.jsx)(an,{list:null!==(j=null===(y=F[D])||void 0===y?void 0:y.list)&&void 0!==j?j:[],loading:null===(k=F[D])||void 0===k?void 0:k.loading,hasMore:null===(w=F[D])||void 0===w?void 0:w.hasMore,isProfile:!0,activeType:D,secUid:null!=T?T:"",onOpenSuggestedAccountPersonalizeModal:s,onCloseFollowModal:t},void 0)]}),void 0)}),void 0)}),void 0)}));var un=i(64504),pn=i(92988),hn=i(20143);const gn=(0,p.memo)((function({user:e,style:t={}}){var i,n;const r=(0,c.Q)(),{user:a,language:l="en"}=null!==(i=(0,D.Lh)((()=>["user","language"]),[]))&&void 0!==i?i:{},s=(0,p.useRef)(null),d=(0,p.useRef)(null),{relation:u,uniqueId:h}=e,g=!!a&&h===a.uniqueId,m=(0,Do.Q)({query:{enter_method:"click_follow"}}),{handleFollow:v,text:f,isFollowing:b,relation:x}=(0,Qe.w)({uniqueId:null!==(n=null==e?void 0:e.uniqueId)&&void 0!==n?n:"",onNeedLogin:m}),[_,y]=(0,p.useState)(!1),j=3===x,k=4===x,w=b&&!(null==a?void 0:a.hasIMPermission),C=k||j||w,I=(0,p.useCallback)((()=>Xo.R.handleEnterChatList()),[]);(0,p.useEffect)((()=>{k&&Fo.g.handleBlockShow(!k)}),[k]);const S=(0,p.useCallback)((()=>{y(!0)}),[]),T=(0,p.useCallback)((()=>{y(!1)}),[]),P=(0,p.useCallback)((e=>{k?S():v(e)}),[k,S,v]),{path:O,target:M}=(0,$o.qO)(l);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Zo,Object.assign({style:t},{children:[!g&&(0,o.jsx)(Uo.ZP,Object.assign({timeout:300,in:!b||!(null==a?void 0:a.hasIMPermission),nodeRef:s},{children:i=>(0,o.jsx)(Wo,Object.assign({ref:s,status:i,style:t},{children:(0,o.jsxs)(qo,Object.assign({size:"medium",buttonTheme:C?"default":"primary",hide:b&&(null==a?void 0:a.hasIMPermission),"data-e2e":"follow-button",onClick:P,style:t,"aria-label":`${f} ${null==e?void 0:e.nickname}`},{children:[2===u?(0,o.jsx)(Ro,{},void 0):null,f]}),void 0)}),void 0)}),void 0),!g&&(null==a?void 0:a.hasIMPermission)&&(0,o.jsx)(Uo.ZP,Object.assign({timeout:300,in:b,nodeRef:d},{children:t=>(0,o.jsxs)(Eo,Object.assign({hide:!b,status:t,ref:d},{children:[(0,o.jsx)(Yo.v,Object.assign({forceSSR:!1,to:`${O}&u=${null==e?void 0:e.id}`,target:M,onClick:I,style:{textDecoration:"none"}},{children:(0,o.jsx)(zo,Object.assign({size:"medium",buttonTheme:"line"},{children:r("webdm_message_button")}),void 0)}),void 0),(0,o.jsx)(hn.u,Object.assign({overlay:r("user_action_unfollow"),placement:"bottom"},{children:(0,o.jsx)(Ao,Object.assign({onClick:v},{children:2===u?(0,o.jsx)(un.Z,{width:20,height:20},void 0):(0,o.jsx)(pn.Z,{width:20,height:20},void 0)}),void 0)}),void 0)]}),void 0)}),void 0)]}),void 0),(0,o.jsx)(Lo.y,{visible:_,uniqueId:h,onClose:T},void 0)]},void 0)}));var mn=i(48999),vn=i(2412),fn=i(15377);const bn=(0,we.Z)("div",{target:"eht0fek0"})((({theme:e})=>(0,Ie.GI)({theme:e,fontFamily:"TikTokDisplayFont",fontWeight:"semiBold",typography:"P2"})),{display:"flex",alignItems:"flex-end",flexWrap:"wrap",marginTop:"5px"},"label:DivShareLinks;"),xn=(0,we.Z)("span",{target:"eht0fek1"})((({theme:{colors:e}})=>({display:"inline-block",border:`.5px solid ${e.LineSecondary}`,height:"16px",margin:"0 12px"})),"label:SpanShareLinksSpliter;"),_n=(0,we.Z)("span",{target:"eht0fek2"})((({theme:{direction:e}})=>(0,Ie.YJ)({direction:e,paddingStart:2})),{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},"label:SpanLink;"),yn=({theme:e,red:t})=>[(0,Ie.GI)({theme:e,fontFamily:"TikTokDisplayFont",fontWeight:"semiBold",lineHeight:"18px",typography:"P2",color:t?"Primary":"TextPrimary",isLink:!0}),{display:"flex",alignItems:"flex-end",fontStyle:"normal",height:"22px",maxWidth:"256px"}],jn=(0,we.Z)("p",{target:"eht0fek3"})(yn,"label:PShareError;"),kn=(0,we.Z)("a",{target:"eht0fek4"})(yn,"label:ABioLink;"),wn=(0,p.memo)((function({user:e}){var t,i;const n=(0,c.Q)(),{user:r}=null!==(t=(0,D.Lh)((()=>["user","language"]),[]))&&void 0!==t?t:{},{bioLink:a={},commerceUserInfo:l={},uniqueId:s}=e,d=!!r&&s===r.uniqueId,{shouldShowDownloadLink:u,shouldShowBioLink:h,secDownloadLink:g,secBioLink:m,showDownloadLink:v}=function({isProfile:e,user:t}){var i,o,n;const{language:r="en"}=null!==(i=(0,D.Lh)((()=>["language"]),[]))&&void 0!==i?i:{},{secret:a,relation:l,bioLink:s,commerceUserInfo:d}=t,c=[],u=[];let p=!1,h=!1,g=null==s?void 0:s.link;function m(e){return`https://www.tiktok.com/link/v2?aid=1988&lang=${r}&scene=bio_url&target=${encodeURIComponent(e)}`}(null==s?void 0:s.link)&&(p=!0,g=m(s.link),a&&(p=!1,e&&(p=!0),1===l&&(p=!0)),5===l&&(p=!1),9===s.risk&&(p=!1,e&&(p=!0)));const v=null===(o=null==d?void 0:d.downLoadLink)||void 0===o?void 0:o.ios,f=null===(n=null==d?void 0:d.downLoadLink)||void 0===n?void 0:n.android;return(null==d?void 0:d.commerceUser)&&(v||f)&&(h=!0,f&&(u.push(f),c.push(m(f))),v&&(u.push(v),c.push(m(v)))),{shouldShowDownloadLink:h,shouldShowBioLink:p,secDownloadLink:c,secBioLink:g,showDownloadLink:u}}({isProfile:d,user:e});function f(e){return e.split(/[\s\n\r\t]+/)[0].replace(/^https?:\/\//,"")}const b=(0,p.useMemo)((()=>{var e;return(0,o.jsx)(bn,{children:(0,o.jsxs)(kn,Object.assign({target:"_blank",rel:"noindex nofollow noreferrer noopener",red:!0,href:g[0]},{children:[(0,o.jsx)(mn.Z,{width:18,height:18,style:{flexShrink:0}},void 0),(0,o.jsx)(_n,{children:f(null!==(e=v[0])&&void 0!==e?e:"")},void 0)]}),void 0)},void 0)}),[v,g]);return h?(0,o.jsxs)(bn,{children:[9!==(null==a?void 0:a.risk)?(0,o.jsxs)(kn,Object.assign({red:null==l?void 0:l.commerceUser,target:"_blank",rel:"noindex nofollow noreferrer noopener",href:null!=m?m:"","data-e2e":"user-link"},{children:[(0,o.jsx)(vn.Z,{fill:(null==l?void 0:l.commerceUser)?"#fe2c55":"currentColor",width:18,height:18,style:{flexShrink:0}},void 0),(0,o.jsx)(_n,{children:f(null!==(i=null==a?void 0:a.link)&&void 0!==i?i:"")},void 0)]}),void 0):(0,o.jsxs)(jn,Object.assign({red:!0},{children:[(0,o.jsx)(fn.Z,{width:18,height:18,fill:"#ff4c3a",style:{flexShrink:0}},void 0),(0,o.jsx)(_n,{children:n("profile_self_link_unavailable")},void 0)]}),void 0),u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(xn,{},void 0),b]},void 0)]},void 0):u?b:null}));var Cn=i(22074);const In=(0,we.Z)("h3",{target:"e1457k4r0"})({display:"flex",alignItems:"center",marginTop:"22px",color:"rgba(18, 18, 18, .75)"},"label:H3CountInfos;"),Sn=(0,we.Z)("div",{target:"e1457k4r1"})((({theme:e,theme:{direction:t},isShowFollowInfo:i,isUIRearrange:o})=>[(0,Ie.GI)({theme:e,fontFamily:o?"TikTokFont":"TikTokDisplayFont",fontWeight:o?"bold":"semiBold",typography:o?"P2":"P1",color:"TextPrimary"}),{display:"flex",direction:"ltr",alignItems:"baseline",cursor:i?"pointer":"",":not(:last-child)":[(0,Ie.YJ)({direction:t,marginEnd:20})]}]),"label:DivNumber;"),Tn=(0,we.Z)("span",{target:"e1457k4r2"})((({theme:e,isShowFollowInfo:t})=>[(0,Ie.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"normal",typography:"P2",color:"TextSecondary"}),{fontSize:"16px",lineHeight:"20px",display:"inline-block",marginLeft:"6px",":hover":{textDecoration:t?"underline":"none"}}]),"label:SpanUnit;"),Pn=(0,we.Z)("h2",{target:"e1457k4r3"})((({isUIRearrange:e,theme:t,theme:{direction:i}})=>[(0,Ie.YJ)({direction:i,textAlign:"start"}),(0,Ie.GI)({theme:t,fontFamily:"TikTokFont",fontWeight:"normal",typography:"P2",color:"TextPrimary"}),{whiteSpace:"pre-line",marginTop:e?"16px":"10px"}]),"label:H2ShareDesc;"),On=(0,we.Z)(st.Lp,{target:"e1457k4r4"})({marginBottom:"25px"},"label:StyledSkeletonContainer;"),Mn=(0,we.Z)(Cn.Od.Avatar,{target:"e1457k4r5"})((({theme:e})=>(0,st.nH)(e)),"label:StyledSkeletonAvatar;"),Dn=(0,we.Z)("span",{target:"e1457k4r6"})((({theme:e,theme:{direction:t}})=>[(0,Ie.YJ)({direction:t,marginStart:"8px"}),(0,Ie.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"normal",typography:"P2",color:"TextTertiary"}),{overflow:"hidden",textOverflow:"ellipsis"}]),"label:SpanBAInfo;"),Ln=(0,we.Z)("h1",{target:"e1457k4r8"})(st.RZ,{wordBreak:"break-word"},"label:H1ShareTitle;"),Fn=(0,we.Z)("div",{target:"e1a7aieu0"})({minHeight:"255px",maxWidth:"700px"},"label:DivModalContainer;"),Un=(0,we.Z)("div",{target:"e1a7aieu1"})((({theme:{colors:e}})=>[{padding:"24px",lineHeight:"36px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`0.5px solid ${e.LineSecondary}`}]),"label:DivHeaderContainer;"),Bn=(0,we.Z)("h1",{target:"e1a7aieu2"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontWeight:"bold",fontFamily:"TikTokFont"}),{fontSize:"24px",color:e.colors.TextPrimary,width:"100%"}]),"label:H1Header;"),Zn=(0,we.Z)("div",{target:"e1a7aieu3"})((({theme:e})=>[{width:"32px",height:"32px",cursor:"pointer","&:focus-visible":{outline:`2px solid ${e.colors.Negative}`}},(0,Ie.YJ)({direction:e.direction})]),"label:DivCloseContainer;"),En=(0,we.Z)("div",{target:"e1a7aieu4"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontWeight:"normal",fontFamily:"TikTokFont",color:"TextSecondary"}),{padding:"24px",whiteSpace:"pre-wrap"}]),"label:DivContentContainer;"),Rn=(0,we.Z)("div",{target:"e1a7aieu5"})((({theme:{colors:e}})=>({padding:"24px",width:"100%",borderTop:`0.5px solid ${e.LinePrimary2}`,display:"flex",justifyContent:"flex-end"})),"label:DivModalFooter;"),zn=(0,we.Z)("span",{target:"e1a7aieu6"})((({theme:e})=>[(0,Ie.GI)({theme:e,color:"Primary"}),{cursor:"pointer",":hover":{textDecoration:"underline"}}]),"label:SpanManagePersonalizedFeeds;"),Wn=(0,we.Z)(Yo.v,{target:"e1a7aieu7"})((({theme:e})=>[(0,Ie.GI)({theme:e,color:"Primary"})]),"label:LinkPrivacy;");function qn(){return(0,o.jsx)(T.Y5,Object.assign({hideActions:!0},{children:(0,o.jsxs)(On,{children:[(0,o.jsx)(Mn,{},void 0),(0,o.jsxs)(st.Kd,{children:[(0,o.jsx)(st.Mj,{},void 0),(0,o.jsx)(st.zk,{},void 0)]},void 0)]},void 0)}),void 0)}const An=(0,p.memo)((function({detailInfo:e}){const t=(0,c.Q)(),{language:i="en",user:r}=(0,O.m7)((0,D.Lh)((()=>["language","user"]),[])),{user:a,stats:l}=e,{uniqueId:s,secUid:u,stateControlledMedia:h,nickname:g,relation:m,privateAccount:v,secret:f}=(0,O.m7)(a),{isFollowing:b}=(0,Qe.w)({uniqueId:s}),x=(0,Ne.JW)({uniqueId:s,secUid:u}),_=4===m||5===m||(null!=v?v:f)&&!(x||1===m||2===m),[y,j]=(0,p.useState)(!1),[k,w]=(0,p.useState)("others_following"),C=(0,Je.gL)(s),{isRTL:I}=(0,et.Y)(),S=null==r?void 0:r.ftcUser,M=Boolean(r),L=(0,n.q)(tt.rE),{getUserDetail:F}=(0,n.q)(d.z),B=(0,it.lC)();(0,p.useEffect)((()=>{j(!1)}),[s]),(0,p.useEffect)((()=>{l&&!l.needFix||!s||F({uniqueId:s,secUid:u,language:i})}),[F,l,s,u,i]),(0,p.useEffect)((()=>{!(null==a?void 0:a.uniqueIdModifyTime)&&s&&F({uniqueId:s,secUid:u,language:i})}),[F,s,u,i,null==a?void 0:a.uniqueIdModifyTime]);const Z=(0,p.useMemo)((()=>{var e;return x?null:{report_type:"user",object_id:null!==(e=null==a?void 0:a.id)&&void 0!==e?e:"",owner_id:null==a?void 0:a.id,secUid:u,nickname:g,lang:i}}),[i,x,null==a?void 0:a.id,u,g]),E=(0,p.useMemo)((()=>({marginTop:"8px"})),[]),R=(0,p.useCallback)((e=>t=>{var i;B&&(M?(t.preventDefault(),_||(dn(e?"others_following":"others_follower",null!==(i=null==a?void 0:a.id)&&void 0!==i?i:""),w(e?"others_following":"others_follower"),j(!0))):L.openModal({query:{enter_method:e?"click_following":"click_followers"}}))}),[M,B,L,_,null==a?void 0:a.id]),z=(0,p.useCallback)((()=>{j(!1)}),[]),{handleOpenModal:W,PersonalizedModal:q}=(0,ot.DI)({isFeed:!0}),{handleOpenModal:A,SuggestedAccountPersonalizeModal:N}=(({onOpenPersonalizedModal:e})=>{const t=(0,c.Q)(),{colors:i}=(0,P.u)(),n=(0,nn.SF)({closeOnBackdropClick:!0,closeOnEsc:!0,onCloseComplete:e=>{e&&rn.k.handleCloseManageFeedsHalfSheet()}}),r=(0,p.useCallback)((()=>{n.open(),rn.k.handleShowManageFeedsHalfSheet()}),[n]),a=(0,p.useCallback)((()=>{n.close("closeButton")}),[n]);return{SuggestedAccountPersonalizeModal:(0,o.jsx)(to.S,Object.assign({isMobile:!1,componentName:"suggested-account-personalize-modal"},{children:(0,o.jsxs)(nn.AR,Object.assign({width:"Compact",height:"Compact"},n,{closeOnBackdropClick:!0,closeOnEsc:!0},{children:[(0,o.jsxs)(Fn,Object.assign({role:"dialog","data-e2e":"follow-info-popup"},{children:[(0,o.jsxs)(Un,{children:[(0,o.jsx)(Bn,{children:t("sug_accounts")},void 0),(0,o.jsx)(Zn,Object.assign({"aria-label":t("Close_button"),role:"button",tabIndex:0,onClick:a},{children:(0,o.jsx)(io.l,{size:32,color:i.TextSecondary},void 0)}),void 0)]},void 0),(()=>{const r=t("nonpersonalizedFeeds_profile_suggestedAccounts_info_body",{},"When personalized feeds are turned on, accounts are suggested based on people you may know, including connections of people you follow. You can change whatâs suggested to you in %1$s. \n\nYour account may also be suggested to people you may know. Change your discoverability anytime in your %2$s settings."),a=r.indexOf("%1$s"),l=r.indexOf("%2$s"),s=r.substring(0,a),d=r.substring(a+4,l),c=r.substring(l+4)+" ";return(0,o.jsxs)(En,{children:[s,(()=>{const i=t("nonpersonalizedFeeds_profile_suggestedAccounts_info_bodyManagePersonFeedsVariable",{},"Manage personalized feed");return(0,o.jsx)(zn,Object.assign({onClick:()=>{e(),rn.k.handleClickInManageFeedsHalfSheet(),n.close()}},{children:i}),void 0)})(),d,(()=>{const e=t("nonpersonalizedFeeds_profile_suggestedAccounts_info_bodyPrivacyVariable",{},"Privacy");return(0,o.jsx)(Wn,Object.assign({to:"/setting",style:{color:i.Primary},onClick:()=>{rn.k.handleClickInManageFeedsHalfSheet()}},{children:e}),void 0)})(),c,(0,o.jsx)("a",Object.assign({href:"https://support.tiktok.com/en/account-and-privacy/account-privacy-settings/suggested-accounts",target:"_blank",rel:"noreferrer",style:{color:i.Primary},onClick:()=>{rn.k.handleClickInManageFeedsHalfSheet()}},{children:t("nonpersonalizedFeeds_modal_allScenarios_body_learnMore_articleLink",{},"Learn more")}),void 0)]},void 0)})()]}),void 0),(0,o.jsx)(Rn,{children:(0,o.jsx)(U.W,Object.assign({buttonTheme:"primary",size:"medium",onClick:a},{children:t("nonpersonalizedFeeds_turnOn_modal_toggle_CTA")}),void 0)},void 0)]}),void 0)}),void 0),handleOpenModal:r,handleCloseModal:a}})({onOpenPersonalizedModal:W});if(!a)return(0,o.jsx)(qn,{},void 0);const{verified:H,signature:G,commerceUserInfo:V={},isUnderAge18:$,id:Y,isEmbedBanned:X=!1,profileEmbedPermission:K,eventList:Q}=a,{category:J,categoryButton:ee=!1}=null!=V?V:{},te=G||t("No bio yet."),ie=(0,nt.c)(`https://www.tiktok.com${(0,rt.ylP)({uniqueId:s,secUid:u})}`,{sender_device:"pc"}),oe=Boolean(f)||3===K||$,ne=2===K||X,re=(null==Q?void 0:Q.length)?Q.map((e=>({eventId:e.id,eventStartTime:Number(e.start_time),authorId:Y}))):void 0,ae=(0,o.jsxs)(In,{children:[(0,o.jsxs)(Sn,Object.assign({isShowFollowInfo:B&&!_,onClick:R(!0)},{children:[(0,o.jsx)("strong",Object.assign({title:t("Following"),"data-e2e":"following-count"},{children:l?(0,O.BT)(l.followingCount):"--"}),void 0),(0,o.jsx)(Tn,Object.assign({"data-e2e":"following",isShowFollowInfo:B&&!_},{children:t("Following")}),void 0)]}),void 0),(0,o.jsxs)(Sn,Object.assign({isShowFollowInfo:B&&!_,onClick:R(!1)},{children:[(0,o.jsx)("strong",Object.assign({title:t("Followers"),"data-e2e":"followers-count"},{children:l?(0,O.BT)(l.followerCount):"--"}),void 0),(0,o.jsx)(Tn,Object.assign({"data-e2e":"followers",isShowFollowInfo:B&&!_},{children:t("Followers")}),void 0)]}),void 0),(0,o.jsxs)(Sn,Object.assign({isShowFollowInfo:!1},{children:[(0,o.jsx)("strong",Object.assign({title:t("Likes"),"data-e2e":"likes-count"},{children:l?(0,O.BT)(Number(l.heart)||l.heartCount):"--"}),void 0),(0,o.jsx)(Tn,Object.assign({"data-e2e":"likes"},{children:t("Likes")}),void 0)]}),void 0)]},void 0);return(0,o.jsxs)(T.Y5,Object.assign({embedType:1,embedCode:C,hideActions:x,isProfile:x,isFollowing:b,isEmbedDisabled:oe,isEmbedBanned:ne,uniqueId:s,itemListKey:"user",report:Z,shareUrl:ie,uid:Y,style:{maxWidth:"624px",paddingRight:I?0:"92px",paddingLeft:I?"92px":0,minHeight:"140px",display:"flex",flexDirection:"column"}},{children:[(0,o.jsxs)(st.en,{children:[(0,o.jsx)(vt,{user:a,e2eTag:"user-avatar"},void 0),(0,o.jsxs)(st.bU,{children:[(0,o.jsxs)(Ln,Object.assign({verified:H,private:f,"data-e2e":"user-title"},{children:[s," ",H&&(0,o.jsx)(Xe.Z,{width:20,height:20,"data-e2e":"user-bluev"},void 0)," ",f&&(0,o.jsx)(Ke.Z,{width:20,height:20},void 0)]}),void 0),(0,o.jsxs)(st.ZH,Object.assign({"data-e2e":"user-subtitle"},{children:[g,ee&&J&&(0,o.jsx)(Dn,{children:J},void 0)]}),void 0),(0,o.jsx)(at.i,{style:E,stateControlledMedia:h,labelType:0,isUserPage:!0},void 0),!x&&(0,o.jsx)(gn,{user:a},void 0),x&&!S&&(0,o.jsx)(Ji,{user:a},void 0)]},void 0)]},void 0),ae,(0,o.jsx)(Pn,Object.assign({"data-e2e":"user-bio"},{children:te}),void 0),(0,o.jsx)(wn,{user:a},void 0),re&&(0,o.jsx)("div",Object.assign({style:{marginTop:"13.5px"}},{children:(0,o.jsx)(lt.r,{displayMultiEvents:!0,eventList:re},void 0)}),void 0),y&&!S&&(0,o.jsx)(cn,{visible:y,onCloseModal:z,user:a,isProfile:x,stats:l,entranceType:k,onOpenSuggestedAccountPersonalizeModal:A},void 0),N,q]}),void 0)}));var Nn=i(2606),Hn=i(84033),Gn=i(7832),Vn=i(10654),$n=i(54649),Yn=i(96143),Xn=i(62671),Kn=i(69705),Qn=i(42589),Jn=i(57569);const er=(0,we.Z)("div",{target:"ejxl5ua0"})((({theme:e})=>({width:"100%",display:"flex",alignItems:"center",padding:"12px 0",paddingInlineEnd:"24px",boxSizing:"border-box",borderRadius:"8px",cursor:"pointer",userSelect:"none",":hover":{background:e.colors.BGView}})),"label:DivPlaylistCardContainer;"),tr=(0,we.Z)("p",{target:"ejxl5ua1"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"semiBold",typography:"P2",color:"TextSecondary"}),{minWidth:"36px",justifyContent:"center",marginInlineEnd:"12px",textAlign:"center",alignItems:"center",fontSize:"16px",lineHeight:"20px"}]),"label:PIndex;"),ir=(0,we.Z)("img",{target:"ejxl5ua2"})({width:"80px",height:"80px",objectFit:"cover",flexShrink:0,borderRadius:"2px"},"label:ImgVideoCover;"),or=(0,we.Z)("div",{target:"ejxl5ua3"})({width:"80px",height:"80px",flexShrink:0,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"2px"},"label:DivCoverContainer;"),nr=(0,we.Z)("div",{target:"ejxl5ua4"})({display:"flex",flexDirection:"column",justifyContent:"space-between",marginInlineStart:"20px",flexGrow:1,height:"80px",padding:"10px 0",boxSizing:"border-box"},"label:DivPlaylistInfoContainer;"),rr=(0,we.Z)("p",{target:"ejxl5ua5"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"bold",typography:"P3",color:"TextPrimary"}),(0,Ie.FC)(1),{wordBreak:"break-word",fontSize:"16px",lineHeight:"24px"}]),"label:PTitle;"),ar=(0,we.Z)("p",{target:"ejxl5ua6"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"normal",typography:"P4",color:"TextTertiaryAlt"}),{fontSize:"14px",lineHeight:"22px"}]),"label:PDesc;"),lr=(0,we.Z)("div",{target:"ejxl5ua7"})((({theme:e})=>({width:"36px",height:"28px",display:"flex",justifyContent:"center",alignItems:"center","*":{fill:e.colors.TextSecondary}})),"label:DivIconWrapper;"),sr=(0,p.memo)((({id:e,index:t})=>{const i=(0,c.Q)(),{name:n="",cover:a,videoCount:l}=(0,O.m7)((0,r.m)(se.y,{selector:t=>t[e],dependencies:[e]})),s=i("playlist_webapp_profileview_playlists_numbervid",{num:l,number:(0,O.BT)(l)}),d=(0,Jn.xx)(n);return(0,o.jsxs)(er,{children:[(0,o.jsx)(tr,{children:t<9?`0${t+1}`:t+1},void 0),a?(0,o.jsx)(ir,{src:a},void 0):(0,o.jsx)(or,{children:(0,o.jsx)(Kn._,{size:40},void 0)},void 0),(0,o.jsxs)(nr,{children:[(0,o.jsxs)(rr,{children:[d,n]},void 0),(0,o.jsx)(ar,{children:s},void 0)]},void 0),(0,o.jsx)(lr,{children:(0,o.jsx)(Qn.S,{size:28},void 0)},void 0)]},void 0)})),dr=(0,we.Z)("div",{target:"eo04fh20"})({width:"100%",display:"flex",flexDirection:"column"},"label:DivPlaylistContainer;"),cr=(0,we.Z)("p",{target:"eo04fh21"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"semiBold",typography:"P3",color:"TextPrimary"}),{fontSize:"16px",lineHeight:"20px",margin:"24px 0 16px"}]),"label:PPlaylistTitle;"),ur=(0,we.Z)("div",{target:"eo04fh22"})({width:"100%",height:"94px",overflowX:"visible",position:"relative"},"label:DivListContainer;"),pr=(0,we.Z)("div",{target:"eo04fh23"})({width:"100%",height:"94px",overflowX:"auto",overflowY:"hidden",display:"flex",paddingBottom:"6px",position:"relative",scrollbarHeight:"none","::-webkit-scrollbar":{height:0}},"label:DivListInnerContainer;"),hr=(0,we.Z)("div",{target:"eo04fh24"})((({theme:{colors:e,direction:t,isDark:i}})=>[{position:"absolute",width:"32px",height:"32px",borderRadius:"32px",display:"flex",justifyContent:"center",alignItems:"center",border:`0.5px solid ${e.LinePrimary}`,top:"50%",transform:`translateY(-50%) rotateZ(${"rtl"===t?"180deg":0})`,background:i?e.BGInput2:e.BGPrimary,cursor:"pointer"},(0,Ie.YJ)({direction:t,start:"-16px"})]),"label:DivSwitchLeft;"),gr="94px",mr=(0,we.Z)("div",{target:"eo04fh25"})((({theme:{colors:e,direction:t}})=>[{background:"rtl"===t?`linear-gradient(0.25turn, ${e.BGPrimary}, 50%, rgba(255,0,0,0))`:`linear-gradient(0.25turn, rgba(255,0,0,0), 50%, ${e.BGPrimary})`,position:"absolute",width:"86px",height:`${gr}`,transform:"translateY(-100%)",pointerEvents:"none"},(0,Ie.YJ)({direction:t,end:"0px"})]),"label:DivStyledShadow;"),vr=(0,we.Z)(hr,{target:"eo04fh26"})((({theme:{direction:e}})=>(0,Ie.YJ)({direction:e,start:"unset",end:"-16px"})),"label:StyledSwitchRight;"),fr={width:"calc(33% - 4px)",height:`${gr}`},br=(0,we.Z)(Cn.Xu,{target:"eo04fh27"})(Object.assign(Object.assign({},fr),{marginInlineEnd:"16px",flexShrink:0,borderRadius:"4px","@media screen and (max-width: 1072px)":{minWidth:"230px"}}),"label:StyledSkeleton;"),xr=(0,we.Z)(Yo.v,{target:"eo04fh28"})((({theme:{isDark:e,colors:t},hideMarginEnd:i=!1})=>Object.assign(Object.assign({},fr),{padding:"12px",boxSizing:"border-box",marginInlineEnd:i?0:"16px",display:"flex",alignItems:"center",flexShrink:0,borderRadius:"4px",cursor:"pointer",background:e?t.BGInput2:t.BGView,"@media screen and (max-width: 1072px)":{minWidth:"230px"}})),"label:StyledLink;"),_r=(0,we.Z)("div",{target:"eo04fh29"})({width:"100%",height:"100%",display:"flex",alignItems:"center",flexShrink:0,borderRadius:"4px",cursor:"pointer"},"label:DivPlaylistCardContainer;"),yr=(0,we.Z)("div",{target:"eo04fh210"})((({theme:{colors:e},needBorder:t})=>({width:"72px",height:"72px",borderRadius:"2px",marginInlineEnd:"12px",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",flexShrink:0,border:t?`1px solid ${e.LineSecondary}`:"none"})),"label:DivPlaylistCardCover;"),jr=(0,we.Z)("img",{target:"eo04fh211"})({width:"72px",height:"72px",borderRadius:"2px",objectFit:"cover"},"label:ImgCover;"),kr=(0,we.Z)("div",{target:"eo04fh212"})({display:"flex",flexDirection:"column",height:"100%",padding:"4px 0",boxSizing:"border-box",justifyContent:"space-between"},"label:DivPlaylistInfoContainer;"),wr=(0,we.Z)("p",{target:"eo04fh213"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"bold",typography:"P3",color:"TextPrimary"}),(0,Ie.FC)(1),{wordBreak:"break-word",fontSize:"16px",lineHeight:"24px"}]),"label:PPlaylistName;"),Cr=(0,we.Z)("p",{target:"eo04fh214"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"normal",typography:"P4",color:"TextTertiaryAlt"}),{fontSize:"14px",lineHeight:"22px"}]),"label:PDesc;"),Ir=(0,we.Z)("div",{target:"eo04fh215"})((({paddingBottom:e="0px",theme:{colors:t}})=>({width:"692px",height:"calc(100vh - 288px)",maxHeight:"736px",display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:e,background:t.BGTertiary,borderRadius:"8px"})),"label:DivModalContainer;"),Sr=(0,we.Z)("div",{target:"eo04fh216"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"bold",typography:"P0",color:"TextPrimary"}),{display:"flex",justifyContent:"center",alignItems:"center",height:"80px",borderBottom:`0.5px solid ${e.colors.LinePrimary2}`,width:"100%",flexShrink:0}]),"label:DivModalTitle;"),Tr=(0,we.Z)("div",{target:"eo04fh217"})({display:"flex",flexDirection:"column",alignItems:"center",width:"100%",height:"100%",padding:"8px 16px",boxSizing:"border-box",overflowY:"auto"},"label:DivModalContentContainer;"),Pr=(0,we.Z)("div",{target:"es7r6k70"})((({theme:e,translateY:t})=>[(0,Ie.YJ)({direction:e.direction,end:"12px"}),{position:"absolute",display:"flex",alignItems:"center",justifyContent:"flex-end",top:"10px",transform:`translateY(${t})`,zIndex:"0"}]),"label:DivPlaylistManageContainer;"),Or=(0,we.Z)("div",{target:"es7r6k71"})((({theme:e})=>[(0,Ie.GI)({theme:e,fontFamily:"TikTokFont",fontWeight:"semiBold",typography:"P3",color:"TextSecondary"}),{display:"flex",alignItems:"center",marginInlineStart:"16px",cursor:"pointer",fontSize:"16px",lineHeight:"24px"}]),"label:DivManageItem;"),Mr=(0,we.Z)(Or,{target:"es7r6k72"})((({theme:e})=>({color:e.colors.Primary})),"label:StyledDivManageItem;"),Dr=(0,we.Z)("div",{target:"es7r6k73"})({width:"20px",height:"20px",marginInlineEnd:"2px",display:"flex",justifyContent:"center",alignItems:"center"},"label:DivPlusContainer;"),Lr=(0,we.Z)(Dr,{target:"es7r6k74"})({transform:"rotateZ(90deg)",marginInlineEnd:"unset",marginTop:"2px"},"label:StyledReorderContainer;"),Fr=(0,p.memo)((({showPlaylistCards:e=!1})=>{const t=(0,c.Q)(),{isDark:i}=(0,P.u)(),[{playlist:r,changeOrderLoading:a,loading:l},s]=(0,n.b)(le.c,{selector:e=>{var t;return{playlist:null!==(t=e.playList)&&void 0!==t?t:[],changeOrderLoading:e.changeOrderLoading,loading:e.loading}},dependencies:[]}),d=(0,n.q)(B.t),[u,h]=(0,p.useState)(!1),[g,m]=(0,p.useState)(r);(0,p.useEffect)((()=>{m(r)}),[r,u]);const[v,f]=(0,p.useState)(-1),b=(0,p.useCallback)((()=>{h(!1)}),[]),x=(0,p.useCallback)((()=>{d.setProfileState("create_playlist"),F.I.handleCreatePlaylist()}),[d]),_=(0,p.useCallback)((()=>{h(!0),F.I.handleClickChangePlaylistOrder()}),[]),y=(0,p.useCallback)((()=>{v<=0||s.changePlaylistOrder({playlist:g,endIndex:v,successCallback:b})}),[s,v,b,g]),j=(0,p.useCallback)((e=>{if(!e.destination)return;const t=(0,N.H)(g,e.source.index,e.destination.index);m(t),f(Math.max(v,e.source.index,e.destination.index))}),[v,g]),k=(0,p.useCallback)((({id:e,index:t})=>(0,o.jsx)(sr,{id:e,index:t},e)),[]),w=e&&r.length>0?"64px":"0px";return 0===r.length&&l?null:(0,o.jsxs)(Pr,Object.assign({translateY:w},{children:[r.length>=2&&(0,o.jsxs)(Or,Object.assign({onClick:_},{children:[(0,o.jsx)(Lr,{children:(0,o.jsx)($n.C,{size:16},void 0)},void 0),t("playlist_webapp_profileview_btn_changeorder")]}),void 0),(0,o.jsxs)(Mr,Object.assign({onClick:x},{children:[(0,o.jsx)(Dr,{children:(0,o.jsx)(Yn.L,{size:16},void 0)},void 0),t("playlist_webapp_profile_entry_create")]}),void 0),(0,o.jsx)(Xn.u_,Object.assign({visible:u,closeStyle:3,onClose:b,zIndex:1e3},{children:(0,o.jsxs)(Ir,Object.assign({paddingBottom:"92px"},{children:[(0,o.jsx)(Sr,{children:t("playlist_webapp_changeorder_header")},void 0),(0,o.jsx)(Tr,{children:(0,o.jsx)(N.X,{onDragEnd:j,list:g,renderItem:k},void 0)},void 0),(0,o.jsx)(E.v3,Object.assign({onClick:y},{children:(0,o.jsx)(U.W,Object.assign({style:Z.jn,buttonTheme:"primary",disabled:v<=0,loading:a,loadingFill:i?"#fff":void 0},{children:t("playlist_webapp_upload_nameplaylist_btn")}),void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)}));var Ur=i(59575),Br=i(53292),Zr=i(82417);const Er=e=>{var t,i;return null!==(i=null===(t=null==e?void 0:e.current)||void 0===t?void 0:t.scrollLeft)&&void 0!==i?i:0},Rr=e=>{var t,i;return null!==(i=null===(t=null==e?void 0:e.current)||void 0===t?void 0:t.clientWidth)&&void 0!==i?i:0},zr=(e,t,i)=>{if(i<=0)return;const o=(t-e.scrollLeft)/i*10;setTimeout((function(){e.scrollTo({left:e.scrollLeft+o,behavior:"instant"}),e.scrollLeft!==t&&zr(e,t,i-10)}),10)};var Wr=i(91302);const qr=(0,p.memo)((0,p.forwardRef)((({id:e,onClickPlaylistCard:t,hideMarginEnd:i},n)=>{const a=(0,c.Q)(),{name:l="",cover:s="",videoCount:d=0,creator:u}=(0,O.m7)((0,r.m)(se.y,{selector:t=>t[e],dependencies:[e]})),h=a("playlist_webapp_profileview_playlists_numbervid",{num:d,number:(0,O.BT)(d)}),{uniqueId:g}=(0,O.m7)(u),m=(0,p.useMemo)((()=>g&&e?Br.SN.videoPlaylist({uniqueId:g,content:l,id:e}):""),[g,l,e]),v=(0,p.useCallback)((e=>e.preventDefault()),[]),f=(0,Jn.xx)(l);return(0,o.jsx)(xr,Object.assign({forceSSR:!1,to:m,onClick:v,style:{textDecoration:"none"},ref:n,hideMarginEnd:i},{children:(0,o.jsxs)(_r,Object.assign({onClick:t({id:e,name:l,uniqueId:g})},{children:[(0,o.jsx)(yr,Object.assign({needBorder:!s},{children:s?(0,o.jsx)(jr,{src:s},void 0):(0,o.jsx)(Wr.w,{size:28,color:"TextQuaternary"},void 0)}),void 0),(0,o.jsxs)(kr,{children:[(0,o.jsxs)(wr,{children:[f,l]},void 0),(0,o.jsx)(Cr,{children:h},void 0)]},void 0)]}),e)}),void 0)}))),Ar=(0,p.memo)((()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(br,{},void 0),(0,o.jsx)(br,{},void 0),(0,o.jsx)(br,{},void 0),(0,o.jsx)(br,{},void 0),(0,o.jsx)(br,{},void 0)]},void 0))),Nr=(0,p.memo)((({isSelf:e})=>{const t=(0,c.Q)(),i=(0,C.k6)(),{playlist:a=[],loading:l}=(0,r.m)(le.c,{selector:e=>({playlist:e.playList,loading:e.loading}),dependencies:[]}),[u,h]=(0,p.useState)(""),[g,m]=(0,p.useState)(""),{language:v="en"}=(0,O.m7)((0,D.Lh)((()=>["language"]),[])),{rootRef:f}=(({mixId:e})=>{const[t,i]=(0,n.b)(M.h,{selector:t=>{var i;return null!==(i=t[e])&&void 0!==i?i:{}},dependencies:[e]}),{loading:o=!1,hasMore:r=!0}=(0,O.m7)(t),{language:a}=(0,O.m7)((0,D.Lh)((()=>["language"]),[])),l=(0,p.useCallback)((()=>{!o&&r&&e&&i.getPlaylistVideoList({mixId:e,language:a})}),[r,i,a,o,e]);(0,Zr.AS)(e,l);const s=(0,p.useRef)(null);return(0,tn.su)({onHitBottom:l,elemRef:s}),{rootRef:s}})({mixId:u}),[b,x]=(0,n.b)(M.h,{selector:e=>{var t;return null!==(t=e[u])&&void 0!==t?t:{}},dependencies:[u]}),{videoCount:y}=(0,O.m7)((0,r.m)(se.y,{selector:e=>e[u],dependencies:[u]})),{loading:j=!1,hasMore:k=!0,list:w=[]}=(0,O.m7)(b),[I,S]=(0,p.useState)(!1),T=(0,p.useCallback)((({id:t,name:o,uniqueId:n})=>()=>{if(F.I.handleClickPlaylistEntrance({playlist_id:t}),e){const e=t&&n&&o?Br.SN.videoPlaylist({id:t,uniqueId:n,content:o}):"";e&&i.push(e)}else S(!0),h(t),m(o)}),[i,e]),P=(0,p.useCallback)((()=>{S(!1)}),[]),{showBrowserMode:L,isBrowserModeShowing:U}=(0,p.useContext)(A._),[Z,{setItemListKey:E}]=(0,s.Bs)((e=>e.itemListKey)),R=(0,p.useRef)(Z);(0,p.useEffect)((()=>{!R.current&&Z&&(R.current=Z)}),[Z]),(0,p.useEffect)((()=>{U||E(R.current)}),[U,E]);const z=(0,p.useMemo)((()=>({playlist_id:u,popup_type:"playlist"})),[u]),W=(0,p.useCallback)((e=>()=>{E(u),L({index:e,itemListKey:u,teaParams:z,playProgress:0,reportTeaParams:z})}),[u,E,L,z]),q=(0,p.useMemo)((()=>U?{display:"none"}:void 0),[U]),{listCardRef:N,listRef:G,showSwitchLeft:V,hideSwitchRight:$,handleClickSwitchLeft:Y,handleClickSwitchRight:X,handleScroll:K}=(()=>{const e=(0,p.useRef)(null),t=(0,p.useRef)(null),{isRTL:i}=(0,et.Y)(),[{playlist:o,hasMore:a},l]=(0,n.b)(le.c,{selector:e=>{var t;return{playlist:null!==(t=e.playList)&&void 0!==t?t:[],hasMore:e.hasMore}},dependencies:[]}),s=o.length,[c,u]=(0,p.useState)(!1),[h,g]=(0,p.useState)(!1),m=Rr(e),v=e=>(m+16)*e,f=v(3),b=i?-1*f:f,{secUid:x="",uniqueId:y=""}=(0,r.m)(B.t,{selector:e=>({secUid:e.secUid,uniqueId:e.uniqueId}),dependencies:[]}),{id:j}=(0,O.m7)((0,r.m)(d.z,{selector:e=>{var t;return null===(t=e.users)||void 0===t?void 0:t[y]},dependencies:[y]})),k=(0,p.useCallback)((o=>{if((0,_.NS)(o),!t.current||!e.current)return;const n=Er(t),r=i?Math.min(n-b,0):Math.max(n-b,0);zr(t.current,r,200)}),[i,b]),w=(0,p.useCallback)((i=>{if((0,_.NS)(i),!t.current||!e.current)return;const o=Er(t);zr(t.current,o+b,200)}),[b]),C=s*m+16*(s-1),I=(0,zi.fB)((()=>{var e;if(!t.current)return;const i=Math.abs(Er(t)),o=(null===(e=null==t?void 0:t.current)||void 0===e?void 0:e.scrollWidth)-i-Rr(t);C-i<=v(4)&&l.getVideoPlaylistData({secUid:x,uid:j}),g(!a&&o<5),u(0!==i)}),[s,m],200);return{listRef:t,listCardRef:e,showSwitchLeft:c,hideSwitchRight:h,handleClickSwitchLeft:k,handleClickSwitchRight:w,handleScroll:I}})();return(0,p.useEffect)((()=>{!j&&0===w.length&&k&&u&&x.getPlaylistVideoList({mixId:u,language:v})}),[k,x,v,w.length,u,j]),(0,o.jsxs)(dr,{children:[(l||a.length>0)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(cr,{children:t("playlist_webapp_profileview_playlists")},void 0),(0,o.jsxs)(ur,{children:[(0,o.jsxs)(pr,Object.assign({ref:G,onScroll:K},{children:[a.map(((e,t)=>(0,o.jsx)(qr,{id:e,onClickPlaylistCard:T,ref:0===t?N:void 0,hideMarginEnd:t===a.length-1},e))),l&&(0,o.jsx)(Ar,{},void 0)]}),void 0),V&&(0,o.jsx)(hr,Object.assign({onClick:Y},{children:(0,o.jsx)(Ur.d,{size:16},void 0)}),void 0),a.length>3&&!$&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(mr,{},void 0),(0,o.jsx)(vr,Object.assign({onClick:X},{children:(0,o.jsx)(Mo.c,{size:16},void 0)}),void 0)]},void 0)]},void 0),(0,o.jsx)(cr,{children:t("Videos")},void 0)]},void 0),(0,o.jsx)(Xn.u_,Object.assign({visible:I,containerStyle:q,maskCloseable:!0,onClose:P,zIndex:1e3,closeStyle:3},{children:(0,o.jsxs)(Ir,{children:[(0,o.jsxs)(Sr,{children:[g,"Â (",y,")"]},void 0),(0,o.jsxs)(Tr,Object.assign({ref:f},{children:[w.map(((e,t)=>(0,o.jsx)(H.mo,{id:e,index:t,onClickVideoItem:W(t),extraTeaParams:z},e))),j&&(0,o.jsx)(on.g,{size:48},void 0)]}),void 0)]},void 0)}),void 0)]},void 0)})),Hr=(0,we.Z)("div",{target:"e1jjp0pq0"})((({theme:{direction:e,colors:t}})=>[{position:"relative",top:"0px",zIndex:"0",display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"stretch",width:"100%",height:"44px",marginBottom:"8px",backgroundColor:t.BGPrimary,"::after":{position:"absolute",bottom:0,left:0,content:'""',width:"100%",height:"1px",backgroundColor:t.ShadowPrimary,transform:"scaleY(50%)"}},(0,Ie.YJ)({direction:e})]),"label:DivVideoFeedTab;"),Gr=({theme:e,theme:{colors:t},active:i})=>{let o="#73747b";return i?o=t.Primary2:e.isDark&&(o=t.TextTertiary),[(0,Ie.GI)({theme:e,fontFamily:"TikTokDisplayFont",fontWeight:"semiBold",typography:"P1"}),{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,height:"44px",padding:"0 32px",cursor:"pointer",textAlign:"center",color:o}]},Vr=(0,we.Z)("p",{target:"e1jjp0pq1"})(Gr,"label:PPost;"),$r=(0,we.Z)("p",{target:"e1jjp0pq2"})(Gr,"label:PFavorite;"),Yr=(0,we.Z)("p",{target:"e1jjp0pq3"})(Gr,"label:PLike;"),Xr=(0,we.Z)("span",{target:"e1jjp0pq4"})((({theme:{direction:e}})=>(0,Ie.YJ)({direction:e,marginStart:6})),"label:SpanLiked;"),Kr=(0,we.Z)("div",{target:"e1jjp0pq5"})((({theme:{colors:e,direction:t}})=>[{position:"absolute",height:"2px",background:e.TextPrimary,bottom:"0",transition:"transform .3s"},(0,Ie.YJ)({direction:t,start:0})]),"label:DivBottomLine;");var Qr=i(10347),Jr=i(59965);const ea=(e,t)=>{const[{roomInfo:i},o]=(0,b.KO)(f),{livePreviewAb:n}=(0,ct.iA)(),{livePreviewSonAb:r}=(0,ct.ry)(),[a]=(0,b.KO)(m),l=(0,p.useMemo)((()=>(n===t||r===t)&&a.isLive&&!a.isError),[n,a]);(0,p.useEffect)((()=>{l&&o({owner_user_id:null==e?void 0:e.id,scene:"webapp_profile_preview"})}),[l]);const s=(0,p.useMemo)((()=>{var e,t;const o=null===(t=null===(e=null==i?void 0:i.stream_url)||void 0===e?void 0:e.live_core_sdk_data)||void 0===t?void 0:t.pull_data;if(!o)return null;const n=Jr.ZL.getAvailableStream(o,{targetQuality:"sd",direction:"up"});return null==n?void 0:n.url.mainFLV}),[i]),d=null==i?void 0:i.user_count,c=4===(null==e?void 0:e.relation);return{showPreviewPlayer:(0,p.useMemo)((()=>!(!l||!s||c)),[l,s,c]),streamUrl:s,userCount:d,abVersion:t,isBlockedUser:c}};var ta=i(87862),ia=i(94225),oa=i(66764),na=i(60479);const ra=ke.F4`
  0% {
    opacity: 0;
  }

  100% {
    opacity: 1;
  }
`,aa=(0,we.Z)("div",{target:"e139luw90"})({width:"100%",height:"100%",position:"relative",opacity:0,animation:`${ra} .5s cubic-bezier(0.95, 0.05, 0.795, 0.035) forwards`},"label:DivLiveItem;"),la=(0,we.Z)("div",{target:"e139luw91"})((({theme:e})=>({width:"100%",fontSize:"16px",fontStyle:"normal",fontWeight:400,lineHeight:"130%",color:e.colors.TextPrimary,marginTop:4,padding:"2px 4px 0px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})),"label:DivLiveTitle;"),sa=(0,we.Z)("div",{target:"e139luw92"})((({theme:{direction:e}})=>[{position:"absolute",zIndex:20,top:8},(0,Ie.YJ)({direction:e,end:8})]),"label:DivLiveBadgeWrapper;"),da=(0,we.Z)("span",{target:"e139luw93"})((({theme:e})=>[(0,Ie.GI)({theme:e,typography:"P3",fontWeight:"medium",color:"ConstTextInverse"}),{display:"inline-block",height:20,background:"linear-gradient(131deg, #FF1764 0%, #ED3495 94.15%)",lineHeight:"16px",padding:"2px 5px",borderRadius:"4px"}]),"label:SpanLiveBadge;");var ca,ua=i(70068);!function(e){e.FirstFrameDuration="live_user_inner_play_duration"}(ca||(ca={}));const pa={initTime:0,firstFrameTime:0};function ha(){const e=(0,ft.fz)(ua.n),t=(0,p.useRef)(!0);return{recordingInitTime:(0,p.useCallback)((()=>{pa.initTime=Date.now()}),[pa]),sendFirstFrameDuration:(0,p.useCallback)((()=>{t.current&&(pa.firstFrameTime=Date.now(),e.emitEvent("live_user_inner_play_duration",{duration:pa.firstFrameTime-pa.initTime},{}),t.current=!1)}),[pa,e,t])}}var ga=i(78340),ma=i(97432);const va=(0,g.cn)({linkedUsers:{},linkedMicUsers:null}),fa=(0,g.cn)((e=>e(va)),((e,t,i)=>(0,u.__awaiter)(void 0,void 0,void 0,(function*(){var e,o,n;try{const r=yield(n=i,h.h.get("/webcast/linkmic_multi_guest/webapp/audience_room_enter_backup/",{query:Object.assign({live_id:y.p3,app_id:y.CO},n),baseUrlType:4}));if(!(null==r?void 0:r.data))throw Error("no data");{const i=null!==(o=null===(e=r.data.multi_guest_linkmic_info)||void 0===e?void 0:e.linked_users)&&void 0!==o?o:[],{linkedMicUsers:n,linkedMicUserMap:a}=(0,ma.B_)(i);t(va,{linkedUsers:a,linkedMicUsers:n})}}catch(e){t(va,{linkedUsers:{},linkedMicUsers:null})}}))));function ba(e){const{roomId:t,active:i}=e,o=(0,p.useRef)(""),[,n]=(0,b.KO)(fa);return{handleMultiGuestPanelShow:(0,p.useCallback)((e=>{var r,a,l,s;if(i){const i=null!==(a=null===(r=e.app_data)||void 0===r?void 0:r.channel_id)&&void 0!==a?a:"",d=(0,ma.eE)(null!==(s=null===(l=e.app_data)||void 0===l?void 0:l.grids)&&void 0!==s?s:[]);t&&i&&o.current!==d&&(o.current=d,n({room_id:t}))}else o.current=""}),[n,t,i])}}var xa=i(88709);function _a(e){const{handleMultiGuestShow:t,linkedUsers:i}=null!=e?e:{},o=(0,p.useRef)(),[n,r]=(0,p.useState)([]),[a,l]=(0,p.useState)([]),[s,d]=(0,p.useState)({w:0,h:0}),[c,u]=(0,p.useState)(""),[h,g]=(0,p.useState)({width:0,height:0,top:0,left:0}),[m,v]=(0,p.useState)({width:0,height:0}),[f,b]=(0,p.useState)(!1),x=(0,p.useRef)(1),_=(0,p.useRef)(""),y=(0,p.useRef)(""),j=(0,p.useRef)(0),k=(0,p.useRef)({maxX:1,maxY:1,minX:0,minY:0}),[w,C]=(0,p.useState)(!1),I=(0,p.useCallback)((e=>{const{scaleRatio:t,canvas:i,transformX:o,transformY:n,container:r,isCalcBaseWidth:a}=e,{clientWidth:l,clientHeight:s}=r,c=l*t,u=s*t,p=-(t-1)/2;let h=s*p+u*(null!=n?n:0)/2;const m=l*p+c*(null!=o?o:0)/2;let f=0,b=0,x=l,_=s;a?(f=c,b=i.h*c/i.w,h+=(u-b)/2,_=i.h*x/i.w):(b=u,f=Math.min(i.w*b/i.h,c),x=Math.min(i.w*_/i.h,l)),d({w:x,h:_}),g({width:c,height:u,top:h,left:m}),v({width:f,height:b})}),[]),S=(0,p.useCallback)((()=>{o.current="",x.current=1,y.current="",_.current="",j.current=0,r([]),C(!1),l([]),d({w:0,h:0}),g({width:0,height:0,top:0,left:0}),v({width:0,height:0})}),[]),T=(0,p.useCallback)((e=>{var i,n,a,s,d,c,p,h;const{seiContent:g,scaleRatio:m,videoContainerRef:v,transformX:f,transformY:w,isPanelFloatLinkedMicType:T,isContainerSizeChange:P,isNeedFixStyle:O,isCalcBaseWidth:M,regionBorder:D,regionsFromDSL:L}=e,F=5===(null===(i=g.app_data)||void 0===i?void 0:i.ver);if(!v.current)return;if(!O||!F)return void(o.current&&S());const U=function(e){var t,i,o,n;return(null===(i=null===(t=e.app_data)||void 0===t?void 0:t.grids)||void 0===i?void 0:i.length)?null===(n=null===(o=e.app_data)||void 0===o?void 0:o.grids)||void 0===n?void 0:n.reduce(((e,t)=>`${e}${e?",":""}${(0,ma.Bs)(t.x)}_${(0,ma.Bs)(t.y)}_${(0,ma.Bs)(t.w)}_${(0,ma.Bs)(t.h)}_${t.uid_str}_${t.online_user_state}_${Boolean(t.mute_a)}_${Boolean(t.mute_v)}`),""):""}(g),B=null!==(s=null===(a=null===(n=g.app_data)||void 0===n?void 0:n.DSLData)||void 0===a?void 0:a.layoutId)&&void 0!==s?s:"0";if(U===o.current&&_.current===B&&!P)return;const Z=function(e){var t,i;return null!==(i=null===(t=null==e?void 0:e.app_data)||void 0===t?void 0:t.grids)&&void 0!==i?i:[]}(g);null==t||t(g),_.current=B,C((0,ma.hO)(B)),j.current=0,x.current=m,k.current=D,o.current=U,y.current=null!==(c=null===(d=g.app_data)||void 0===d?void 0:d.channel_id)&&void 0!==c?c:"",b(null!=T&&T),I({scaleRatio:m,canvas:g.canvas,transformX:f,transformY:w,container:v.current,isCalcBaseWidth:M}),u(null!==(h=null===(p=g.app_data)||void 0===p?void 0:p.anchor_link_mic_id)&&void 0!==h?h:""),r(null!=Z?Z:[]),l(null!=L?L:[])}),[t,I,S]),P=(0,p.useMemo)((()=>({grids:n,anchorLinkMicId:c,contentWidth:m.width,contentHeight:m.height,containerWidth:h.width,containerHeight:h.height,containerTop:h.top,containerLeft:h.left,isPanelFloatLinkedMicType:f,hideUserCoin:null==e?void 0:e.hideUserCoin,channelId:y.current,appCanvas:s,regionBorder:k.current,regionsFromDSL:a,canShowUserInfo:!(w&&Object.entries(Object.assign({},i)).length<2),linkedUsers:i})),[c,h.height,h.left,h.top,h.width,m.height,m.width,n,f,null==e?void 0:e.hideUserCoin,s,a,w,i]),O=(0,p.useCallback)((()=>{S(),o.current=void 0}),[S]),M=(0,p.useCallback)((()=>{r([])}),[]);return(0,xa.x)(M),{multiGuestMaskPanelProps:P,isGuestConnection:void 0!==o.current?Boolean(n.length>1):void 0,isMultiGuestRoom:void 0!==o.current?Boolean(n.length):void 0,multiGuestPanelVisible:void 0!==o.current?Boolean(n.length):void 0,grids:n,layoutId:_.current,handleMultiGuestSeiParsedCallback:T,resetMultiGuestData:O}}var ya=i(62064),ja=i(51881);function ka(e){const{container:t,minY:i,maxY:o,canvasHeight:n,canvasWidth:r}=e;let{maxX:a,minX:l}=e;const s=null==t?void 0:t.clientWidth,d=null==t?void 0:t.clientHeight;if(!t||!s||!d)return{scaleRatio:1,transformX:0,transformY:0,transform:"",isCalcBaseWidth:!1};const c=a-l,u=o-i;let p=1,h=0,g=0,m=!1;const v=r>n;if(c*r/(u*n)<=s/d)v?(p=d/(s*n/r*u),m=!0,p=Math.max(p,1)):p=1/u,i!==1-o&&(g=1-o-i);else{let e=1;v?(e=1/c,m=!0):(e=s/(d*r/n*c),m=e<p,i!==1-o&&(g=1-o-i,g+=g>0?.002:-.002),l!==1-a&&(h=1-a-l,h+=h>0?.002:-.002)),p=Math.max(e,1)}return{scaleRatio:p,transformX:h,transformY:g,isCalcBaseWidth:m,transform:`scale(${p}) translate(${(100*h/2).toFixed(4)}%, ${(100*g/2).toFixed(4)}%)`}}var wa=i(62990);function Ca(e){const{url:t,handleMultiGuestSeiParsedCallback:i,playMode:o}=e,n=(0,p.useRef)(!1),r=(0,p.useRef)([]),a=(0,p.useRef)(),l=(0,p.useRef)(),[s,d]=(0,p.useState)(),c=(0,p.useRef)({w:1,h:1}),h=(0,p.useRef)({minX:0,minY:0,maxX:1,maxY:1}),g=(0,p.useRef)({scaleRatio:1,transformX:0,transformY:0,isCalcBaseWidth:!1,transform:""}),m=(0,p.useRef)(""),v=(0,p.useRef)(),f=(0,p.useRef)(!1),b=(0,p.useRef)([]),x=(0,p.useCallback)(((e,t)=>{var o,s;r.current=[],b.current=[],c.current={w:1,h:1},(null===(o=a.current)||void 0===o?void 0:o.style)&&n.current&&(a.current.style.transform=""),(null===(s=l.current)||void 0===s?void 0:s.style)&&(l.current.style.filter=""),n.current=!1,g.current={scaleRatio:1,transformX:0,transformY:0,isCalcBaseWidth:!1,transform:""},f.current=Boolean(t),h.current={minX:0,minY:0,maxX:1,maxY:1},null==i||i({transformY:0,scaleRatio:1,transformX:0,videoContainerRef:l,seiContent:e,isPanelFloatLinkedMicType:t,isNeedFixStyle:Boolean(t),regionBorder:{},regionsFromDSL:[]})}),[i]),_=(0,p.useCallback)(((e,t)=>{var i,n;if((null===(i=a.current)||void 0===i?void 0:i.style)&&e){const{transform:i}=e;a.current.style.transformOrigin="center","full_screen"===o&&(0,ya.uM)()&&(null===(n=l.current)||void 0===n?void 0:n.style)&&(l.current.style.filter="opacity(1)");const r="picture_in_picture"===o;a.current.style.transform=r&&!t?"":i}}),[o]),y=(0,p.useCallback)((e=>{var t;if(Boolean(null==e?void 0:e.ttls_live_scene))return x(e),{isExist:!1};const i=(0,ma.JL)(e),o=Boolean(null===(t=e.app_data)||void 0===t?void 0:t.channel_id);return(null==i?void 0:i.length)&&o?{isExist:!0}:(0,ma.mE)(e)?{isExist:!0,isVolType:!0}:(x(e),{isExist:!1})}),[x]),j=(0,p.useCallback)(((e,t,o)=>(0,u.__awaiter)(this,void 0,void 0,(function*(){var s,u,p,m,x,j,k,w,C,I;if(Object.keys(e).length&&void 0===e.ts)return;if(!o||!t||20===(null===(s=e.app_data)||void 0===s?void 0:s.ver))return;a.current&&a.current===o||(a.current=o),l.current||(l.current=t,d(t));const{isExist:S,isVolType:T}=y(e);if(!S||T)return;const P=(0,ma.JL)(e);v.current=e;const O=String(null!==(m=null===(p=null===(u=null==e?void 0:e.app_data)||void 0===u?void 0:u.DSLData)||void 0===p?void 0:p.layoutId)&&void 0!==m?m:""),M=null!==(j=null===(x=null==e?void 0:e.app_data)||void 0===x?void 0:x.canvas)&&void 0!==j?j:{},D=Boolean(M.width&&M.height&&M.width>M.height),L=yield(0,ma.SM)(String(O),null!==(w=null===(k=e.app_data)||void 0===k?void 0:k.grids)&&void 0!==w?w:[],null!==(I=null===(C=null==e?void 0:e.app_data)||void 0===C?void 0:C.zoomed_linkmic_id)&&void 0!==I?I:"",D),F=L.length?L:P,{minX:U,minY:B,maxX:Z,maxY:E}=(0,ja.A9)(F),R=0===U&&0===B&&Z>=1&&E>=1||["1011","1011_A","1001"].includes(O);if(!R&&n.current&&h.current&&(0,ja.LE)({minX:U,minY:B,maxX:Z,maxY:E},h.current)){const{transformY:t,scaleRatio:o,transformX:n,isCalcBaseWidth:r}=g.current;return b.current=L,void(null==i||i({transformY:t,scaleRatio:o,transformX:n,isCalcBaseWidth:r,videoContainerRef:l,seiContent:e,regionsFromDSL:L,isNeedFixStyle:!0,regionBorder:h.current,isPanelFloatLinkedMicType:f.current}))}f.current=R;const z=e.canvas,W=ka({container:t,minX:U,minY:B,maxX:Z,maxY:E,canvasWidth:z.w,canvasHeight:z.h});if(n.current=!0,r.current=F,b.current=L,c.current=z,h.current={minX:U,minY:B,maxX:Z,maxY:E},o.style){const{transformY:t,scaleRatio:o,transformX:n,transform:r,isCalcBaseWidth:a}=W;_({transform:r}),g.current={scaleRatio:o,transformX:n,transformY:t,isCalcBaseWidth:a,transform:r},null==i||i({transformY:t,scaleRatio:o,transformX:n,videoContainerRef:l,seiContent:e,isNeedFixStyle:!0,isCalcBaseWidth:a,regionsFromDSL:L,regionBorder:h.current,isPanelFloatLinkedMicType:f.current})}}))),[y,i,_]),k=(0,p.useCallback)((()=>{var e,t,o,s,d,u;if(!n.current)return void((null===(e=a.current)||void 0===e?void 0:e.style)&&((null===(s=null===(o=null===(t=a.current)||void 0===t?void 0:t.style.transform)||void 0===o?void 0:o.includes)||void 0===s?void 0:s.call(o,"rotate"))||(a.current.style.transform=""),null==i||i({scaleRatio:1,videoContainerRef:l,seiContent:null!==(d=v.current)&&void 0!==d?d:{},isPanelFloatLinkedMicType:f.current,isContainerSizeChange:f.current,isNeedFixStyle:f.current,regionBorder:h.current,regionsFromDSL:[]})));if(!l.current)return;const{minX:p,minY:m,maxX:x,maxY:y}=(0,ja.A9)(r.current),j=ka({container:l.current,minX:p,minY:m,maxX:x,maxY:y,canvasHeight:c.current.h,canvasWidth:c.current.w});if(null===(u=a.current)||void 0===u?void 0:u.style){const{transformY:e,scaleRatio:t,transformX:o,isCalcBaseWidth:n,transform:r}=j;_({transform:r}),g.current={scaleRatio:t,transformX:o,transformY:e,isCalcBaseWidth:n,transform:r},v.current&&(null==i||i({scaleRatio:t,transformX:o,transformY:e,videoContainerRef:l,seiContent:v.current,isContainerSizeChange:!0,isNeedFixStyle:!0,isCalcBaseWidth:n,regionsFromDSL:b.current,isPanelFloatLinkedMicType:f.current,regionBorder:h.current}))}}),[i,_]),w=(0,p.useCallback)((()=>{k()}),[k]),C=(0,p.useCallback)((()=>{(0,ya.yF)()||w()}),[w]),I=(0,p.useCallback)((()=>{var e;n.current&&(null===(e=g.current)||void 0===e?void 0:e.transform)&&_({transform:g.current.transform},!0)}),[_]),S=(0,p.useMemo)((()=>s?{current:s}:l),[s]);return(0,xa.y)({element:S,callback:C}),(0,p.useEffect)((()=>{var e,t;(null===(e=a.current)||void 0===e?void 0:e.style)&&n.current&&(a.current.style.transform="picture_in_picture"===o?"":g.current.transform,(0,ya.uM)()&&(null===(t=l.current)||void 0===t?void 0:t.style)&&(l.current.style.filter="full_screen"===o?"opacity(1)":""))}),[o]),(0,p.useEffect)((()=>{t&&t&&!(0,wa.bt)(m.current,t)&&(x({}),m.current=t)}),[t,x]),{handleMultiGuestSeiParsed:j,recoverVideoStyle:I}}var Ia=i(37122),Sa=i(77578),Ta=i(78502),Pa=i(99448),Oa=i(25790);const Ma=(0,p.forwardRef)(((e,t)=>{const{defaultVolume:i,defaultMuted:n,onVolumeChange:r,onMutedChange:a,showVolumeIcon:l}=e,s=(0,p.useRef)(null),{xgplayer:d,mutedPlay:c,handlePlayerDestroy:u}=(0,Ta.n)(Object.assign(Object.assign({},e),{playerContainerRef:s}));return(0,p.useImperativeHandle)(t,(()=>({destroy:()=>{u()},retry:()=>{var e;null===(e=d.current)||void 0===e||e.retry()}}))),(0,o.jsx)(Oa.Id,Object.assign({ref:s},{children:(0,o.jsx)(Oa.Se,{children:(0,o.jsx)(Pa.Q,{xgplayer:d,visible:l,defaultVolume:i,defaultMuted:n,mutedPlay:c,onVolumeChange:r,onMutedChange:a},void 0)},void 0)}),void 0)}));var Da=i(57601),La=i(18095),Fa=i(85093);const Ua=i.p+"2a76df5f1cb19fd2acf7.png",Ba=i.p+"b0b7e2c9a68bccf32083.png",Za=i.p+"8c59c078e88d02be0a83.png",Ea=(0,Fa.Z)("div",{target:"e1dhtgaw0"})({position:"absolute",left:0,top:0,display:"flex",justifyContent:"center",pointerEvents:"none",zIndex:3},"label:DivMultiGuestMaskPanelWrapper;"),Ra=(0,Fa.Z)("div",{target:"e1dhtgaw1"})({position:"relative"},"label:DivMultiGuestMaskPanelContent;"),za=(0,Fa.Z)("div",{target:"e1dhtgaw2"})({position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1},"label:DivLinkedMicUserCardWrapper;"),Wa=(0,Fa.Z)("div",{target:"e1dhtgaw3"})({position:"absolute",top:"-1px",left:"-1px",border:"2px solid #161823",borderRadius:"6px",zIndex:9},"label:DivLinkMicUserCardBorder;"),qa=(0,Fa.Z)("div",{target:"e1dhtgaw4"})({background:"linear-gradient(180deg, rgba(0, 0, 0, 0.0001) 0%, rgba(0, 0, 0, 0.4) 100%)",maxHeight:"56px",height:"22.13%",position:"absolute",zIndex:2,left:"-1px",bottom:0},"label:DivBlurMask;"),Aa=(0,Fa.Z)("div",{target:"e1dhtgaw5"})({width:"100%",height:"100%",position:"absolute",background:"rgba(22, 24, 35, 0.5)",zIndex:2,left:0,top:0},"label:DivGrayMask;"),Na=(0,Fa.Z)("div",{target:"e1dhtgaw6"})({width:"100%",height:"100%",textAlign:"center",position:"absolute",zIndex:3,left:0,top:0,overflow:"hidden"},"label:DivIconContainer;"),Ha=(0,Fa.Z)("div",{target:"e1dhtgaw7"})({position:"relative",width:"100%",height:"100%",background:"linear-gradient(180deg, #372143 0%, #2D234D 100%)"},"label:DivIconBg;"),Ga=(0,Fa.Z)("div",{target:"e1dhtgaw8"})({width:"100%",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:1},"label:DivActicle;"),Va=(0,Fa.Z)("img",{target:"e1dhtgaw9"})({maxWidth:"188px",margin:"0 auto"},"label:ImgPng;"),$a=(0,Fa.Z)("div",{target:"e1dhtgaw10"})((({bgUrl:e})=>({backgroundImage:e?`url(${e})`:"unset",backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:"100%",backgroundRepeat:"no-repeat",position:"absolute",top:"0px",left:"0px",zIndex:1,overflow:"hidden"})),"label:DivLinkMicUserCardBgWrapper;"),Ya=(0,Fa.Z)("div",{target:"e1dhtgaw11"})({width:"101%",height:"100%",backdropFilter:"blur(15px)",backgroundColor:"rgba(22, 24, 35, 0.5)"},"label:DivLinkMicUserCardBg;"),Xa=(0,Fa.Z)("div",{target:"e1dhtgaw12"})((({theme:e})=>({position:"absolute",top:"4px",left:"4px",height:"14px",borderRadius:"57px",backgroundColor:e.colors.ConstBGInverse3,padding:"2px",overflow:"hidden",display:"flex",alignItems:"center",zIndex:10})),"label:DivUserCoinWrapper;"),Ka=(0,Fa.Z)("div",{target:"e1dhtgaw13"})({width:"10px",height:"10px",backgroundImage:`url(${Ba})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},"label:DivUserCoinIcon;"),Qa=(0,Fa.Z)("div",{target:"e1dhtgaw14"})((({theme:e})=>({color:e.colors.ConstTextInverse,fontFamily:e.fontFamilies.TikTokFont,fontSize:"12px",lineHeight:"18px",fontWeight:600,marginLeft:"2px",marginRight:"2px"})),"label:DivUserCoinCount;"),Ja=(0,Fa.Z)("div",{target:"e1dhtgaw15"})({height:"14px",borderRadius:"38px",padding:"1px 4px",overflow:"hidden",zIndex:10,position:"absolute",left:"4px",top:"4px",display:"flex",alignItems:"center",whiteSpace:"nowrap"},"label:DivHostIconWrapper;"),el=(0,Fa.Z)("div",{target:"e1dhtgaw16"})((({theme:e})=>({backgroundColor:e.colors.Secondary2,position:"absolute",width:"100%",height:"100%",left:0,top:0,opacity:.6,zIndex:0})),"label:DivHostIconWrapperBg;"),tl=(0,Fa.Z)("div",{target:"e1dhtgaw17"})({position:"relative",width:"10px",height:"10px",backgroundImage:`url(${Za})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",zIndex:1},"label:DivHostIcon;"),il=(0,Fa.Z)("div",{target:"e1dhtgaw18"})((({theme:e})=>({position:"relative",color:e.colors.ConstTextInverse,fontFamily:e.fontFamilies.TikTokFont,fontSize:"12px",lineHeight:"18px",fontWeight:600,marginLeft:"2px",zIndex:1})),"label:DivHostText;"),ol=(0,Fa.Z)("div",{target:"e1dhtgaw19"})((({theme:e,showMuteIcon:t})=>({color:e.colors.ConstTextInverse,fontFamily:e.fontFamilies.TikTokFont,fontSize:"12px",lineHeight:"18px",fontWeight:400,position:"absolute",left:"4px",bottom:"4px",right:t?"22px":"4px",zIndex:10,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),"label:DivUserName;"),nl=(0,Fa.Z)("div",{target:"e1dhtgaw20"})({backgroundImage:`url(${Ua})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"absolute",bottom:"4px",right:"4px",width:"14px",height:"14px",zIndex:10},"label:DivUserAudioMuteIcon;"),rl=i.p+"4f1f082fd98c7fc593f0.png",al=e=>{const{iconStyle:t,containerStyle:i}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(Na,Object.assign({style:i},{children:[(0,o.jsx)(Ha,{},void 0),(0,o.jsx)(Ga,{children:(0,o.jsx)(Va,{style:t,src:rl},void 0)},void 0)]}),void 0)},void 0)},ll=i.p+"6edb78772735dc3e70e4.png",sl=e=>{const{iconStyle:t,containerStyle:i}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Na,Object.assign({style:i},{children:(0,o.jsx)(Ga,{children:(0,o.jsx)(Va,{style:t,src:ll},void 0)},void 0)}),void 0),(0,o.jsx)(Aa,{style:i},void 0)]},void 0)},dl=e=>{const{user:t,containerStyle:i,hideUserCoin:n,needMaskBg:r,isPanelFloatLinkedMicType:a,canShowUserInfo:l}=e,{avatarUrl:s,isAnchor:d,userName:u,isAudioMuted:h,isPause:g,isVideoMuted:m,coin:v,isEmpty:f}=t,b=(0,c.Q)(),x=(0,p.useMemo)((()=>({width:`${t.width}px`,height:`${t.height}px`,top:`${t.top}px`,left:`${t.left}px`})),[t.height,t.left,t.top,t.width]),_=(0,p.useMemo)((()=>t.width<78||t.height<78||!l),[t.height,t.width,l]),y=(0,p.useMemo)((()=>{if(t.width<128||t.height<128){const e=Math.min(t.width,t.height)/2;return{width:`${e}px`,height:`${e}px`}}return{width:"80px",height:"80px"}}),[t.width,t.height]),j=(0,p.useMemo)((()=>a&&!d&&t.isVideoMuted?{width:t.width-1+"px",height:t.height-2+"px",top:"1px",left:"1px"}:{}),[d,a,t.height,t.isVideoMuted,t.width]),k=(0,p.useMemo)((()=>{const e=a&&!d?2:0;return e?{width:t.width-e+"px",height:t.height-e+"px)",left:"1px",top:"1px",borderRadius:"4px"}:{}}),[d,a,t.height,t.width]),w=(0,p.useMemo)((()=>({width:`${t.width+2}px`,height:`${t.height+2}px`})),[t.height,t.width]),C=(0,p.useMemo)((()=>a&&!d?{borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px",width:`${t.width+2}px`,bottom:"-1px"}:{width:`${t.width+2}px`}),[d,a,t.width]);return(0,o.jsxs)(za,Object.assign({style:Object.assign(Object.assign({},x),i)},{children:[r&&(m||g)&&(0,o.jsx)($a,Object.assign({bgUrl:s,style:j},{children:(0,o.jsx)(Ya,{},void 0)}),void 0),a&&!t.isAnchor&&!f&&(0,o.jsx)(Wa,{style:w},void 0),f&&(0,o.jsx)(al,{containerStyle:k,iconStyle:y},void 0),g&&(0,o.jsx)(sl,{containerStyle:k,iconStyle:y},void 0),!_&&d&&(0,o.jsxs)(Ja,Object.assign({style:{maxWidth:t.width-8+"px"}},{children:[(0,o.jsx)(el,{},void 0),(0,o.jsx)(tl,{},void 0),(0,o.jsx)(il,{children:b("pm_mt_multiguest_enlarge_host_tag")},void 0)]}),void 0),!n&&!_&&!d&&!f&&(0,o.jsxs)(Xa,{children:[(0,o.jsx)(Ka,{},void 0),(0,o.jsx)(Qa,{children:(0,Da._H)(v)},void 0)]},void 0),!g&&m&&s&&(0,o.jsx)(La.t,{style:Object.assign(Object.assign({},y),{borderRadius:"80px",position:"absolute",transform:"translate(-50%, -50%)",left:"50%",top:"50%",zIndex:10}),src:s},void 0),!_&&Boolean(u)&&(0,o.jsx)(ol,Object.assign({showMuteIcon:h},{children:u}),void 0),!_&&h&&(0,o.jsx)(nl,{},void 0),!f&&(0,o.jsx)(qa,{style:C},void 0)]}),void 0)},cl=e=>{const{containerStyle:t,contentStyle:i,users:n,isPanelFloatLinkedMicType:r,hideUserCoin:a,canShowUserInfo:l}=e,s=(0,p.useMemo)((()=>n.length||0),[n]);return(0,o.jsx)(Ea,Object.assign({style:t},{children:(0,o.jsx)(Ra,Object.assign({style:i},{children:n.map(((e,t)=>(0,o.jsx)(dl,{index:t,user:e,isPanelFloatLinkedMicType:r,needMaskBg:!(r&&e.isAnchor),hideUserCoin:a,canShowUserInfo:l},`${e.uidStr}_${s}`)))}),void 0)}),void 0)},ul=e=>{const{containerWidth:t,containerHeight:i,contentWidth:n,contentHeight:r,containerTop:a,containerLeft:l,grids:s,anchorLinkMicId:d,isPanelFloatLinkedMicType:c,hideUserCoin:u,appCanvas:h,regionBorder:g,linkedUsers:m,regionsFromDSL:v,canShowUserInfo:f}=e,b=(0,p.useMemo)((()=>({width:`${t}px`,height:`${i}px`,top:`${Math.ceil(a)}px`,left:`${Math.ceil(l)}px`})),[i,l,a,t]),x=(0,p.useMemo)((()=>({width:n,height:r})),[r,n]),_=(0,p.useMemo)((()=>{if(!s.length||!m)return{linkedMicUsersArr:[],linkedMicUsersMap:{}};const e=[],t={};return s.forEach((i=>{var o,a,l,s;const u=String(null!==(o=i.uid_str)&&void 0!==o?o:""),p=m[u];if(!p)return;const v=Object.assign(Object.assign({},(0,ma.f2)({grid:i,contentStyle:{width:n,height:r},appCanvas:h,regionBorder:g,needFixSize:!c})),{userName:null!==(a=p.userName)&&void 0!==a?a:"",avatarUrl:null!==(l=p.avatarUrl)&&void 0!==l?l:"",isAnchor:i.uid_str===d,isPause:2===i.online_user_state,isAudioMuted:Boolean(i.mute_a),isVideoMuted:Boolean(i.mute_v),coin:Number(null!==(s=p.coin)&&void 0!==s?s:0),uidStr:u});e.push(v),void 0!==i.p&&(t[i.p]=v)})),{linkedMicUsersArr:e,linkedMicUsersMap:t}}),[s,m,n,r,h,g,d,c]),y=(0,p.useMemo)((()=>{if(!s.length||!m)return[];const{linkedMicUsersArr:e,linkedMicUsersMap:t}=_;if(v.length&&e.length){const e=[];return v.forEach(((i,o)=>{const a=t[o];a?e.push(a):e.push(Object.assign(Object.assign({},(0,ma.f2)({grid:i,contentStyle:{width:n,height:r},appCanvas:h,regionBorder:g,needFixSize:!c})),{userName:"",avatarUrl:"",isAnchor:!1,isPause:!1,isAudioMuted:!1,isVideoMuted:!1,coin:0,uidStr:`${d}-${o}`,isEmpty:!0}))})),e}return e}),[s,m,v,n,r,d,h,g,c,_]);return(0,o.jsx)(cl,{containerStyle:b,isPanelFloatLinkedMicType:c,contentStyle:x,users:y,hideUserCoin:u,canShowUserInfo:f},void 0)},pl=(0,we.Z)("div",{target:"e1kupnb0"})((({theme:e})=>[{width:"100%",height:"100%",background:e.colors.ConstBGInverse,position:"relative",borderRadius:4,overflow:"hidden"}]),"label:DivLiveWrapper;"),hl=(0,we.Z)("div",{target:"e1kupnb1"})((()=>[{width:"100%",height:370,position:"absolute",transform:"translateY(-50%)",top:"50%",right:0,zIndex:1}]),"label:DivLiveCutter;"),gl=(0,we.Z)("div",{target:"e1kupnb2"})({width:"100%",height:"100%",position:"absolute",zIndex:3,pointerEvents:"none",top:0,left:0},"label:DivFeedPlayerMultiGuestPanelWrapper;");var ml;!function(e){e.Duration="livesdk_live_window_duration_v2"}(ml||(ml={}));const vl=(e,t)=>{(null==t?void 0:t.sendBeacon)?mt.W.beconEvent("livesdk_live_window_duration_v2",e):mt.W.event("livesdk_live_window_duration_v2",e)},fl=e=>{const{url:t,roomId:i,liveLinkTeaParams:n,onPlay:r}=e,[a,l]=(0,b.KO)(m),s=(0,p.useRef)(),d=(0,p.useRef)(!1),c=(0,p.useRef)(!1),[u,h]=(0,p.useState)(!0),[g]=(0,b.KO)(fa),{handleMultiGuestPanelShow:v}=ba({roomId:i,active:!0}),f=(0,p.useRef)(0),x=(0,p.useMemo)((()=>({enter_from_merge:n.enter_from_merge,enter_method:n.enter_method,follow_status:n.follow_status,anchor_id:n.anchor_id,room_id:n.room_id,action_type:n.action_type,previous_page:mt.W.commonParams.previous_page})),[n]),_=(0,p.useCallback)((()=>{var e;if(!d.current)return null===(e=s.current)||void 0===e||e.retry(),void(d.current=!0);gt.en.handleLivePreviewFail(Object.assign({},x)),l(Object.assign(Object.assign({},a),{isError:!0}))}),[a,l,d,s,n]),y=(0,p.useCallback)((()=>{r(),h(!0),f.current=Date.now(),c.current=!1}),[n]),j=(0,p.useCallback)((()=>{f.current>0&&!c.current&&vl(Object.assign(Object.assign({},x),{duration:Date.now()-f.current}),{sendBeacon:!0})}),[f,x]),k=(0,p.useCallback)((()=>{h(!1),j()}),[h,j]);(0,p.useEffect)((()=>{const e=()=>{j(),c.current=!0};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[]),(0,p.useEffect)((()=>()=>{j(),c.current=!0}),[]);const{handleMultiGuestSeiParsedCallback:w,multiGuestMaskPanelProps:C}=_a({hideUserCoin:!0,handleMultiGuestShow:v,linkedUsers:g.linkedUsers}),{handleMultiGuestSeiParsed:I}=Ca({handleMultiGuestSeiParsedCallback:w,url:t,handleMultiGuestSeiParsedReport:()=>{}}),S=(0,p.useCallback)(((e,t,i)=>{e&&t&&i&&I(e,t,i)}),[I]),T=(0,Ia.M)({handleParentPlayError:_}),{handlePlayError:P,handleStreamEnd:O}=(0,Sa.r)({active:!0,handleParentPlayError:_,roomId:i,playerRef:s,noPreCheck:!0});return(0,o.jsx)(pl,{children:(0,o.jsxs)(hl,{children:[(0,o.jsx)(Ma,Object.assign({ref:s,visible:!0,defaultVolume:0,showVolumeIcon:!1,defaultMuted:!0,playing:u,autoInit:!0,autoplay:!0,autoMutedPlay:!0,url:t,onPlay:y,onPause:k,onPlayError:P,onStreamEnd:O,onSeiParsed:S},T),void 0),(0,o.jsx)(gl,{children:(0,o.jsx)(ul,Object.assign({},C,{canShowUserInfo:!1}),void 0)},void 0)]},void 0)},void 0)};var bl=i(45378),xl=i(38168);const _l=(0,p.memo)((e=>{const{userData:t}=e,i=(0,c.Q)(),n=null==t?void 0:t.user,{showPreviewPlayer:r,streamUrl:a}=ea(n,"v3"),{recordingInitTime:l,sendFirstFrameDuration:s}=ha(),{ratio:d}=ga.h.compact,u=(0,ut.CN)({user:n,enterMethod:"video_live_cell"}),h=(0,p.useMemo)((()=>({enter_from_merge:u.enter_from_merge,enter_method:u.enter_method})),[u]),g=(0,p.useCallback)((()=>{s()}),[s]),m=(0,p.useCallback)((()=>{gt.en.handleRecLivePlay({enter_from_merge:u.enter_from_merge,enter_method:u.enter_method,follow_status:u.follow_status,anchor_id:u.anchor_id,room_id:u.room_id,action_type:u.action_type,previous_page:mt.W.commonParams.previous_page})}),[u]);return(0,p.useEffect)((()=>{r&&(gt.en.handleLiveShow({enter_from_merge:u.enter_from_merge,enter_method:u.enter_method,follow_status:u.follow_status,anchor_id:u.anchor_id,room_id:u.room_id,action_type:u.action_type,previous_page:mt.W.commonParams.previous_page}),l())}),[r]),(0,o.jsx)(o.Fragment,{children:r&&a?(0,o.jsxs)(bl.HZ,Object.assign({hasDescUnderItem:!0},{children:[(0,o.jsx)(xl.T,Object.assign({ratio:d,hasDescUnderItem:!0,copyrightMuted:!1},{children:(0,o.jsx)(ht.G,Object.assign({uniqueId:(null==n?void 0:n.uniqueId)||"",secUid:null==n?void 0:n.secUid,teaParams:u,extraQuery:h,onClick:m},{children:(0,o.jsxs)(aa,{children:[(0,o.jsx)(sa,{children:(0,o.jsx)(da,{children:i("LIVE")},void 0)},void 0),(0,o.jsx)(fl,{url:a,roomId:null==n?void 0:n.roomId,liveLinkTeaParams:u,onPlay:g},void 0)]},void 0)}),void 0)}),void 0),(0,o.jsx)(la,{children:i("webLIVE_personalPage_LIVEbanner_title",{username:null==n?void 0:n.uniqueId})},void 0)]}),void 0):null},void 0)})),yl=(0,p.memo)((function({detailInfo:e,listInfo:t,listKey:i}){const{list:n,loading:r,hasMore:a}=t,{user:l}=e,s=(0,Ne.xB)({user:l,listKey:i}),{isGoogleBot:d}=(0,O.m7)((0,bt.h)((()=>["isGoogleBot"]),[])),c=(0,p.useCallback)((()=>{!r&&a&&0!==n.length&&s()}),[a,s,r,n.length]);(0,Zr.AS)(i,c);const u=(0,p.useMemo)((()=>{let e;switch(i){case"favorites":e="favourite_video";break;case"user-liked":e="liked_video";break;default:e="personal_video"}return{tab_name:e}}),[i]),h=(0,p.useMemo)((()=>"user-post"===i?[{position:0,renderNode:()=>(0,o.jsx)(_l,{userData:e},void 0)}]:[]),[i,e]);return(0,o.jsx)(na.X,{pageType:1,itemList:n,itemListKey:i,loading:r,onHitBottom:c,ssrLimit:16,ssrLimitDisable:d,teaParams:u,renderMap:h},void 0)}));function jl(){return(0,o.jsx)(oa.I,{cardWidth:"196px",cardHeight:"260px",radius:"2px",gap:"2px"},void 0)}const kl=(0,p.memo)((function({detailInfo:e,listKey:t}){var i;const{user:n}=e,a=null!==(i=null==n?void 0:n.uniqueId)&&void 0!==i?i:"",l=(0,r.m)(M.h,{selector:e=>{var i;return null!==(i=e[t])&&void 0!==i?i:Qr.n},dependencies:[t,a]}),{hasMore:s,list:d,statusCode:u,preloadList:h}=l,g=(0,Ne.xB)({user:n,listKey:t}),m=function({user:e,listKey:t}){const i=(0,c.Q)(),{relation:n,openFavorite:r,uniqueId:a="",privateAccount:l,secret:s,secUid:d}=(0,O.m7)(e),u=null!=l?l:s,p=(0,Ne.JW)({uniqueId:a,secUid:d});return 4===n?{title:i("profile_no_content_title"),desc:i("profile_others_blocked_post_body"),icon:(0,o.jsx)(We.Z,Object.assign({},T.vj),void 0)}:5===n?{title:i("profile_no_content_title"),desc:i("profile_others_block_post_body"),icon:(0,o.jsx)(We.Z,Object.assign({},T.vj),void 0)}:u&&!p&&1!==n&&2!==n?{title:i("This account is private"),desc:i("profile_others_private_body"),icon:(0,o.jsx)(We.Z,Object.assign({},T.vj),void 0)}:"user-liked"!==t||r||p?null:{title:i("profile_others_like_private_title"),desc:i("profile_others_like_private_body").replace("%s",a),icon:(0,o.jsx)("div",Object.assign({"data-e2e":"like-lock-icon",style:{display:"flex"}},{children:(0,o.jsx)(Ke.Z,Object.assign({},T.vj),void 0)}),void 0),isLikePrivate:!0}}({user:n,listKey:t}),{showPreviewPlayer:v}=ea(n,"v3");if((0,ta.sp)(null!=h?h:[]),(0,p.useEffect)((()=>{!m&&0===u&&0===d.length&&s&&(null==n?void 0:n.secUid)&&g()}),[s,d.length,g,m,u,null==n?void 0:n.secUid]),m){const{title:e,desc:t,icon:i,isLikePrivate:n}=m;let r="",a="";return n&&(r="like-title",a="like-desc"),(0,o.jsx)(ia.T,{isFullScreen:!0,title:e,desc:t,iconElem:i,e2eTitle:r,e2eDesc:a},void 0)}return(0,o.jsx)(S.LX,{Error:$e,Empty:Ye,List:yl,Skeleton:jl,detailInfo:e,listInfo:l,listKey:t,hasLivePreview:v},void 0)})),wl=(0,p.memo)((function({detailInfo:e}){const{isRTL:t}=(0,et.Y)(),i=(0,c.Q)(),{user:r}=(0,O.m7)(e),{relation:a,secUid:l="",openFavorite:d,profileTab:u,canExpPlaylist:h=!1,privateAccount:g=!1}=(0,O.m7)(r),{uniqueId:m}=(0,C.UO)(),{showPlayListTab:v=!1}=(0,O.m7)(u),f=(0,Ne.JW)({secUid:l,uniqueId:m}),{state:{isJumpToFavorite:b=!1}={}}=(0,C.TH)(),x=(0,p.useRef)(null),_=(0,p.useRef)(null),y=(0,p.useRef)(null),j=(0,p.useRef)(m),k=(0,p.useRef)(b),[w,I]=(0,p.useState)("user-post"),[S,P]=(0,p.useState)({left:0,width:0}),D=(0,n.q)(M.h),L=(0,ft.fz)(Hn.KF),F=(0,p.useMemo)((()=>({"user-post":x,favorites:_,"user-liked":y})),[]);(0,p.useEffect)((()=>{var e,t;j.current!==m&&(I("user-post"),P({left:0,width:null!==(t=null===(e=x.current)||void 0===e?void 0:e.offsetWidth)&&void 0!==t?t:0}),D.setLoading({key:"user-liked",loading:!1}),j.current=m)}),[D,m]);const U=(0,s.zI)();(0,p.useEffect)((()=>{U.setItemListKey(w)}),[U,w]),(0,p.useEffect)((()=>{var e,t;P({left:0,width:null!==(t=null===(e=x.current)||void 0===e?void 0:e.offsetWidth)&&void 0!==t?t:0})}),[]);const B=(0,p.useCallback)((e=>{const{offsetWidth:i}=(0,O.m7)(e.parentNode),{offsetLeft:o,offsetWidth:n}=e;return t?o+n-i:o}),[t]),Z=(0,p.useCallback)((e=>t=>{if(w===e)return;"favorites"!==e||k.current||Gn.d.handleEnterFavourite("click_favourite_tab"),"user-liked"===e&&Vn.W.handleEnterLike("click_like_tab"),D.dispose$(),D.setLoading({key:w,loading:!1}),U.setItemListKey(e);const i=t.currentTarget,o=B(i),n=i.offsetWidth;P({left:o,width:n}),I(e),L.handleUserChangeVideoOrPlayMode()}),[w,D,U,B,L]),E=(0,p.useCallback)((e=>t=>{13!==t.keyCode&&32!==t.keyCode||Z(e)(t)}),[Z]),R=(0,p.useCallback)((e=>{const t=B(e.currentTarget),i=e.currentTarget.offsetWidth;P({left:t,width:i})}),[B]),z=(0,p.useCallback)((()=>{var e;const t=B(F[w].current);P({left:t,width:null===(e=F[w].current)||void 0===e?void 0:e.offsetWidth})}),[B,w,F]);(0,p.useEffect)((()=>{k.current=b}),[b]),(0,p.useEffect)((()=>{if(k.current){Z("favorites")({currentTarget:F.favorites.current}),k.current=!1;const e=Object.assign(Object.assign({},window.history.state),{state:{isJumpToFavorite:!1}});window.history.replaceState(e,document.title)}}),[Z,F,b]);const W=!(g&&!f)&&v&&!(4===a),q=f&&h;return(0,o.jsxs)(T.j$,{children:[(0,o.jsxs)(Hr,Object.assign({onMouseLeave:z},{children:[(0,o.jsx)(Vr,Object.assign({"aria-selected":"user-post"===w,role:"tab",active:"user-post"===w,ref:x,"data-e2e":"videos-tab",onMouseEnter:R,onClickCapture:Z("user-post"),onKeyDown:E("user-post"),tabIndex:0},{children:(0,o.jsx)("span",{children:i("Videos")},void 0)}),void 0),(0,o.jsxs)($r,Object.assign({"aria-selected":"favorites"===w,role:"tab",active:"favorites"===w,onMouseEnter:R,onClickCapture:Z("favorites"),style:{display:f?void 0:"none"},ref:_,onKeyDown:E("favorites"),tabIndex:0},{children:[(0,o.jsx)(Nn.Z,{style:{transform:"translateY(2px)"}},void 0),(0,o.jsx)(Xr,{children:i("sortbyvv_profile_tab_text_favorites")},void 0)]}),void 0),(0,o.jsxs)(Yr,Object.assign({"aria-selected":"user-liked"===w,role:"tab",active:"user-liked"===w,ref:y,"data-e2e":"liked-tab",onMouseEnter:R,onClickCapture:Z("user-liked"),onKeyDown:E("user-liked"),tabIndex:0},{children:[!d&&(0,o.jsx)(Nn.Z,{style:{transform:"translateY(2px)"}},void 0),(0,o.jsx)(Xr,{children:i("liked")},void 0)]}),void 0),(0,o.jsx)(Kr,{style:{transform:`translateX(${S.left}px)`,width:S.width}},void 0)]}),void 0),"user-post"===w&&(0,o.jsxs)(o.Fragment,{children:[q&&(0,o.jsx)(Fr,{showPlaylistCards:W},void 0),W&&(0,o.jsx)(Nr,{isSelf:f},void 0)]},void 0),(0,o.jsx)(kl,{detailInfo:e,listKey:w},void 0)]},void 0)})),Cl=ke.F4`
  0% {
    transform: scale3d(1, 0, 1);
    opacity: 0;
  }

  100% {
    transform: scale3d(1, 1, 1);
    opacity: 1;
  }
`,Il=400,Sl=(0,we.Z)("div",{target:"eq582980"})((({theme:e,scaleInShow:t})=>[{display:"flex",width:"100%",height:0,background:e.colors.ConstBGInverse,transform:"scale3d(1, 0, 1)",transformOrigin:"0 0",opacity:0,position:"relative"},"ltr"===e.direction?{justifyContent:"right"}:{justifyContent:"left"},t&&{height:Il,animation:`${Cl} .5s cubic-bezier(0.19, 1, 0.22, 1) forwards`}]),"label:DivLiveBanner;"),Tl=(0,we.Z)("div",{target:"eq582981"})((({theme:{direction:e}})=>[{display:"flex",height:"100%",width:"100%",overflow:"hidden",flexDirection:"column",justifyContent:"center",position:"absolute",top:0,left:0,zIndex:4},"ltr"===e?{background:"linear-gradient(90deg, #000 11.72%, rgba(0, 0, 0, 0.97) 14.48%, rgba(0, 0, 0, 0.93) 16.9%, rgba(0, 0, 0, 0.89) 19.04%, rgba(0, 0, 0, 0.84) 20.93%, rgba(0, 0, 0, 0.79) 22.62%, rgba(0, 0, 0, 0.72) 24.16%, rgba(0, 0, 0, 0.66) 25.6%, rgba(0, 0, 0, 0.59) 26.98%, rgba(0, 0, 0, 0.51) 28.34%, rgba(0, 0, 0, 0.43) 29.73%, rgba(0, 0, 0, 0.35) 31.2%, rgba(0, 0, 0, 0.27) 32.79%, rgba(0, 0, 0, 0.18) 34.55%, rgba(0, 0, 0, 0.09) 36.52%, rgba(0, 0, 0, 0.03) 38.75%), linear-gradient(90deg, rgba(0, 0, 0, 0.30) 72.03%, rgba(0, 0, 0, 0.29) 74.89%, rgba(0, 0, 0, 0.28) 77.39%, rgba(0, 0, 0, 0.27) 79.6%, rgba(0, 0, 0, 0.25) 81.56%, rgba(0, 0, 0, 0.24) 83.31%, rgba(0, 0, 0, 0.22) 84.91%, rgba(0, 0, 0, 0.20) 86.39%, rgba(0, 0, 0, 0.18) 87.82%, rgba(0, 0, 0, 0.15) 89.23%, rgba(0, 0, 0, 0.13) 90.67%, rgba(0, 0, 0, 0.11) 92.19%, rgba(0, 0, 0, 0.08) 93.83%, rgba(0, 0, 0, 0.05) 95.65%, rgba(0, 0, 0, 0.03) 97.69%, rgba(0, 0, 0, 0.00) 100%)",paddingLeft:72}:{background:"linear-gradient(270deg, #000 11.25%, rgba(0, 0, 0, 0.97) 14.1%, rgba(0, 0, 0, 0.93) 16.61%, rgba(0, 0, 0, 0.89) 18.82%, rgba(0, 0, 0, 0.84) 20.78%, rgba(0, 0, 0, 0.79) 22.53%, rgba(0, 0, 0, 0.72) 24.13%, rgba(0, 0, 0, 0.66) 25.61%, rgba(0, 0, 0, 0.59) 27.04%, rgba(0, 0, 0, 0.51) 28.44%, rgba(0, 0, 0, 0.43) 29.88%, rgba(0, 0, 0, 0.35) 31.4%, rgba(0, 0, 0, 0.27) 33.05%, rgba(0, 0, 0, 0.18) 34.87%, rgba(0, 0, 0, 0.09) 36.91%, rgba(0, 0, 0, 0.03) 39.22%), linear-gradient(270deg, rgba(0, 0, 0, 0.30) 72.03%, rgba(0, 0, 0, 0.29) 74.89%, rgba(0, 0, 0, 0.28) 77.39%, rgba(0, 0, 0, 0.27) 79.6%, rgba(0, 0, 0, 0.25) 81.56%, rgba(0, 0, 0, 0.24) 83.31%, rgba(0, 0, 0, 0.22) 84.91%, rgba(0, 0, 0, 0.20) 86.39%, rgba(0, 0, 0, 0.18) 87.82%, rgba(0, 0, 0, 0.15) 89.23%, rgba(0, 0, 0, 0.13) 90.67%, rgba(0, 0, 0, 0.11) 92.19%, rgba(0, 0, 0, 0.08) 93.83%, rgba(0, 0, 0, 0.05) 95.65%, rgba(0, 0, 0, 0.03) 97.69%, rgba(0, 0, 0, 0.00) 100%)",paddingRight:72}]),"label:DivLiveTitleWrapper;"),Pl=(0,we.Z)("div",{target:"eq582982"})((({theme:e})=>({fontSize:"32px",fontStyle:"normal",fontWeight:700,lineHeight:"120%",color:e.colors.ConstTextInverse,marginTop:4})),"label:DivLiveTitle;"),Ol=(0,we.Z)("div",{target:"eq582983"})((({theme:e})=>({display:"flex",alignItems:"center",fontSize:"18px",fontStyle:"normal",fontWeight:400,lineHeight:"130%",color:e.colors.ConstTextInverse,marginTop:24})),"label:DivLiveSubTitle;"),Ml=(0,we.Z)("div",{target:"eq582984"})({height:26},"label:DivLiveBadgeWrapper;"),Dl=(0,we.Z)("span",{target:"eq582985"})((({theme:e})=>[(0,Ie.GI)({theme:e,typography:"P2",fontWeight:"semiBold",color:"ConstTextInverse"}),{display:"inline-block",height:26,background:"linear-gradient(131deg, #FF1764 0%, #ED3495 94.15%)",lineHeight:"22px",padding:"2px 8px",borderRadius:"5px"}]),"label:SpanLiveBadge;"),Ll=(0,we.Z)("div",{target:"eq582986"})((({theme:e})=>({display:"flex",transform:"ltr"===e.direction?"none":"rotateY(180deg)"})),"label:DivIconWrapper;");var Fl=i(14613);const Ul=(0,we.Z)("div",{target:"e18i8ga0"})((({theme:e,ratio:t})=>[{width:t>1?Math.floor(t*Il):463,height:Il,background:e.colors.ConstBGInverse,position:"relative",overflow:"hidden"}]),"label:DivLiveWrapper;"),Bl=(0,we.Z)("div",{target:"e18i8ga1"})((({ratio:e})=>[{width:e>1?Math.floor(e*Il):463,height:e>1?"100%":Math.floor(463/e),position:"absolute",left:"50%",zIndex:1},e>1?{transform:"translateX(-50%)",top:0}:{transform:"translate(-50%, -50%)",top:"50%"}]),"label:DivLiveCutter;"),Zl=(0,we.Z)("div",{target:"e18i8ga2"})({width:"100%",height:"100%",position:"absolute",zIndex:3,pointerEvents:"none",top:0,left:0},"label:DivFeedPlayerMultiGuestPanelWrapper;"),El=e=>{const{url:t,roomId:i,liveLinkTeaParams:n,onPlay:r}=e,a=(0,p.useRef)(),l=(0,p.useRef)(!1),s=(0,p.useRef)(!1),[d,c]=(0,p.useState)(1),[u,h]=(0,b.KO)(m),[g]=(0,b.KO)(fa),[v,f]=(0,p.useState)(!0),x=(0,p.useRef)(0),{handleMultiGuestPanelShow:_}=ba({roomId:i,active:!0}),y=(0,p.useMemo)((()=>({enter_from_merge:n.enter_from_merge,enter_method:n.enter_method,follow_status:n.follow_status,anchor_id:n.anchor_id,room_id:n.room_id,action_type:n.action_type,previous_page:mt.W.commonParams.previous_page})),[n]),j=(0,p.useCallback)((()=>{var e;if(!l.current)return null===(e=a.current)||void 0===e||e.retry(),void(l.current=!0);gt.en.handleLivePreviewFail(Object.assign({},y)),h(Object.assign(Object.assign({},u),{isError:!0}))}),[a,l,n,u,h]),k=(0,p.useCallback)((()=>{f(!0),r(),x.current=Date.now(),s.current=!1}),[r,n]),w=(0,p.useCallback)((()=>{x.current>0&&!s.current&&vl(Object.assign(Object.assign({},y),{duration:Date.now()-x.current}),{sendBeacon:!0})}),[x,y]),C=(0,p.useCallback)((()=>{f(!1),w()}),[f,w]);(0,p.useEffect)((()=>{const e=()=>{w(),s.current=!0};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[]),(0,p.useEffect)((()=>()=>{w(),s.current=!0}),[]);const{handleMultiGuestSeiParsedCallback:I,multiGuestMaskPanelProps:S}=_a({hideUserCoin:!0,handleMultiGuestShow:_,linkedUsers:g.linkedUsers}),{handleMultiGuestSeiParsed:T}=Ca({handleMultiGuestSeiParsedCallback:I,url:t,handleMultiGuestSeiParsedReport:()=>{}}),P=(0,p.useCallback)(((e,t,i)=>{e&&t&&i&&T(e,t,i)}),[T]),O=(0,p.useCallback)(((e,t)=>{c(e/t)}),[c]),M=(0,Ia.M)({handleParentPlayError:j}),{handlePlayError:D,handleStreamEnd:L}=(0,Sa.r)({active:!0,handleParentPlayError:j,roomId:i,playerRef:a,noPreCheck:!0});return(0,o.jsx)(Ul,Object.assign({ratio:d},{children:(0,o.jsxs)(Bl,Object.assign({ratio:d},{children:[(0,o.jsx)(Ma,Object.assign({ref:a,visible:!0,defaultVolume:0,showVolumeIcon:!1,defaultMuted:!0,playing:v,autoInit:!0,autoplay:!0,autoMutedPlay:!0,url:t,onPlay:k,onPause:C,onPlayError:D,onStreamEnd:L,onLoadedData:O,onSeiParsed:P},M),void 0),(0,o.jsx)(Zl,{children:(0,o.jsx)(ul,Object.assign({},S,{canShowUserInfo:!1}),void 0)},void 0)]}),void 0)}),void 0)},Rl=(0,p.memo)((e=>{const{userData:t}=e,i=(0,c.Q)(),[n,r]=(0,p.useState)(!1),a=null==t?void 0:t.user,{showPreviewPlayer:l,streamUrl:s,userCount:d}=ea(a,"v2"),{recordingInitTime:u,sendFirstFrameDuration:h}=ha(),g=(0,ut.CN)({user:a,enterMethod:"top_live_cell"}),m=(0,p.useMemo)((()=>({enter_from_merge:g.enter_from_merge,enter_method:g.enter_method})),[g]),v=(0,p.useCallback)((()=>{gt.en.handleRecLivePlay({enter_from_merge:g.enter_from_merge,enter_method:g.enter_method,follow_status:g.follow_status,anchor_id:g.anchor_id,room_id:g.room_id,action_type:g.action_type,previous_page:mt.W.commonParams.previous_page})}),[g]),f=(0,p.useCallback)((()=>{r(!0),h()}),[r,h]);return(0,p.useEffect)((()=>{l&&(gt.en.handleLiveShow({enter_from_merge:g.enter_from_merge,enter_method:g.enter_method,follow_status:g.follow_status,anchor_id:g.anchor_id,room_id:g.room_id,action_type:g.action_type,previous_page:mt.W.commonParams.previous_page}),u())}),[l]),(0,o.jsx)(o.Fragment,{children:!(!l||!s)&&(0,o.jsx)(ht.G,Object.assign({uniqueId:(null==a?void 0:a.uniqueId)||"",secUid:null==a?void 0:a.secUid,teaParams:g,extraQuery:m,onClick:v},{children:(0,o.jsxs)(Sl,Object.assign({scaleInShow:n},{children:[(0,o.jsxs)(Tl,{children:[(0,o.jsx)(Ml,{children:(0,o.jsx)(Dl,{children:i("LIVE")},void 0)},void 0),(0,o.jsx)(Pl,{children:i("webLIVE_personalPage_LIVEbanner_title",{username:null==a?void 0:a.uniqueId})},void 0),(0,o.jsxs)(Ol,{children:[i("webLIVE_personalPage_LIVEbanner_numViewerDesc",{num:d}),(0,o.jsx)(Ll,{children:(0,o.jsx)(nn.BP,{icon:Fl.a,size:14,color:"TextPrimary"},void 0)},void 0)]},void 0)]},void 0),(0,o.jsx)(El,{url:s,roomId:null==a?void 0:a.roomId,liveLinkTeaParams:g,onPlay:f},void 0)]}),void 0)}),void 0)},void 0)})),zl=(0,we.Z)("div",{target:"e1ej9wgb0"})({flex:"1 1 auto",overflow:"hidden"},"label:UserContainer;"),Wl=[0,10222],ql=w()(a.j,(0,S.Pn)("user-post"),(0,l.Z)("others_homepage"))((function({containerID:e,tabIndex:t}){var i;const a=(0,s.QR)((e=>e.jumpSamePageTime)),[{uniqueId:l,statusCode:u=0,profileState:h},g]=(0,n.b)(B.t),m=(0,r.m)(d.z,{selector:e=>{var t;const i=e.users[null!=l?l:""];return"number"!=typeof(null===(t=null==i?void 0:i.extraInfo)||void 0===t?void 0:t.statusCode)?{statusCode:u}:{statusCode:u,user:i,stats:e.stats[null!=l?l:""]}},dependencies:[u,l]}),v=(0,c.Q)(),{uniqueId:f}=(0,C.UO)(),b=f.toLowerCase(),k=(0,Ne.JW)({uniqueId:b,secUid:f}),w=(0,p.useMemo)((()=>k?"personal_homepage":"others_homepage"),[k]);(0,I.a)(w,a);const P=(0,Ne.bT)();return x(null===(i=m.user)||void 0===i?void 0:i.roomId,"webapp_profile"),(0,p.useEffect)((()=>{const e=window.location.search;/from=rss_publish/.test(e)&&j.h.open({content:v("podcasts_linkFullEpisodes_publishEpisodePage_confirmationBanner"),duration:3})}),[]),(0,p.useEffect)((()=>{g.getUserInfo(Object.assign({},P))}),[g,P]),(0,p.useEffect)((()=>{const e=(0,_.St)(y.b7);if(e){let t=v("editprofile_toast");e===String("1")&&(t=v("blue_v_change_name_toast_request_submitted").replace("%d",Ee)),j.h.open({content:t,duration:2}),(0,_.lD)(y.b7)}}),[v]),(0,p.useEffect)((()=>g.resetUserPage),[g,f]),"create_playlist"===h||"create_playlist_ready"===h?(0,o.jsx)(ge,{},void 0):(0,o.jsxs)(zl,{children:[(0,o.jsx)(Rl,{userData:m},void 0),(0,o.jsx)(T.Ae,Object.assign({"data-e2e":"user-page",id:e,tabIndex:t},{children:(0,o.jsx)(S.sR,{id:null!=l?l:"",detailInfo:m,successStatusCodeList:Wl,List:wl,Header:An,Error:Ve},void 0)}),void 0)]},void 0)})),Al=ql},55453:(e,t,i)=>{i.d(t,{m:()=>S,j:()=>T});var o=i(71030),n=i(99333),r=i(31738),a=i(5909),l=i(52201),s=i(87567),d=i(30478),c=i(53292),u=i(22549),p=i(44720),h=i(65575),g=i(22940),m=i(14568),v=i(22403),f=i(29054),b=i(77307),x=i(32565);const _=(0,b.i)({csr:e=>(0,v.__awaiter)(void 0,void 0,void 0,(function*(){const{url:t}=e;return yield x.h.get("/api/seo/redirection/",{query:{url:t}})}))}),y={needRedirect:!1},j=(0,p.j)({initState:y,rehydrationDataKey:"shared.seo.pageRedirect",fetchAction:(e,t)=>(0,v.__awaiter)(void 0,void 0,void 0,(function*(){const{url:e}=t;let i;try{i=yield _(t)}catch(t){return{needRedirect:!1,loadedURL:e}}const{redirectURL:o}=i;return{pageRedirectURL:o,loadedURL:e,needRedirect:void 0!==o}}))}),k=(0,g.J_)(j),w=(0,f.cn)(null,((e,t)=>{t(k,y)})),C=Object.assign(Object.assign({},c.nT),u.LR),I=e=>Object.values(C).some((t=>null!==(0,a.LX)(e,{path:t})));function S(e,t){return function(i){const[{atomState:n},s]=(0,p.v)(j),{pageRedirectURL:d,loadedURL:c,needRedirect:u}=n,g=(0,h.b9)(w),v=(0,a.k6)(),f=(0,a.TH)(),b=`${l.o}${decodeURIComponent(f.pathname)}`,x=f.search;return(0,m.Y)((()=>[s({url:b}),()=>{g()}]),[b]),(0,r.useEffect)((()=>{if(d){const e=new URL(d);decodeURIComponent(e.pathname)!==decodeURIComponent(f.pathname)&&(I(e.pathname)?v.push(`${e.pathname}${x||""}`):window.location.href=d)}}),[d,v,f.pathname,x]),c!==b||u?(0,o.jsx)(o.Fragment,{children:t},void 0):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(e,Object.assign({},i),void 0)},void 0)}}function T(e){return function(t){const{pathname:i}=(0,a.TH)(),c=`${l.o}${i}`,[{abtest:u},p]=(0,n.b)(d.T),[h,v]=(0,s.j0)((e=>e.abtest),{equalityFn:g.wU});return(0,m.Y)((()=>v.setAbtest(c)),[p,c]),(0,r.useEffect)((()=>{h&&!u&&p.setAbTest(h)}),[h,u]),u?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(e,Object.assign({},t),void 0)},void 0):null}}}}]);