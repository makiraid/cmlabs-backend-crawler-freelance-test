document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("btn-submit-subscribe"),t=document.getElementById("email-subscribe"),n=document.getElementById("toast-error"),a=document.getElementById("toast-success"),l=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;t.addEventListener("input",(function(){""!=t.value?e.disabled=!1:e.disabled=!0}));var i=document.querySelector("#email-event"),s=document.querySelector("#btn-subscribe-event");function o(e,t){e.setAttribute("disabled","");var i=l.test(t.value);return t.value?i?void fetch("/data/subscribe",{headers:{"Content-Type":"application/json",Accept:"application/json, text-plain, */*","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},method:"post",body:JSON.stringify({email:t.value,locale:document.getElementsByTagName("html")[0].getAttribute("lang")})}).then((function(e){return e.json()})).then((function(l){e.removeAttribute("disabled"),l.status?(a.querySelector(".message").innerHTML="Terima kasih telah berlangganan!",a.style.display="block",setTimeout((function(){a.style.display="none"}),3e3),t.value=""):(n.querySelector(".message").innerHTML="Gagal berlangganan",n.style.display="block",setTimeout((function(){n.style.display="none"}),3e3))})).catch((function(t){e.removeAttribute("disabled"),console.log(t)})):(n.querySelector(".message").innerHTML="Gagal berlangganan. Format e-mail salah!",n.style.display="block",setTimeout((function(){n.style.display="none"}),3e3),e.removeAttribute("disabled"),null):(n.querySelector(".message").innerHTML="Gagal berlangganan. Form e-mail wajib diisi!",n.style.display="block",setTimeout((function(){n.style.display="none"}),3e3),e.removeAttribute("disabled"),null)}null==s||s.addEventListener("click",(function(e){e.preventDefault(),o(s,i)})),e.addEventListener("click",(function(n){n.preventDefault(),o(e,t)}))}));