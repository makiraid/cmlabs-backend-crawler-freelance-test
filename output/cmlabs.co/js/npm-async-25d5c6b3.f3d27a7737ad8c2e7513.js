"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[492],{86247:(e,t,n)=>{function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}n.d(t,{PA:()=>r,ZQ:()=>o,_x:()=>s,qH:()=>a,u:()=>u})},55853:(e,t,n)=>{n.d(t,{Vc:()=>r,_e:()=>i});var r={VIDEO:"video",AUDIO:"audio",METADATA:"metadata"},i={AVC:"avc",HEVC:"hevc"}},78817:(e,t,n)=>{n.d(t,{N:()=>o});var r=n(86247),i=n(29174),a=n(98655),s=function(){function e(t,n){(0,r.PA)(this,e),this.name=t||"",this._prefix="[".concat(this.name,"]"),e.disabled=n}return(0,r.qH)(e,[{key:"debug",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).debug.apply(t,[this._prefix].concat(r))}}},{key:"log",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).log.apply(t,[this._prefix].concat(r))}}},{key:"warn",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).warn.apply(t,[this._prefix].concat(r))}}},{key:"error",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).error.apply(t,[this._prefix].concat(r))}}},{key:"table",value:function(){var t;e.disabled||(console.group(this._prefix),(t=console).table.apply(t,arguments),console.groupEnd())}}],[{key:"enable",value:function(){e.disabled=!1}},{key:"disable",value:function(){e.disabled=!0}}]),e}();(0,r._x)(s,"disabled",!0);var o=function(){function e(t,n,i){(0,r.PA)(this,e),this.videoTrack=t,this.audioTrack=n;var a=/Chrome\/([^.]+)/.exec(navigator.userAgent);this.forceFirstIDR=a&&Number(a[1])<50,this.log=new s("FMP4Remuxer",!i||!i.openLog||!i.openLog)}return(0,r.qH)(e,[{key:"remux",value:function(){var e,t,n,r,a,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=this.videoTrack,c=this.audioTrack,l=u.exist(),f=c.exist(),d=[];return s&&(o&&o.initMerge?(l&&d.push(this.videoTrack),f&&d.push(this.audioTrack),n=i.b.initSegment(d)):(l&&(e=i.b.initSegment([this.videoTrack])),f&&(t=i.b.initSegment([this.audioTrack])))),l&&u.hasSample()&&(r=this._remuxVideo()),f&&c.hasSample()&&(a=this._remuxAudio()),u.samples=[],c.samples=[],{initSegment:n,videoInitSegment:e,audioInitSegment:t,videoSegment:r,audioSegment:a}}},{key:"_remuxVideo",value:function(){var e=this.videoTrack;this.forceFirstIDR&&(e.samples[0].flag={dependsOn:2,isNonSyncSample:0});var t=e.samples,n=0;t.forEach((function(e){n+=e.units.reduce((function(e,t){return e+t.byteLength}),0),n+=4*e.units.length}));for(var r,s=new Uint8Array(n),o=new DataView(s.buffer),u=function(e,n){n=t[c];var i=0;n.units.forEach((function(t){o.setUint32(e,t.byteLength),e+=4,s.set(t,e),e+=t.byteLength,i+=4+t.byteLength})),n.size=i,f=e,r=n},c=0,l=t.length,f=0;c<l;c++)u(f,r);var d=i.b.mdat(s),h=i.b.moof([e]);return(0,a.gJ)(h,d)}},{key:"_remuxAudio",value:function(){var e=this.audioTrack,t=new Uint8Array(e.samples.reduce((function(e,t){return e+t.size}),0));e.samples.reduce((function(e,n){return t.set(n.data,e),e+n.size}),0);var n=i.b.mdat(t),r=i.b.moof([e]);return(0,a.gJ)(r,n)}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset()}}]),e}()},17713:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(86247),i=n(55853),a=n(29174),s=n(98655),o=function(){function e(t,n){(0,r.PA)(this,e),this.videoTrack=t,this.audioTrack=n}return(0,r.qH)(e,[{key:"remux",value:function(e,t){this.videoTrack=e||this.videoTrack,this.audioTrack=t||this.audioTrack;var n,r,i=(null==e?void 0:e.exist())&&(null==e?void 0:e.hasSample()),a=(null==t?void 0:t.exist())&&(null==t?void 0:t.hasSample());return i&&a?n=this._remuxMix(e,t):i?n=this._remuxTrack(e):a&&(r=this._remuxTrack(t)),e&&(e.samples=[]),t&&(t.samples=[]),{videoSegment:n,audioSegment:r}}},{key:"_remuxMix",value:function(e,t){var n=a.b.ftyp([e,t]),r=this._remuxData(e,n.byteLength+8),i=r.mdatData,o=r.chunkOffset,u=this._remuxData(t,o).mdatData,c=a.b.mdat((0,s.gJ)(i,u)),l=a.b.moovMP4([e,t]);return e.ext=void 0,t.ext=void 0,e.samples=[],t.samples=[],(0,s.gJ)(n,c,l)}},{key:"_remuxTrack",value:function(e){var t=a.b.ftyp([e]),n=this._remuxData(e,t.byteLength+8).mdatData,r=a.b.mdat(n),i=a.b.moovMP4([e]);return e.ext=void 0,e.samples=[],(0,s.gJ)(t,r,i)}},{key:"_remuxData",value:function(e,t){var n=this,r=e.type===i.Vc.VIDEO,a=e.samples,s=0;r?a.forEach((function(e){s+=e.units.reduce((function(e,t){return e+t.byteLength}),0),s+=4*e.units.length})):s=a.reduce((function(e,t){return e+t.size}),0);for(var o,u=new Uint8Array(s),c=new DataView(u.buffer),l=e.ext={stts:[],stsc:[],stsz:[],stco:[],stss:[],ctts:[]},f=0,d=0,h=a.length,p=function(){o=a[v],d+=o.duration;var e=r?0:o.size;r?o.units.forEach((function(t){c.setUint32(f,t.byteLength),f+=4,u.set(t,f),f+=t.byteLength,e+=4+t.byteLength})):(u.set(o.data,f),f+=e),o.size=e,l.stsz.push(e),r&&n._fillCttsSamples(l.ctts,o.cts),n._fillSttsSamples(l.stts,o,a[v+1]),n._fillStcoSamples(l.stco,v,1,t),t+=e,r&&o.keyframe&&l.stss.push(v+1)},v=0;v<h;v++)p();return e.duration=d,this._fillStscSamples(l.stsc,h,1),{mdatData:u,chunkOffset:t}}},{key:"_fillSttsSamples",value:function(e,t,n){var r=e[e.length-1];n?r&&r.value===t.duration?r.count++:e.push({value:t.duration,count:1}):r?r.count++:e.push({value:40,count:1})}},{key:"_fillCttsSamples",value:function(e,t){var n=e[e.length-1];n&&n.value===t?n.count++:e.push({value:t,count:1})}},{key:"_fillStcoSamples",value:function(e,t,n,r){t%n||e.push(r)}},{key:"_fillStscSamples",value:function(e,t,n){if(t<=n)e.push({firstChunk:1,samplesPerChunk:t,sampleDescIndex:1});else{var r=Math.floor(t/n),i=t%n;e.push({firstChunk:1,samplesPerChunk:n,sampleDescIndex:1}),i&&e.push({firstChunk:r+1,samplesPerChunk:i,sampleDescIndex:1})}}}]),e}()},29174:(e,t,n)=>{n.d(t,{b:()=>u});var r=n(86247),i=n(55853),a=n(98655),s=function(){function e(){(0,r.PA)(this,e),this.buffer=new Uint8Array(0)}return(0,r.qH)(e,[{key:"write",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){t?e.buffer=function(e){for(var t=0,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r.forEach((function(e){t+=e.length}));var a=new e(t),s=0;return r.forEach((function(e){a.set(e,s),s+=e.length})),a}(Uint8Array,e.buffer,t):window.console.warn(t)}))}}],[{key:"writeUint16",value:function(e){return new Uint8Array([e>>8&255,255&e])}},{key:"writeUint32",value:function(e){return new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e])}}]),e}(),o=Math.pow(2,32)-1,u=function(){function e(){(0,r.PA)(this,e)}return(0,r.qH)(e,null,[{key:"box",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=8+(n=n.filter(Boolean)).reduce((function(e,t){return e+t.byteLength}),0),a=new Uint8Array(i);a[0]=i>>24&255,a[1]=i>>16&255,a[2]=i>>8&255,a[3]=255&i,a.set(e,4);var s=8;return n.forEach((function(e){a.set(e,s),s+=e.byteLength})),a}},{key:"ftyp",value:function(t){return t.find((function(e){return e.type===i.Vc.VIDEO&&e.codecType===i._e.HEVC}))?e.FTYPHEV1:e.FTYPAVC1}},{key:"initSegment",value:function(t){var n=e.ftyp(t);return(0,a.gJ)(n,e.moov(t))}},{key:"pssh",value:function(t){var n=new Uint8Array([1,0,0,0].concat([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75],[0,0,0,1],(0,a.Qc)(t.kid),[0,0,0,0]));return e.box(e.types.pssh,n)}},{key:"moov",value:function(t){if(t[0].useEME&&(t[0].encv||t[0].enca)){t[0].pssh||(t[0].pssh={kid:t[0].kid});var n=this.pssh(t[0].pssh);return e.box.apply(e,[e.types.moov,e.mvhd(t[0].mvhdDurtion||t[0].duration,t[0].mvhdTimecale||t[0].timescale),e.mvex(t)].concat((0,r.u)(t.map((function(t){return e.trak(t)}))),[n]))}return e.box.apply(e,[e.types.moov,e.mvhd(t[0].mvhdDurtion||t[0].duration,t[0].mvhdTimecale||t[0].timescale)].concat((0,r.u)(t.map((function(t){return e.trak(t)}))),[e.mvex(t)]))}},{key:"mvhd",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4;return e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,t>>24&255,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}},{key:"trak",value:function(t){return e.box(e.types.trak,e.tkhd(t.id,t.tkhdDuration||0,t.width,t.height),e.mdia(t))}},{key:"tkhd",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.duration,t.timescale),e.hdlr(t.type),e.minf(t))}},{key:"mdhd",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4;return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,t>>24&255,t>>16&255,t>>8&255,255&t,85,196,0,0]))}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"minf",value:function(t){return e.box(e.types.minf,t.type===i.Vc.VIDEO?e.VMHD:e.SMHD,e.DINF,e.stbl(t))}},{key:"stbl",value:function(t){var n=[];return t&&t.ext&&t.ext.stss&&n.push(e.stss(t.ext.stss.entries)),e.box(e.types.stbl,e.stsd(t),e.STTS,n[0],e.STSC,e.STSZ,e.STCO)}},{key:"stsd",value:function(t){var n;return n="audio"===t.type?t.useEME&&t.enca?e.enca(t):e.mp4a(t):t.useEME&&t.encv?e.encv(t):e.avc1hev1(t),e.box(e.types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),n)}},{key:"enca",value:function(t){var n=t.enca.channelCount,r=t.enca.sampleRate,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,r>>8&255,255&r,0,0]),a=e.esds(t.config),s=e.sinf(t.enca);return e.box(e.types.enca,i,a,s)}},{key:"encv",value:function(t){var n,i,a=t.sps.length>0?t.sps[0]:[],s=t.pps.length>0?t.pps[0]:[],o=t.width,u=t.height,c=t.sarRatio[0],l=t.sarRatio[1],f=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d=new Uint8Array((n=(i=[1,a[1],a[2],a[3],255,225,a.length>>>8&255,255&a.length]).concat.apply(i,(0,r.u)(a)).concat([1,s.length>>>8&255,255&s.length])).concat.apply(n,(0,r.u)(s))),h=new Uint8Array([0,0,88,57,0,15,200,192,0,4,86,72]),p=e.sinf(t.encv),v=new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,l>>24,l>>16&255,l>>8&255,255&l]);return e.box(e.types.encv,f,e.box(e.types.avcC,d),e.box(e.types.btrt,h),p,e.box(e.types.pasp,v))}},{key:"schi",value:function(t){var n=new Uint8Array([]),r=e.tenc(t);return e.box(e.types.schi,n,r)}},{key:"tenc",value:function(t){var n=new Uint8Array([0,0,0,0,0,0,255&t.default_IsEncrypted,255&t.default_IV_size].concat((0,a.Qc)(t.default_KID)));return e.box(e.types.tenc,n)}},{key:"sinf",value:function(t){var n=new Uint8Array([]),r=new Uint8Array([t.data_format.charCodeAt(0),t.data_format.charCodeAt(1),t.data_format.charCodeAt(2),t.data_format.charCodeAt(3)]),i=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),a=e.schi(t);return e.box(e.types.sinf,n,e.box(e.types.frma,r),e.box(e.types.schm,i),a)}},{key:"avc1hev1",value:function(t){var n=t.codecType===i._e.HEVC,r=n?e.types.hvc1:e.types.avc1,a=n?e.hvcC(t):e.avcC(t),s=[new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t.width>>8&255,255&t.width,t.height>>8&255,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a];return n?s.push(e.box(e.types.fiel,new Uint8Array([1,0]))):t.sarRatio&&t.sarRatio.length>1&&s.push(e.pasp(t.sarRatio)),e.box.apply(e,[r].concat(s))}},{key:"avcC",value:function(t){var n,i,a,s=[],o=[];return t.sps.forEach((function(e){a=e.byteLength,s.push(a>>>8&255),s.push(255&a),s.push.apply(s,(0,r.u)(e))})),t.pps.forEach((function(e){a=e.byteLength,o.push(a>>>8&255),o.push(255&a),o.push.apply(o,(0,r.u)(e))})),e.box(e.types.avcC,new Uint8Array((n=(i=[1,s[3],s[4],s[5],255,224|t.sps.length]).concat.apply(i,s).concat([t.pps.length])).concat.apply(n,o)))}},{key:"hvcC",value:function(t){var n=t.hvcC;if(n instanceof ArrayBuffer||n instanceof Uint8Array)return n;var i,a=t.vps,s=t.sps,o=t.pps;if(n){var u=n.generalProfileCompatibilityFlags,c=n.generalConstraintIndicatorFlags,l=(a.length&&1)+(s.length&&1)+(o.length&&1);i=[1,n.generalProfileSpace<<6|n.generalTierFlag<<5|n.generalProfileIdc,u>>>24,u>>>16,u>>>8,u,c[0],c[1],c[2],c[3],c[4],c[5],n.generalLevelIdc,240,0,252,252|n.chromaFormatIdc,248|n.bitDepthLumaMinus8,248|n.bitDepthChromaMinus8,0,0,n.numTemporalLayers<<3|n.temporalIdNested<<2|3,l];var f=function(e){var t;i.push(e.length>>8,e.length),(t=i).push.apply(t,(0,r.u)(e))};a.length&&(i.push(160,0,a.length),a.forEach(f)),s.length&&(i.push(161,0,s.length),s.forEach(f)),o.length&&(i.push(162,0,o.length),o.forEach(f))}else i=[1,1,96,0,0,0,144,0,0,0,0,0,93,240,0,252,253,248,248,0,0,15,3,160,0,1,0,24,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,153,152,9,161,0,1,0,45,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,160,2,128,128,45,22,89,153,164,147,43,154,128,128,128,130,0,0,3,0,2,0,0,3,0,50,16,162,0,1,0,7,68,1,193,114,180,98,64];return e.box(e.types.hvcC,new Uint8Array(i))}},{key:"pasp",value:function(t){var n=(0,r.ZQ)(t,2),i=n[0],a=n[1];return e.box(e.types.pasp,new Uint8Array([i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a]))}},{key:"mp4a",value:function(t){return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,t.sampleRate>>8&255,255&t.sampleRate,0,0]),t.config.length?e.esds(t.config):void 0)}},{key:"esds",value:function(t){var n=t.length;return e.box(e.types.esds,new Uint8Array([0,0,0,0,3,23+n,0,0,0,4,15+n,64,21,0,6,0,0,0,218,192,0,0,218,192,5].concat([n]).concat(t).concat([6,1,2])))}},{key:"mvex",value:function(t){return e.box.apply(e,[e.types.mvex].concat((0,r.u)(t.map((function(t){return e.trex(t.id)})))))}},{key:"trex",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trex1",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,2,0,0,0,0,0,0,1,0,0]))}},{key:"trex2",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,4,0,0,0,0,0,2,0,0,0]))}},{key:"moof",value:function(t){return e.box.apply(e,[e.types.moof,e.mfhd(t[0].samples?t[0].samples[0].gopId:0)].concat((0,r.u)(t.map((function(t){return e.traf(t)})))))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"traf",value:function(t){var n=e.tfhd(t.id),r=e.tfdt(t,t.baseMediaDecodeTime),i=0;if(t.isVideo&&t.videoSenc&&t.videoSenc.forEach((function(e){i+=8,e.subsamples&&e.subsamples.length&&(i+=2,i+=6*e.subsamples.length)})),t.videoSencLength=i,t.useEME&&(t.isVideoEncryption||t.isAudioEncryption)){if(t.isVideoEncryption){if(t.isVideo){var a=e.saiz(t),s=e.saio(t),o=e.trun1(t),u=e.senc(t);return e.box(e.types.traf,n,r,a,s,o,u)}if(t.isAudioEncryption){var c=e.sbgp(),l=e.saiz(t),f=e.saio(t),d=e.senc(t),h=e.trun1(t);return e.box(e.types.traf,n,r,c,l,f,d,h)}var p=e.sbgp(),v=e.trun1(t);return e.box(e.types.traf,n,r,p,v)}if(t.isVideo){var y=e.trun1(t);return e.box(e.types.traf,n,r,y)}var m=e.sbgp(),g=e.saiz(t),b=e.saio(t),x=e.senc(t),k=e.trun1(t);return e.box(e.types.traf,n,r,m,g,b,x,k)}var w=e.sdtp(t);return e.box(e.types.traf,n,r,w,e.trun(t.samples,w.byteLength+76))}},{key:"sdtp",value:function(t){var n=new s;return t.samples.forEach((function(e){n.write(new Uint8Array(t.isVideo?[e.keyframe?32:16]:[16]))})),e.box(e.types.sdtp,this.extension(0,0),n.buffer)}},{key:"trun1",value:function(t){var n=new s,r=s.writeUint32(t.samples.length),i=null;if(t.isVideo){var a=t.videoSencLength;i=s.writeUint32(16*t.samples.length+a+149),!t.isVideoEncryption&&t.isAudioEncryption&&(i=s.writeUint32(16*t.samples.length+92))}else{var o=12*t.samples.length+124;t.isAudioEncryption&&(o=12*t.samples.length+8*t.audioSenc.length+177),i=s.writeUint32(o)}return t.samples.forEach((function(e){n.write(s.writeUint32(e.duration)),n.write(s.writeUint32(e.size)),n.write(s.writeUint32(e.keyframe?33554432:65536)),t.isVideo&&n.write(s.writeUint32(e.cts?e.cts:0))})),e.box(e.types.trun,this.extension(0,t.flags),r,i,n.buffer)}},{key:"senc",value:function(t){var n=new s,r=t.samples.length,i=t.isVideo?16:8,a=t.isVideo?2:0,o=[],u=0;return t.isVideo?(o=t.videoSenc,u=t.videoSencLength):o=t.audioSenc,u=u||i*r,n.write(s.writeUint32(16+u),e.types.senc,this.extension(0,a)),n.write(s.writeUint32(r)),o.forEach((function(e){for(var t=0;t<e.InitializationVector.length;t++)n.write(new Uint8Array([e.InitializationVector[t]]));e.subsamples&&e.subsamples.length&&(n.write(s.writeUint16(e.subsamples.length)),e.subsamples.forEach((function(e){n.write(s.writeUint16(e.BytesOfClearData)),n.write(s.writeUint32(e.BytesOfProtectedData))})))})),n.buffer}},{key:"saio",value:function(t){var n=12*t.samples.length+141;!t.isVideo&&t.isAudioEncryption&&(n=149);var r=new Uint8Array([1,0,0,0,0,0,0,1,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n]);return e.box(e.types.saio,r)}},{key:"saiz",value:function(t){var n=t.samples.length,r=new Uint8Array([0,0,0,0,16,n>>24&255,n>>16&255,n>>8&255,255&n]);return e.box(e.types.saiz,r)}},{key:"sbgp",value:function(){var t=new Uint8Array([114,111,108,108,0,0,0,1,0,0,1,25,0,0,0,1]);return e.box(e.types.sbgp,this.extension(0,0),t)}},{key:"extension",value:function(e,t){return new Uint8Array([e,t>>16&255,t>>8&255,255&t])}},{key:"tfhd",value:function(t){return e.box(e.types.tfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"tfdt",value:function(t,n){var r=Math.floor(n/(o+1)),i=Math.floor(n%(o+1));return t.useEME&&(t.isVideoEncryption||t.isAudioEncryption)?e.box(e.types.tfdt,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])):e.box(e.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i]))}},{key:"trun",value:function(t,n){var r=t.length,i=12+16*r;n+=8+i;var a=new Uint8Array(i);a.set([0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0);for(var s=0;s<r;s++){var o=t[s],u=o.duration,c=o.size,l=o.flag,f=void 0===l?{}:l,d=o.cts,h=void 0===d?0:d;a.set([u>>>24&255,u>>>16&255,u>>>8&255,255&u,c>>>24&255,c>>>16&255,c>>>8&255,255&c,f.isLeading<<2|(null===f.dependsOn||void 0===f.dependsOn?1:f.dependsOn),f.isDependedOn<<6|f.hasRedundancy<<4|f.paddingValue<<1|(null===f.isNonSyncSample||void 0===f.isNonSyncSample?1:f.isNonSyncSample),61440&f.degradationPriority,15&f.degradationPriority,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*s)}return e.box(e.types.trun,a)}},{key:"moovMP4",value:function(t){return e.box.apply(e,[e.types.moov,e.mvhd(t[0].duration,t[0].timescale)].concat((0,r.u)(t.map((function(t){return e.trackMP4(t)})))))}},{key:"trackMP4",value:function(t){return e.box(e.types.trak,e.tkhd(t.id,t.duration,t.width,t.height),e.mdiaMP4(t))}},{key:"mdiaMP4",value:function(t){return e.box(e.types.mdia,e.mdhd(t.duration,t.timescale),e.hdlr(t.type),e.minfMP4(t))}},{key:"minfMP4",value:function(t){return e.box(e.types.minf,t.type===i.Vc.VIDEO?e.VMHD:e.SMHD,e.DINF,e.stblMP4(t))}},{key:"stblMP4",value:function(t){var n=t.ext,r=[e.stsd(t),e.stts(n.stts),e.stsc(n.stsc),e.stsz(n.stsz),e.stco(n.stco)];return n.stss.length&&r.push(e.stss(n.stss)),n.ctts.length&&r.push(e.ctts(n.ctts)),e.box.apply(e,[e.types.stbl].concat(r))}},{key:"stts",value:function(t){var n=t.length,r=new Uint8Array(8*n),i=0;return t.forEach((function(e){var t=e.value,n=e.count;r.set([n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t],i),i+=8})),e.box(e.types.stts,(0,a.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stsc",value:function(t){var n=t.length,r=new Uint8Array(12*n),i=0;return t.forEach((function(e){var t=e.firstChunk,n=e.samplesPerChunk,a=e.sampleDescIndex;r.set([t>>24,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,a>>24,a>>16&255,a>>8&255,255&a],i),i+=12})),e.box(e.types.stsc,(0,a.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stsz",value:function(t){var n=t.length,r=new Uint8Array(4*n),i=0;return t.forEach((function(e){r.set([e>>24,e>>16&255,e>>8&255,255&e],i),i+=4})),e.box(e.types.stsz,(0,a.gJ)(new Uint8Array([0,0,0,0,0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stco",value:function(t){var n=t.length,r=new Uint8Array(4*n),i=0;return t.forEach((function(e){r.set([e>>24,e>>16&255,e>>8&255,255&e],i),i+=4})),e.box(e.types.stco,(0,a.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stss",value:function(t){var n=t.length,r=new Uint8Array(4*n),i=0;return t.forEach((function(e){r.set([e>>24,e>>16&255,e>>8&255,255&e],i),i+=4})),e.box(e.types.stss,(0,a.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"ctts",value:function(t){var n=t.length,r=new Uint8Array(8*n),i=0;return t.forEach((function(e){var t=e.value,n=e.count;r.set([n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t],i),i+=8})),e.box(e.types.ctts,(0,a.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"styp",value:function(){return e.box(e.types.styp,new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120]))}},{key:"sidx",value:function(t){var n=t.timescale,r=t.samples[0].duration,i=r*t.samples.length,a=t.samples[0].sampleOffset*r,s=8;t.samples.forEach((function(e){s+=e.size}));var o=0;if(t.isVideo){var u,c=0;t.videoSenc&&(u=t.videoSenc),t.isVideo&&u.forEach((function(e){c+=8,e.subsamples&&e.subsamples.length&&(c+=2,c+=6*e.subsamples.length)})),t.videoSencLength=c,o=s+141+16*t.samples.length+c,t.useEME&&t.isAudioEncryption&&!t.isVideoEncryption&&(o=s+16*t.samples.length+84)}else o=s+116+12*t.samples.length,t.useEME&&t.isAudioEncryption&&(o=s+169+12*t.samples.length+8*t.audioSenc.length);var l=new Uint8Array([0,0,0,0,0,0,0,255&t.id,n>>24&255,n>>16&255,n>>8&255,255&n,a>>24&255,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,1,0,o>>16&255,o>>8&255,255&o,i>>24&255,i>>16&255,i>>8&255,255&i,144,0,0,0]);return e.box(e.types.sidx,l)}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}}]),e}();(0,r._x)(u,"types",["avc1","avcC","hvc1","hvcC","dinf","dref","esds","ftyp","hdlr","mdat","mdhd","mdia","mfhd","minf","moof","moov","mp4a","mvex","mvhd","pasp","stbl","stco","stsc","stsd","stsz","stts","tfdt","tfhd","traf","trak","trex","tkhd","vmhd","smhd","ctts","stss","styp","pssh","sidx","sbgp","saiz","saio","senc","trun","encv","enca","sinf","btrt","frma","tenc","schm","schi","mehd","fiel","sdtp"].reduce((function(e,t){return e[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)],e}),Object.create(null))),(0,r._x)(u,"HDLR_TYPES",{video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),(0,r._x)(u,"FTYPAVC1",u.box(u.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]))),(0,r._x)(u,"FTYPHEV1",u.box(u.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,104,101,118,49]))),(0,r._x)(u,"DINF",u.box(u.types.dinf,u.box(u.types.dref,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])))),(0,r._x)(u,"VMHD",u.box(u.types.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))),(0,r._x)(u,"SMHD",u.box(u.types.smhd,new Uint8Array([0,0,0,0,0,0,0,0]))),(0,r._x)(u,"StblTable",new Uint8Array([0,0,0,0,0,0,0,0])),(0,r._x)(u,"STTS",u.box(u.types.stts,u.StblTable)),(0,r._x)(u,"STSC",u.box(u.types.stsc,u.StblTable)),(0,r._x)(u,"STSZ",u.box(u.types.stsz,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]))),(0,r._x)(u,"STCO",u.box(u.types.stco,u.StblTable))},98655:(e,t,n)=>{function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.filter(Boolean);var r=new Uint8Array(t.reduce((function(e,t){return e+t.byteLength}),0)),i=0;return t.forEach((function(e){r.set(e,i),i+=e.byteLength})),r}function i(e){if(!Array.isArray(e)){for(var t=[],n="",r=0;r<e.length;r++)r%2&&(n=e[r-1]+e[r],t.push(parseInt(n,16)),n="");return t}return e.map((function(e){return parseInt(e,16)}))}n.d(t,{Qc:()=>i,gJ:()=>r}),Math.pow(2,32)},70372:(e,t,n)=>{function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}n.d(t,{PA:()=>r,ZQ:()=>o,_x:()=>s,qH:()=>a,u:()=>u})},25218:(e,t,n)=>{n.d(t,{Vc:()=>r,_e:()=>i,yQ:()=>a});var r={VIDEO:"video",AUDIO:"audio",METADATA:"metadata"},i={AVC:"avc",HEVC:"hevc"},a={AAC:"aac",G711PCMA:"g7110a",G711PCMU:"g7110m"}},10317:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(70372),i=function(){function e(){(0,r.PA)(this,e),this.buffer=new Uint8Array(0)}return(0,r.qH)(e,[{key:"write",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){t?e.buffer=function(e){for(var t=0,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r.forEach((function(e){t+=e.length}));var a=new e(t),s=0;return r.forEach((function(e){a.set(e,s),s+=e.length})),a}(Uint8Array,e.buffer,t):window.console.warn(t)}))}}],[{key:"writeUint16",value:function(e){return new Uint8Array([e>>8&255,255&e])}},{key:"writeUint32",value:function(e){return new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e])}}]),e}()},85697:(e,t,n)=>{n.d(t,{N:()=>l});var r=n(70372),i=n(25218),a=n(57870),s=n(10317),o=Math.pow(2,32)-1,u=function(){function e(){(0,r.PA)(this,e)}return(0,r.qH)(e,null,[{key:"box",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=8+(n=n.filter(Boolean)).reduce((function(e,t){return e+t.byteLength}),0),a=new Uint8Array(i);a[0]=i>>24&255,a[1]=i>>16&255,a[2]=i>>8&255,a[3]=255&i,a.set(e,4);var s=8;return n.forEach((function(e){a.set(e,s),s+=e.byteLength})),a}},{key:"ftyp",value:function(t){return t.find((function(e){return e.type===i.Vc.VIDEO&&e.codecType===i._e.HEVC}))?e.FTYPHEV1:e.FTYPAVC1}},{key:"initSegment",value:function(t){var n=e.ftyp(t);return(0,a.gJ)(n,e.moov(t))}},{key:"pssh",value:function(t){var n=new Uint8Array([1,0,0,0].concat([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75],[0,0,0,1],(0,a.Qc)(t.kid),[0,0,0,0]));return e.box(e.types.pssh,n)}},{key:"moov",value:function(t){if(t[0].useEME&&(t[0].encv||t[0].enca)){t[0].pssh||(t[0].pssh={kid:t[0].kid});var n=this.pssh(t[0].pssh);return e.box.apply(e,[e.types.moov,e.mvhd(t[0].mvhdDurtion||t[0].duration,t[0].mvhdTimecale||t[0].timescale),e.mvex(t)].concat((0,r.u)(t.map((function(t){return e.trak(t)}))),[n]))}return e.box.apply(e,[e.types.moov,e.mvhd(t[0].mvhdDurtion||t[0].duration,t[0].mvhdTimecale||t[0].timescale)].concat((0,r.u)(t.map((function(t){return e.trak(t)}))),[e.mvex(t)]))}},{key:"mvhd",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4;return e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,t>>24&255,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}},{key:"trak",value:function(t){return e.box(e.types.trak,e.tkhd(t.id,t.tkhdDuration||0,t.width,t.height),e.mdia(t))}},{key:"tkhd",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.duration,t.timescale),e.hdlr(t.type),e.minf(t))}},{key:"mdhd",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4;return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,t>>24&255,t>>16&255,t>>8&255,255&t,85,196,0,0]))}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"minf",value:function(t){return e.box(e.types.minf,t.type===i.Vc.VIDEO?e.VMHD:e.SMHD,e.DINF,e.stbl(t))}},{key:"stbl",value:function(t){var n=[];return t&&t.ext&&t.ext.stss&&n.push(e.stss(t.ext.stss.entries)),e.box(e.types.stbl,e.stsd(t),e.STTS,n[0],e.STSC,e.STSZ,e.STCO)}},{key:"stsd",value:function(t){var n;return n="audio"===t.type?t.useEME&&t.enca?e.enca(t):e.mp4a(t):t.useEME&&t.encv?e.encv(t):e.avc1hev1(t),e.box(e.types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),n)}},{key:"enca",value:function(t){var n=t.enca.channelCount,r=t.enca.sampleRate,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,r>>8&255,255&r,0,0]),a=e.esds(t.config),s=e.sinf(t.enca);return e.box(e.types.enca,i,a,s)}},{key:"encv",value:function(t){var n,i,a=t.sps.length>0?t.sps[0]:[],s=t.pps.length>0?t.pps[0]:[],o=t.width,u=t.height,c=t.sarRatio[0],l=t.sarRatio[1],f=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d=new Uint8Array((n=(i=[1,a[1],a[2],a[3],255,225,a.length>>>8&255,255&a.length]).concat.apply(i,(0,r.u)(a)).concat([1,s.length>>>8&255,255&s.length])).concat.apply(n,(0,r.u)(s))),h=new Uint8Array([0,0,88,57,0,15,200,192,0,4,86,72]),p=e.sinf(t.encv),v=new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,l>>24,l>>16&255,l>>8&255,255&l]);return e.box(e.types.encv,f,e.box(e.types.avcC,d),e.box(e.types.btrt,h),p,e.box(e.types.pasp,v))}},{key:"schi",value:function(t){var n=new Uint8Array([]),r=e.tenc(t);return e.box(e.types.schi,n,r)}},{key:"tenc",value:function(t){var n=new Uint8Array([0,0,0,0,0,0,255&t.default_IsEncrypted,255&t.default_IV_size].concat((0,a.Qc)(t.default_KID)));return e.box(e.types.tenc,n)}},{key:"sinf",value:function(t){var n=new Uint8Array([]),r=new Uint8Array([t.data_format.charCodeAt(0),t.data_format.charCodeAt(1),t.data_format.charCodeAt(2),t.data_format.charCodeAt(3)]),i=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),a=e.schi(t);return e.box(e.types.sinf,n,e.box(e.types.frma,r),e.box(e.types.schm,i),a)}},{key:"avc1hev1",value:function(t){var n=t.codecType===i._e.HEVC,r=n?e.types.hvc1:e.types.avc1,a=n?e.hvcC(t):e.avcC(t),s=[new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t.width>>8&255,255&t.width,t.height>>8&255,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a];return n?s.push(e.box(e.types.fiel,new Uint8Array([1,0]))):t.sarRatio&&t.sarRatio.length>1&&s.push(e.pasp(t.sarRatio)),e.box.apply(e,[r].concat(s))}},{key:"avcC",value:function(t){var n,i,a,s=[],o=[];return t.sps.forEach((function(e){a=e.byteLength,s.push(a>>>8&255),s.push(255&a),s.push.apply(s,(0,r.u)(e))})),t.pps.forEach((function(e){a=e.byteLength,o.push(a>>>8&255),o.push(255&a),o.push.apply(o,(0,r.u)(e))})),e.box(e.types.avcC,new Uint8Array((n=(i=[1,s[3],s[4],s[5],255,224|t.sps.length]).concat.apply(i,s).concat([t.pps.length])).concat.apply(n,o)))}},{key:"hvcC",value:function(t){var n=t.hvcC;if(n instanceof ArrayBuffer||n instanceof Uint8Array)return n;var i,a=t.vps,s=t.sps,o=t.pps;if(n){var u=n.generalProfileCompatibilityFlags,c=n.generalConstraintIndicatorFlags,l=(a.length&&1)+(s.length&&1)+(o.length&&1);i=[1,n.generalProfileSpace<<6|n.generalTierFlag<<5|n.generalProfileIdc,u>>>24,u>>>16,u>>>8,u,c[0],c[1],c[2],c[3],c[4],c[5],n.generalLevelIdc,240,0,252,252|n.chromaFormatIdc,248|n.bitDepthLumaMinus8,248|n.bitDepthChromaMinus8,0,0,n.numTemporalLayers<<3|n.temporalIdNested<<2|3,l];var f=function(e){var t;i.push(e.length>>8,e.length),(t=i).push.apply(t,(0,r.u)(e))};a.length&&(i.push(160,0,a.length),a.forEach(f)),s.length&&(i.push(161,0,s.length),s.forEach(f)),o.length&&(i.push(162,0,o.length),o.forEach(f))}else i=[1,1,96,0,0,0,144,0,0,0,0,0,93,240,0,252,253,248,248,0,0,15,3,160,0,1,0,24,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,153,152,9,161,0,1,0,45,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,160,2,128,128,45,22,89,153,164,147,43,154,128,128,128,130,0,0,3,0,2,0,0,3,0,50,16,162,0,1,0,7,68,1,193,114,180,98,64];return e.box(e.types.hvcC,new Uint8Array(i))}},{key:"pasp",value:function(t){var n=(0,r.ZQ)(t,2),i=n[0],a=n[1];return e.box(e.types.pasp,new Uint8Array([i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a]))}},{key:"mp4a",value:function(t){return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,t.sampleRate>>8&255,255&t.sampleRate,0,0]),t.config.length?e.esds(t.config):void 0)}},{key:"esds",value:function(t){var n=t.length;return e.box(e.types.esds,new Uint8Array([0,0,0,0,3,23+n,0,0,0,4,15+n,64,21,0,6,0,0,0,218,192,0,0,218,192,5].concat([n]).concat(t).concat([6,1,2])))}},{key:"mvex",value:function(t){return e.box.apply(e,[e.types.mvex].concat((0,r.u)(t.map((function(t){return e.trex(t.id)})))))}},{key:"trex",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trex1",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,2,0,0,0,0,0,0,1,0,0]))}},{key:"trex2",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,4,0,0,0,0,0,2,0,0,0]))}},{key:"moof",value:function(t){return e.box.apply(e,[e.types.moof,e.mfhd(t[0].samples?t[0].samples[0].gopId:0)].concat((0,r.u)(t.map((function(t){return e.traf(t)})))))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"traf",value:function(t){var n=e.tfhd(t.id),r=e.tfdt(t,t.baseMediaDecodeTime),i=0;if(t.isVideo&&t.videoSenc&&t.videoSenc.forEach((function(e){i+=8,e.subsamples&&e.subsamples.length&&(i+=2,i+=6*e.subsamples.length)})),t.videoSencLength=i,t.useEME&&(t.isVideoEncryption||t.isAudioEncryption)){if(t.isVideoEncryption){if(t.isVideo){var a=e.saiz(t),s=e.saio(t),o=e.trun1(t),u=e.senc(t);return e.box(e.types.traf,n,r,a,s,o,u)}if(t.isAudioEncryption){var c=e.sbgp(),l=e.saiz(t),f=e.saio(t),d=e.senc(t),h=e.trun1(t);return e.box(e.types.traf,n,r,c,l,f,d,h)}var p=e.sbgp(),v=e.trun1(t);return e.box(e.types.traf,n,r,p,v)}if(t.isVideo){var y=e.trun1(t);return e.box(e.types.traf,n,r,y)}var m=e.sbgp(),g=e.saiz(t),b=e.saio(t),x=e.senc(t),k=e.trun1(t);return e.box(e.types.traf,n,r,m,g,b,x,k)}var w=e.sdtp(t);return e.box(e.types.traf,n,r,w,e.trun(t.samples,w.byteLength+76))}},{key:"sdtp",value:function(t){var n=new s.Z;return t.samples.forEach((function(e){n.write(new Uint8Array(t.isVideo?[e.keyframe?32:16]:[16]))})),e.box(e.types.sdtp,this.extension(0,0),n.buffer)}},{key:"trun1",value:function(t){var n=new s.Z,r=s.Z.writeUint32(t.samples.length),i=null;if(t.isVideo){var a=t.videoSencLength;i=s.Z.writeUint32(16*t.samples.length+a+149),!t.isVideoEncryption&&t.isAudioEncryption&&(i=s.Z.writeUint32(16*t.samples.length+92))}else{var o=12*t.samples.length+124;t.isAudioEncryption&&(o=12*t.samples.length+8*t.audioSenc.length+177),i=s.Z.writeUint32(o)}return t.samples.forEach((function(e){n.write(s.Z.writeUint32(e.duration)),n.write(s.Z.writeUint32(e.size)),n.write(s.Z.writeUint32(e.keyframe?33554432:65536)),t.isVideo&&n.write(s.Z.writeUint32(e.cts?e.cts:0))})),e.box(e.types.trun,this.extension(0,t.flags),r,i,n.buffer)}},{key:"senc",value:function(t){var n=new s.Z,r=t.samples.length,i=t.isVideo?16:8,a=t.isVideo?2:0,o=[],u=0;return t.isVideo?(o=t.videoSenc,u=t.videoSencLength):o=t.audioSenc,u=u||i*r,n.write(s.Z.writeUint32(16+u),e.types.senc,this.extension(0,a)),n.write(s.Z.writeUint32(r)),o.forEach((function(e){for(var t=0;t<e.InitializationVector.length;t++)n.write(new Uint8Array([e.InitializationVector[t]]));e.subsamples&&e.subsamples.length&&(n.write(s.Z.writeUint16(e.subsamples.length)),e.subsamples.forEach((function(e){n.write(s.Z.writeUint16(e.BytesOfClearData)),n.write(s.Z.writeUint32(e.BytesOfProtectedData))})))})),n.buffer}},{key:"saio",value:function(t){var n=12*t.samples.length+141;!t.isVideo&&t.isAudioEncryption&&(n=149);var r=new Uint8Array([1,0,0,0,0,0,0,1,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n]);return e.box(e.types.saio,r)}},{key:"saiz",value:function(t){var n=t.samples.length,r=new Uint8Array([0,0,0,0,16,n>>24&255,n>>16&255,n>>8&255,255&n]);return e.box(e.types.saiz,r)}},{key:"sbgp",value:function(){var t=new Uint8Array([114,111,108,108,0,0,0,1,0,0,1,25,0,0,0,1]);return e.box(e.types.sbgp,this.extension(0,0),t)}},{key:"extension",value:function(e,t){return new Uint8Array([e,t>>16&255,t>>8&255,255&t])}},{key:"tfhd",value:function(t){return e.box(e.types.tfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"tfdt",value:function(t,n){var r=Math.floor(n/(o+1)),i=Math.floor(n%(o+1));return t.useEME&&(t.isVideoEncryption||t.isAudioEncryption)?e.box(e.types.tfdt,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])):e.box(e.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i]))}},{key:"trun",value:function(t,n){var r=t.length,i=12+16*r;n+=8+i;var a=new Uint8Array(i);a.set([0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0);for(var s=0;s<r;s++){var o=t[s],u=o.duration,c=o.size,l=o.flag,f=void 0===l?{}:l,d=o.cts,h=void 0===d?0:d;a.set([u>>>24&255,u>>>16&255,u>>>8&255,255&u,c>>>24&255,c>>>16&255,c>>>8&255,255&c,f.isLeading<<2|(null===f.dependsOn||void 0===f.dependsOn?1:f.dependsOn),f.isDependedOn<<6|f.hasRedundancy<<4|f.paddingValue<<1|(null===f.isNonSyncSample||void 0===f.isNonSyncSample?1:f.isNonSyncSample),61440&f.degradationPriority,15&f.degradationPriority,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*s)}return e.box(e.types.trun,a)}},{key:"moovMP4",value:function(t){return e.box.apply(e,[e.types.moov,e.mvhd(t[0].duration,t[0].timescale)].concat((0,r.u)(t.map((function(t){return e.trackMP4(t)})))))}},{key:"trackMP4",value:function(t){return e.box(e.types.trak,e.tkhd(t.id,t.duration,t.width,t.height),e.mdiaMP4(t))}},{key:"mdiaMP4",value:function(t){return e.box(e.types.mdia,e.mdhd(t.duration,t.timescale),e.hdlr(t.type),e.minfMP4(t))}},{key:"minfMP4",value:function(t){return e.box(e.types.minf,t.type===i.Vc.VIDEO?e.VMHD:e.SMHD,e.DINF,e.stblMP4(t))}},{key:"stblMP4",value:function(t){var n=t.ext,r=[e.stsd(t),e.stts(n.stts),e.stsc(n.stsc),e.stsz(n.stsz),e.stco(n.stco)];return n.stss.length&&r.push(e.stss(n.stss)),n.ctts.length&&r.push(e.ctts(n.ctts)),e.box.apply(e,[e.types.stbl].concat(r))}},{key:"stts",value:function(t){var n=t.length,r=new Uint8Array(8*n),i=0;return t.forEach((function(e){var t=e.value,n=e.count;r.set([n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t],i),i+=8})),e.box(e.types.stts,(0,a.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stsc",value:function(t){var n=t.length,r=new Uint8Array(12*n),i=0;return t.forEach((function(e){var t=e.firstChunk,n=e.samplesPerChunk,a=e.sampleDescIndex;r.set([t>>24,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,a>>24,a>>16&255,a>>8&255,255&a],i),i+=12})),e.box(e.types.stsc,(0,a.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stsz",value:function(t){var n=t.length,r=new Uint8Array(4*n),i=0;return t.forEach((function(e){r.set([e>>24,e>>16&255,e>>8&255,255&e],i),i+=4})),e.box(e.types.stsz,(0,a.gJ)(new Uint8Array([0,0,0,0,0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stco",value:function(t){var n=t.length,r=new Uint8Array(4*n),i=0;return t.forEach((function(e){r.set([e>>24,e>>16&255,e>>8&255,255&e],i),i+=4})),e.box(e.types.stco,(0,a.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stss",value:function(t){var n=t.length,r=new Uint8Array(4*n),i=0;return t.forEach((function(e){r.set([e>>24,e>>16&255,e>>8&255,255&e],i),i+=4})),e.box(e.types.stss,(0,a.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"ctts",value:function(t){var n=t.length,r=new Uint8Array(8*n),i=0;return t.forEach((function(e){var t=e.value,n=e.count;r.set([n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t],i),i+=8})),e.box(e.types.ctts,(0,a.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"styp",value:function(){return e.box(e.types.styp,new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120]))}},{key:"sidx",value:function(t){var n=t.timescale,r=t.samples[0].duration,i=r*t.samples.length,a=t.samples[0].sampleOffset*r,s=8;t.samples.forEach((function(e){s+=e.size}));var o=0;if(t.isVideo){var u,c=0;t.videoSenc&&(u=t.videoSenc),t.isVideo&&u.forEach((function(e){c+=8,e.subsamples&&e.subsamples.length&&(c+=2,c+=6*e.subsamples.length)})),t.videoSencLength=c,o=s+141+16*t.samples.length+c,t.useEME&&t.isAudioEncryption&&!t.isVideoEncryption&&(o=s+16*t.samples.length+84)}else o=s+116+12*t.samples.length,t.useEME&&t.isAudioEncryption&&(o=s+169+12*t.samples.length+8*t.audioSenc.length);var l=new Uint8Array([0,0,0,0,0,0,0,255&t.id,n>>24&255,n>>16&255,n>>8&255,255&n,a>>24&255,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,1,0,o>>16&255,o>>8&255,255&o,i>>24&255,i>>16&255,i>>8&255,255&i,144,0,0,0]);return e.box(e.types.sidx,l)}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}}]),e}();(0,r._x)(u,"types",["avc1","avcC","hvc1","hvcC","dinf","dref","esds","ftyp","hdlr","mdat","mdhd","mdia","mfhd","minf","moof","moov","mp4a","mvex","mvhd","pasp","stbl","stco","stsc","stsd","stsz","stts","tfdt","tfhd","traf","trak","trex","tkhd","vmhd","smhd","ctts","stss","styp","pssh","sidx","sbgp","saiz","saio","senc","trun","encv","enca","sinf","btrt","frma","tenc","schm","schi","mehd","fiel","sdtp"].reduce((function(e,t){return e[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)],e}),Object.create(null))),(0,r._x)(u,"HDLR_TYPES",{video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),(0,r._x)(u,"FTYPAVC1",u.box(u.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]))),(0,r._x)(u,"FTYPHEV1",u.box(u.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,104,101,118,49]))),(0,r._x)(u,"DINF",u.box(u.types.dinf,u.box(u.types.dref,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])))),(0,r._x)(u,"VMHD",u.box(u.types.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))),(0,r._x)(u,"SMHD",u.box(u.types.smhd,new Uint8Array([0,0,0,0,0,0,0,0]))),(0,r._x)(u,"StblTable",new Uint8Array([0,0,0,0,0,0,0,0])),(0,r._x)(u,"STTS",u.box(u.types.stts,u.StblTable)),(0,r._x)(u,"STSC",u.box(u.types.stsc,u.StblTable)),(0,r._x)(u,"STSZ",u.box(u.types.stsz,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]))),(0,r._x)(u,"STCO",u.box(u.types.stco,u.StblTable));var c=n(27744),l=function(){function e(t,n,i){(0,r.PA)(this,e),this.videoTrack=t,this.audioTrack=n;var a=/Chrome\/([^.]+)/.exec(navigator.userAgent);this.forceFirstIDR=a&&Number(a[1])<50,this.log=new c.Y("FMP4Remuxer",!i||!i.openLog||!i.openLog)}return(0,r.qH)(e,[{key:"remux",value:function(){var e,t,n,r,i,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.videoTrack,c=this.audioTrack,l=o.exist(),f=c.exist(),d=[];return a&&(s&&s.initMerge?(l&&d.push(this.videoTrack),f&&d.push(this.audioTrack),n=u.initSegment(d)):(l&&(e=u.initSegment([this.videoTrack])),f&&(t=u.initSegment([this.audioTrack])))),l&&o.hasSample()&&(r=this._remuxVideo()),f&&c.hasSample()&&(i=this._remuxAudio()),o.samples=[],c.samples=[],{initSegment:n,videoInitSegment:e,audioInitSegment:t,videoSegment:r,audioSegment:i}}},{key:"_remuxVideo",value:function(){var e=this.videoTrack;this.forceFirstIDR&&(e.samples[0].flag={dependsOn:2,isNonSyncSample:0});var t=e.samples,n=0;t.forEach((function(e){n+=e.units.reduce((function(e,t){return e+t.byteLength}),0),n+=4*e.units.length}));for(var r,i=new Uint8Array(n),s=new DataView(i.buffer),o=function(e,n){n=t[c];var a=0;n.units.forEach((function(t){s.setUint32(e,t.byteLength),e+=4,i.set(t,e),e+=t.byteLength,a+=4+t.byteLength})),n.size=a,f=e,r=n},c=0,l=t.length,f=0;c<l;c++)o(f,r);var d=u.mdat(i),h=u.moof([e]);return(0,a.gJ)(h,d)}},{key:"_remuxAudio",value:function(){var e=this.audioTrack,t=new Uint8Array(e.samples.reduce((function(e,t){return e+t.size}),0));e.samples.reduce((function(e,n){return t.set(n.data,e),e+n.size}),0);var n=u.mdat(t),r=u.moof([e]);return(0,a.gJ)(r,n)}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset()}}]),e}()},27744:(e,t,n)=>{n.d(t,{Y:()=>i});var r=n(70372),i=function(){function e(t,n){(0,r.PA)(this,e),this.name=t||"",this._prefix="[".concat(this.name,"]"),e.disabled=n}return(0,r.qH)(e,[{key:"debug",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).debug.apply(t,[this._prefix].concat(r))}}},{key:"log",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).log.apply(t,[this._prefix].concat(r))}}},{key:"warn",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).warn.apply(t,[this._prefix].concat(r))}}},{key:"error",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).error.apply(t,[this._prefix].concat(r))}}},{key:"table",value:function(){var t;e.disabled||(console.group(this._prefix),(t=console).table.apply(t,arguments),console.groupEnd())}}],[{key:"enable",value:function(){e.disabled=!1}},{key:"disable",value:function(){e.disabled=!0}}]),e}();(0,r._x)(i,"disabled",!0)},47658:(e,t,n)=>{n.d(t,{_:()=>x});var r=n(70372),i=n(25218),a=function(){function e(){(0,r.PA)(this,e),(0,r._x)(this,"id",1),(0,r._x)(this,"type",i.Vc.VIDEO),(0,r._x)(this,"codecType",i._e.AVC),(0,r._x)(this,"pid",-1),(0,r._x)(this,"hvcC",void 0),(0,r._x)(this,"codec",""),(0,r._x)(this,"timescale",0),(0,r._x)(this,"formatTimescale",0),(0,r._x)(this,"sequenceNumber",0),(0,r._x)(this,"baseMediaDecodeTime",0),(0,r._x)(this,"baseDts",0),(0,r._x)(this,"duration",0),(0,r._x)(this,"warnings",[]),(0,r._x)(this,"samples",[]),(0,r._x)(this,"pps",[]),(0,r._x)(this,"sps",[]),(0,r._x)(this,"vps",[]),(0,r._x)(this,"fpsNum",0),(0,r._x)(this,"fpsDen",0),(0,r._x)(this,"sarRatio",[]),(0,r._x)(this,"width",0),(0,r._x)(this,"height",0),(0,r._x)(this,"nalUnitSize",4),(0,r._x)(this,"present",!1),(0,r._x)(this,"isVideoEncryption",!1),(0,r._x)(this,"isAudioEncryption",!1),(0,r._x)(this,"isVideo",!0),(0,r._x)(this,"kid",null),(0,r._x)(this,"pssh",null),(0,r._x)(this,"ext",void 0)}return(0,r.qH)(e,[{key:"reset",value:function(){this.sequenceNumber=this.width=this.height=this.fpsDen=this.fpsNum=this.duration=this.baseMediaDecodeTime=this.timescale=0,this.codec="",this.present=!1,this.pid=-1,this.pps=[],this.sps=[],this.vps=[],this.sarRatio=[],this.samples=[],this.warnings=[],this.hvcC=null}},{key:"exist",value:function(){return!!(this.pps.length&&this.sps.length&&this.codec)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isVideoEncryption}}]),e}(),s=function(){function e(){(0,r.PA)(this,e),(0,r._x)(this,"id",2),(0,r._x)(this,"type",i.Vc.AUDIO),(0,r._x)(this,"codecType",i.yQ.AAC),(0,r._x)(this,"pid",-1),(0,r._x)(this,"codec",""),(0,r._x)(this,"sequenceNumber",0),(0,r._x)(this,"sampleDuration",0),(0,r._x)(this,"timescale",0),(0,r._x)(this,"formatTimescale",0),(0,r._x)(this,"baseMediaDecodeTime",0),(0,r._x)(this,"duration",0),(0,r._x)(this,"warnings",[]),(0,r._x)(this,"samples",[]),(0,r._x)(this,"baseDts",0),(0,r._x)(this,"sampleSize",16),(0,r._x)(this,"sampleRate",0),(0,r._x)(this,"channelCount",0),(0,r._x)(this,"objectType",0),(0,r._x)(this,"sampleRateIndex",0),(0,r._x)(this,"config",[]),(0,r._x)(this,"present",!1),(0,r._x)(this,"isVideoEncryption",!1),(0,r._x)(this,"isAudioEncryption",!1),(0,r._x)(this,"kid",null),(0,r._x)(this,"ext",void 0)}return(0,r.qH)(e,[{key:"reset",value:function(){this.sequenceNumber=0,this.timescale=0,this.sampleDuration=0,this.sampleRate=0,this.channelCount=0,this.baseMediaDecodeTime=0,this.present=!1,this.pid=-1,this.codec="",this.samples=[],this.config=[],this.warnings=[]}},{key:"exist",value:function(){return!!(this.sampleRate&&this.channelCount&&this.codec&&this.codecType===i.yQ.AAC)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isAudioEncryption}}]),e}(),o=function(){function e(t,n,i){(0,r.PA)(this,e),(0,r._x)(this,"flag",{}),(0,r._x)(this,"keyframe",!1),(0,r._x)(this,"gopId",0),(0,r._x)(this,"duration",0),(0,r._x)(this,"size",0),(0,r._x)(this,"units",[]),(0,r._x)(this,"chromaFormat",420),this.originPts=this.pts=t,this.originDts=this.dts=n,i&&(this.units=i)}return(0,r.qH)(e,[{key:"cts",get:function(){return this.pts-this.dts}},{key:"setToKeyframe",value:function(){this.keyframe=!0,this.flag.dependsOn=2,this.flag.isNonSyncSample=0}}]),e}(),u=(0,r.qH)((function e(t,n,i,a){(0,r.PA)(this,e),(0,r._x)(this,"duration",1024),(0,r._x)(this,"flag",{dependsOn:2,isNonSyncSample:0}),(0,r._x)(this,"keyframe",!0),this.originPts=this.pts=this.dts=t,this.data=n,this.size=n.byteLength,this.sampleOffset=a,i&&(this.duration=i)})),c=function(){function e(){(0,r.PA)(this,e),(0,r._x)(this,"id",3),(0,r._x)(this,"type",i.Vc.METADATA),(0,r._x)(this,"timescale",0),(0,r._x)(this,"flvScriptSamples",[]),(0,r._x)(this,"seiSamples",[])}return(0,r.qH)(e,[{key:"exist",value:function(){return!(!this.flvScriptSamples.length&&!this.seiSamples.length||!this.timescale)}},{key:"reset",value:function(){this.timescale=0,this.flvScriptSamples=[],this.seiSamples=[]}},{key:"hasSample",value:function(){return!(!this.flvScriptSamples.length&&!this.seiSamples.length)}}]),e}(),l=n(57870),f=n(38609),d=n(27744),h=n(28108),p=n(75091),v=n(80558),y=n(98504),m=n(86947),g=n(10317),b={decryptWordArray:function(e,t,n){var r=h.pU.parse(t),i=h.pU.parse((0,l.mw)(n)),a=h.Ic.create(new Uint8Array(e)),s=v.e.decrypt(p.Qt.create({ciphertext:a}),r,{iv:i,mode:y.M,padding:m.g});return b.wordArrayToUint8Array(s)},wordArrayToUint8Array:function(e){for(var t=e.sigBytes,n=e.words,r=new Uint8Array(t),i=0,a=0;i!==t;){var s=n[a++];if(r[i++]=(4278190080&s)>>>24,i===t)break;if(r[i++]=(16711680&s)>>>16,i===t)break;if(r[i++]=(65280&s)>>>8,i===t)break;r[i++]=255&s}return r},decoderAESCTRData:function(e,t,n){if(e.videoSenc){var r=e.kidValue,i=e.videoSenc;e.samples.forEach((function(t,a){var s=i[a],o=t.data,u=[],c=[],l=s.InitializationVector;if(s.subsamples&&s.subsamples.length)s.subsamples.forEach((function(e){var t=e.BytesOfClearData+e.BytesOfProtectedData,n=o.slice(0,t);u.push(n.slice(0,e.BytesOfClearData)),c.push(n.slice(e.BytesOfClearData)),o=o.slice(t)}));else{var f=t.size;u.push(o.slice(0,0)),c.push(o.slice(0,f)),o=o.slice(f)}var d=new g.Z;d.write.apply(d,c);var h=n?n(d.buffer,r,l):b.decryptWordArray(d.buffer,r,l),p=new g.Z;u.forEach((function(e,t){var n=c[t].length,r=h.slice(0,n);p.write(e),p.write(r),h=h.slice(n)})),e.samples[a].data=p.buffer}))}if(t.audioSenc){var a=t.kidValue,s=t.audioSenc;t.samples.forEach((function(e,r){var i=s[r],o=n?n(e.data,a,i.InitializationVector):b.decryptWordArray(e.data,a,i.InitializationVector);t.samples[r].data=o}))}}},x=function(){function e(t,n,i,o){var u=this;(0,r.PA)(this,e),(0,r._x)(this,"_videoSamples",[]),(0,r._x)(this,"_audioSamples",[]),(0,r._x)(this,"_lastRemainBuffer",[]),(0,r._x)(this,"_lastRemainBufferStartPos",0),this.videoTrack=new a,this.audioTrack=new s,this.metadataTrack=i||new c,this.log=new d.Y("MP4Demuxer",!o||!o.openLog||!o.openLog),t&&t.forEach((function(e){var t;(t=u._videoSamples).push.apply(t,(0,r.u)(e.frames))})),n&&n.forEach((function(e){var t;(t=u._audioSamples).push.apply(t,(0,r.u)(e.frames))}))}return(0,r.qH)(e,[{key:"parseSamples",value:function(e){if(!e)throw new Error("moov is required");if(this.videoTrack.codec||this.audioTrack.codec||(f.I.moovToTrack(e,this.videoTrack,this.audioTrack),this.videoSenc=this.videoTrack.videoSenc,this.audioSenc=this.audioTrack.audioSenc),!this._audioSamples.length&&!this._videoSamples.length){var t=f.I.moovToSamples(e);if(!t)throw new Error("cannot parse samples from moov box");this._videoSamples=t.videoSamples||[],this._audioSamples=t.audioSamples||[]}}},{key:"demux",value:function(e,t,n,r,i){this.parseSamples(i);var a,s,c,f=this.videoTrack,d=this.audioTrack;if(f.samples=[],d.samples=[],n){for(var h,p=0,v=n[0],y=n[1];v<=y;v++){if(!(a=this._videoSamples[v]))throw new Error("cannot found video frame #".concat(v));c=a.offset-t,s=e.subarray(c,c+a.size),(h=new o(a.pts||a.dts,a.dts)).duration=a.duration,h.gopId=a.gopId,a.keyframe&&h.setToKeyframe();for(var m=0,g=s.length-1;m<g;)p=(0,l.Bh)(s,m),m+=4,h.units.push(s.subarray(m,m+p)),m+=p;f.samples.push(h)}f.baseMediaDecodeTime=f.samples[0].dts}if(r){for(var b=r[0],x=r[1];b<=x;b++){if(!(a=this._audioSamples[b]))throw new Error("cannot found video frame #".concat(b));c=a.offset-t,s=e.subarray(c,c+a.size),d.samples.push(new u(a.dts,s,a.duration))}d.baseMediaDecodeTime=d.samples[0].dts}return{videoTrack:f,audioTrack:d,metadataTrack:this.metadataTrack}}},{key:"demuxPart",value:function(e,t,n,r,i,a,s,c){if(this.parseSamples(i),this.videoTrack.useEME=a,this.audioTrack.useEME=a,this._lastRemainBuffer&&this._lastRemainBuffer.byteLength>0&&t>this._lastRemainBufferStartPos&&t<=this._lastRemainBufferStartPos+this._lastRemainBuffer.byteLength)for(var f=0;f<20;)try{var d=this._lastRemainBuffer.subarray(0,t-this._lastRemainBufferStartPos),h=new Uint8Array(e.byteLength+d.byteLength);h.set(d,0),h.set(new Uint8Array(e),d.byteLength),e=h,t-=d.byteLength,this._lastRemainBuffer=null,this._lastRemainBufferStartPos=0;break}catch(e){if(!(f<20))throw new Error("new Uint8Array error:,"+e.errorMessage);f++}var p,v,y,m=this.videoTrack,g=this.audioTrack;m.samples=[],g.samples=[],m.videoSenc=null,g.audioSenc=null;var b=0,x=0;if(this._videoSamples.length>0&&n.length>0){for(var k,w=e.byteLength+t,A=n[0];A<=n[1];A++){if(!(p=this._videoSamples[A]))throw new Error("cannot found video frame #".concat(A));p.offset>=t&&p.offset+p.size<=w&&(b=(y=p.offset-t)+p.size,v=e.subarray(y,b),(k=new o(p.pts||p.dts,p.dts)).duration=p.duration,k.gopId=p.gopId,k.sampleOffset=p.index,p.keyframe&&k.setToKeyframe(),k.data=v,k.size=p.size,m.samples.push(k))}m.samples.length>0&&(m.gopId=m.samples[0].gopId,m.baseMediaDecodeTime=m.samples[0].dts,m.startPts=m.samples[0].pts/m.timescale,m.endPts=m.samples[m.samples.length-1].pts/m.timescale,this.videoSenc&&(m.videoSenc=this.videoSenc.slice(m.samples[0].sampleOffset,m.samples[0].sampleOffset+m.samples.length),m.kidValue=s))}if(this._audioSamples.length>0&&r.length>0){for(var S=r[0];S<=r[1];S++){if(!(p=this._audioSamples[S]))throw new Error("cannot found video frame #".concat(S));p.offset>=t&&p.offset+p.size<=e.byteLength+t&&(x=(y=p.offset-t)+p.size,v=e.subarray(y,x),g.samples.push(new u(p.dts,v,p.duration,p.index)))}g.samples.length>0&&(g.gopId=g.samples[0].gopId||m.gopId,g.baseMediaDecodeTime=g.samples[0].dts,g.startPts=g.samples[0].pts/g.timescale,g.endPts=g.samples[g.samples.length-1].pts/g.timescale,this.audioSenc&&(g.audioSenc=this.audioSenc.slice(g.samples[0].sampleOffset,g.samples[0].sampleOffset+g.samples.length),g.kidValue=s))}this.decoderData(m,g,c);for(var _=0,E=0;E<m.samples.length;E++)for(var U=0,T=m.samples[E].data,C=T.length-1;U<C;)_=(0,l.Bh)(T,U),U+=4,m.samples[E].units.push(T.subarray(U,U+_)),U+=_;return this._lastRemainBuffer=e.subarray(Math.max(b,x)),this._lastRemainBuffer.byteLength>0?this._lastRemainBufferStartPos=t+e.byteLength-this._lastRemainBuffer.byteLength:this._lastRemainBufferStartPos=0,{videoTrack:m,audioTrack:g,metadataTrack:this.metadataTrack}}},{key:"reset",value:function(){this._videoSamples=[],this._audioSamples=[],this._lastRemainBuffer=null,this._lastRemainBufferStartPos=0,this.videoTrack.reset(),this.audioTrack.reset(),this.metadataTrack.reset()}},{key:"decoderData",value:function(e,t,n){e.useEME||t.useEME||b.decoderAESCTRData(e,t,n)}}],[{key:"probe",value:function(e){return f.I.probe(e)}}]),e}()},38609:(e,t,n)=>{n.d(t,{I:()=>f});var r=n(70372),i=n(25218),a=n(57870),s="undefined"!=typeof window,o=s&&navigator.userAgent.toLocaleLowerCase(),u=(s&&/^((?!chrome|android).)*safari/.test(o),s&&o.includes("firefox")),c=s&&o.includes("android"),l=function(){function e(){(0,r.PA)(this,e)}return(0,r.qH)(e,null,[{key:"getRateIndexByRate",value:function(t){return e.FREQ.indexOf(t)}},{key:"parseADTS",value:function(t,n){for(var r=t.length,i=0;i+2<r&&(255!==t[i]||240!=(246&t[i+1]));)i++;if(!(i>=r)){var a=i,s=[],o=(60&t[i+2])>>>2,u=e.FREQ[o];if(!u)throw new Error("Invalid sampling index: ".concat(o));for(var c,l,f=1+((192&t[i+2])>>>6),d=(1&t[i+2])<<2|(192&t[i+3])>>>6,h=e._getConfig(o,d,f),p=h.config,v=h.codec,y=0,m=e.getFrameDuration(u);i+7<r;)if(255===t[i]&&240==(246&t[i+1])){if(r-i<(l=(3&t[i+3])<<11|t[i+4]<<3|(224&t[i+5])>>5))break;c=2*(1&~t[i+1]),s.push({pts:n+y*m,data:t.subarray(i+7+c,i+l)}),y++,i+=l}else i++;return{skip:a,remaining:i>=r?void 0:t.subarray(i),frames:s,samplingFrequencyIndex:o,sampleRate:u,objectType:f,channelCount:d,codec:v,config:p,originCodec:"mp4a.40.".concat(f)}}}},{key:"parseAudioSpecificConfig",value:function(t){if(t.length){var n=t[0]>>>3,r=(7&t[0])<<1|t[1]>>>7,i=(120&t[1])>>>3,a=e.FREQ[r];if(a){var s=e._getConfig(r,i,n);return{samplingFrequencyIndex:r,sampleRate:a,objectType:n,channelCount:i,config:s.config,codec:s.codec,originCodec:"mp4a.40.".concat(n)}}}}},{key:"getFrameDuration",value:function(e){return 1024*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4)/e}},{key:"_getConfig",value:function(e,t,n){var r,i,a=[];return u?e>=6?(r=5,i=e-3):(r=2,i=e):c?(r=2,i=e):(r=2===n||5===n?n:5,i=e,e>=6?i=e-3:1===t&&(r=2,i=e)),a[0]=r<<3,a[0]|=(14&e)>>1,a[1]=(1&e)<<7,a[1]|=t<<3,5===r&&(a[1]|=(14&i)>>1,a[2]=(1&i)<<7,a[2]|=8,a[3]=0),{config:a,codec:"mp4a.40.".concat(r)}}},{key:"getSilentFrame",value:function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}]),e}();(0,r._x)(l,"FREQ",[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]);var f=function(){function e(){(0,r.PA)(this,e)}return(0,r.qH)(e,null,[{key:"findBox",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[];if(!t)return i;for(var s=0,o="",u=0;t.length>7;){if(s=(0,a.Bh)(t),o=String.fromCharCode.apply(null,t.subarray(4,8)),u=8,1===s?(s=(0,a.h9)(t,8),u+=8):s||(s=t.length),!n[0]||o===n[0]){var c=t.subarray(0,s);if(!(n.length<2))return e.findBox(c.subarray(u),n.slice(1),r+u);i.push({start:r,size:s,headerSize:u,type:o,data:c})}r+=s,t=t.subarray(s)}return i}},{key:"tfhd",value:function(e){return v(e,!0,(function(e,t){e.trackId=(0,a.Bh)(t);var n=4,r=1&e.flags,i=2&e.flags,s=8&e.flags,o=16&e.flags,u=32&e.flags;r&&(n+=4,e.baseDataOffset=(0,a.Bh)(t,n),n+=4),i&&(e.sampleDescriptionIndex=(0,a.Bh)(t,n),n+=4),s&&(e.defaultSampleDuration=(0,a.Bh)(t,n),n+=4),o&&(e.defaultSampleSize=(0,a.Bh)(t,n),n+=4),u&&(e.defaultSampleFlags=(0,a.Bh)(t,n))}))}},{key:"sidx",value:function(e){return v(e,!0,(function(e,t){var n=0;e.reference_ID=(0,a.Bh)(t,n),n+=4,e.timescale=(0,a.Bh)(t,n),n+=4,0===e.version?(e.earliest_presentation_time=(0,a.Bh)(t,n),n+=4,e.first_offset=(0,a.Bh)(t,n),n+=4):(e.earliest_presentation_time=(0,a.h9)(t,n),n+=8,e.first_offset=(0,a.h9)(t,n),n+=8),n+=2,e.references=[];var r=(0,a.i4)(t,n);n+=2;for(var i=0;i<r;i++){var s={};e.references.push(s);var o=(0,a.Bh)(t,n);n+=4,s.reference_type=o>>31&1,s.referenced_size=2147483647&o,s.subsegment_duration=(0,a.Bh)(t,n),n+=4,o=(0,a.Bh)(t,n),n+=4,s.starts_with_SAP=o>>31&1,s.SAP_type=o>>28&7,s.SAP_delta_time=268435455&o}}))}},{key:"moov",value:function(t){return v(t,!1,(function(t,n,r){t.mvhd=e.mvhd(e.findBox(n,["mvhd"],r)[0]),t.trak=e.findBox(n,["trak"],r).map((function(t){return e.trak(t)})),t.pssh=e.pssh(e.findBox(n,["pssh"],r)[0])}))}},{key:"mvhd",value:function(e){return v(e,!0,(function(e,t){var n=0;1===e.version?(e.timescale=(0,a.Bh)(t,16),e.duration=(0,a.h9)(t,20),n+=28):(e.timescale=(0,a.Bh)(t,8),e.duration=(0,a.Bh)(t,12),n+=16),e.nextTrackId=(0,a.Bh)(t,n+76)}))}},{key:"trak",value:function(t){return v(t,!1,(function(t,n,r){t.tkhd=e.tkhd(e.findBox(n,["tkhd"],r)[0]),t.mdia=e.mdia(e.findBox(n,["mdia"],r)[0])}))}},{key:"tkhd",value:function(e){return v(e,!0,(function(e,t){var n=0;1===e.version?(e.trackId=(0,a.Bh)(t,16),e.duration=(0,a.h9)(t,24),n+=32):(e.trackId=(0,a.Bh)(t,8),e.duration=(0,a.Bh)(t,16),n+=20),e.width=(0,a.Bh)(t,n+52),e.height=(0,a.Bh)(t,n+56)}))}},{key:"mdia",value:function(t){return v(t,!1,(function(t,n,r){t.mdhd=e.mdhd(e.findBox(n,["mdhd"],r)[0]),t.hdlr=e.hdlr(e.findBox(n,["hdlr"],r)[0]),t.minf=e.minf(e.findBox(n,["minf"],r)[0])}))}},{key:"mdhd",value:function(e){return v(e,!0,(function(e,t){var n=0;1===e.version?(e.timescale=(0,a.Bh)(t,16),e.duration=(0,a.h9)(t,20),n+=28):(e.timescale=(0,a.Bh)(t,8),e.duration=(0,a.Bh)(t,12),n+=16);var r=(0,a.i4)(t,n);e.language=String.fromCharCode(96+(r>>10&31),96+(r>>5&31),96+(31&r))}))}},{key:"hdlr",value:function(e){return v(e,!0,(function(e,t){0===e.version&&(e.handlerType=String.fromCharCode.apply(null,t.subarray(4,8)))}))}},{key:"minf",value:function(t){return v(t,!1,(function(t,n,r){t.vmhd=e.vmhd(e.findBox(n,["vmhd"],r)[0]),t.smhd=e.smhd(e.findBox(n,["smhd"],r)[0]),t.stbl=e.stbl(e.findBox(n,["stbl"],r)[0])}))}},{key:"vmhd",value:function(e){return v(e,!0,(function(e,t){e.graphicsmode=(0,a.i4)(t),e.opcolor=[(0,a.i4)(t,2),(0,a.i4)(t,4),(0,a.i4)(t,6)]}))}},{key:"smhd",value:function(e){return v(e,!0,(function(e,t){e.balance=(0,a.i4)(t)}))}},{key:"stbl",value:function(t){return v(t,!1,(function(t,n,r){var i,a,s;t.stsd=e.stsd(e.findBox(n,["stsd"],r)[0]),t.stts=e.stts(e.findBox(n,["stts"],r)[0]),t.ctts=e.ctts(e.findBox(n,["ctts"],r)[0]),t.stsc=e.stsc(e.findBox(n,["stsc"],r)[0]),t.stsz=e.stsz(e.findBox(n,["stsz"],r)[0]),t.stco=e.stco(e.findBox(n,["stco"],r)[0]),t.stco||(t.co64=e.co64(e.findBox(n,["co64"],r)[0]),t.stco=t.co64);var o=null===(i=t.stsd.entries[0])||void 0===i||null===(a=i.sinf)||void 0===a||null===(s=a.schi)||void 0===s?void 0:s.tenc.default_IV_size;t.stss=e.stss(e.findBox(n,["stss"],r)[0]),t.senc=e.senc(e.findBox(n,["senc"],r)[0],o)}))}},{key:"senc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return v(e,!0,(function(e,n){var r=0,i=(0,a.Bh)(n,r);r+=4,e.samples=[];for(var s=0;s<i;s++){for(var o={InitializationVector:[]},u=0;u<t;u++)o.InitializationVector[u]=n[r+u];if(r+=t,2&e.flags){o.subsamples=[];var c=(0,a.i4)(n,r);r+=2;for(var l=0;l<c;l++){var f={};f.BytesOfClearData=(0,a.i4)(n,r),r+=2,f.BytesOfProtectedData=(0,a.Bh)(n,r),r+=4,o.subsamples.push(f)}}e.samples.push(o)}}))}},{key:"pssh",value:function(e){return v(e,!0,(function(e,t){for(var n=[],r=[],i=0,s=0;s<16;s++)r.push(y(t[i+s]));if(i+=16,e.version>0){var o=(0,a.Bh)(t,i);i+=4;for(var u=0;u<(""+o).length;u++)for(var c=0;c<16;c++){var l=t[i];i+=1,n.push(y(l))}}var f=(0,a.Bh)(t,i);e.data_size=f,i+=4,e.kid=n,e.system_id=r,e.buffer=t}))}},{key:"stsd",value:function(t){return v(t,!0,(function(t,n,r){t.entryCount=(0,a.Bh)(n),t.entries=e.findBox(n.subarray(4),[],r+4).map((function(t){switch(t.type){case"avc1":case"avc2":case"avc3":case"avc4":return e.avc1(t);case"hvc1":case"hev1":return e.hvc1(t);case"mp4a":return e.mp4a(t);case"alaw":case"ulaw":return e.alaw(t);case"enca":return v(t,!1,(function(t,n,r){t.channelCount=(0,a.i4)(n,16),t.samplesize=(0,a.i4)(n,18),t.sampleRate=(0,a.Bh)(n,24)/65536,n=n.subarray(28),t.sinf=e.sinf(e.findBox(n,["sinf"],r)[0]),t.esds=e.esds(e.findBox(n,["esds"],r)[0])}));case"encv":return v(t,!1,(function(t,n,r){t.width=(0,a.i4)(n,24),t.height=(0,a.i4)(n,26),t.horizresolution=(0,a.Bh)(n,28),t.vertresolution=(0,a.Bh)(n,32),n=n.subarray(78),t.sinf=e.sinf(e.findBox(n,["sinf"],r)[0]),t.avcC=e.avcC(e.findBox(n,["avcC"],r)[0]),t.hvcC=e.hvcC(e.findBox(n,["hvcC"],r)[0]),t.pasp=e.pasp(e.findBox(n,["pasp"],r)[0])}))}})).filter(Boolean)}))}},{key:"tenc",value:function(e){return v(e,!1,(function(e,t){var n=6;e.default_IsEncrypted=t[n],n+=1,e.default_IV_size=t[n],n+=1,e.default_KID=[];for(var r=0;r<16;r++)e.default_KID.push(y(t[n])),n+=1}))}},{key:"schi",value:function(t){return v(t,!1,(function(t,n,r){t.tenc=e.tenc(e.findBox(n,["tenc"],r)[0])}))}},{key:"sinf",value:function(t){return v(t,!1,(function(t,n,r){t.schi=e.schi(e.findBox(n,["schi"],r)[0]),t.frma=e.frma(e.findBox(n,["frma"],r)[0])}))}},{key:"frma",value:function(e){return v(e,!1,(function(e,t){e.data_format="";for(var n=0;n<4;n++)e.data_format+=String.fromCharCode(t[n])}))}},{key:"avc1",value:function(t){return v(t,!1,(function(t,n,r){var i=h(t,n),a=n.subarray(i);r+=i,t.avcC=e.avcC(e.findBox(a,["avcC"],r)[0]),t.pasp=e.pasp(e.findBox(a,["pasp"],r)[0])}))}},{key:"avcC",value:function(e){return v(e,!1,(function(e,t){e.configurationVersion=t[0],e.AVCProfileIndication=t[1],e.profileCompatibility=t[2],e.AVCLevelIndication=t[3],e.codec=(0,a.dB)([t[1],t[2],t[3]]),e.lengthSizeMinusOne=3&t[4],e.spsLength=31&t[5],e.sps=[];for(var n=6,r=0;r<e.spsLength;r++){var i=(0,a.i4)(t,n);n+=2,e.sps.push(t.subarray(n,n+i)),n+=i}e.ppsLength=t[n],n+=1,e.pps=[];for(var s=0;s<e.ppsLength;s++){var o=(0,a.i4)(t,n);n+=2,e.pps.push(t.subarray(n,n+=o)),n+=o}}))}},{key:"hvc1",value:function(t){return v(t,!1,(function(t,n,r){var i=h(t,n),a=n.subarray(i);r+=i,t.hvcC=e.hvcC(e.findBox(a,["hvcC"],r)[0]),t.pasp=e.pasp(e.findBox(a,["pasp"],r)[0])}))}},{key:"hvcC",value:function(e){return v(e,!1,(function(t,n){t.data=e.data,t.codec="hev1.1.6.L93.B0",t.configurationVersion=n[0];var r=n[1];t.generalProfileSpace=r>>6,t.generalTierFlag=(32&r)>>5,t.generalProfileIdc=31&r,t.generalProfileCompatibility=(0,a.Bh)(n,2),t.generalConstraintIndicatorFlags=n.subarray(6,12),t.generalLevelIdc=n[12],t.avgFrameRate=(0,a.i4)(n,19),t.numOfArrays=n[22],t.vps=[],t.sps=[],t.pps=[];for(var i=23,s=0,o=0,u=0,c=0;c<t.numOfArrays;c++){s=63&n[i],o=(0,a.i4)(n,i+1),i+=3;for(var l,f=[],d=0;d<o;d++)u=(0,a.i4)(n,i),i+=2,f.push(n.subarray(i,i+u)),i+=u;if(32===s)(l=t.vps).push.apply(l,f);else if(33===s){var h;(h=t.sps).push.apply(h,f)}else if(34===s){var p;(p=t.pps).push.apply(p,f)}}}))}},{key:"pasp",value:function(e){return v(e,!1,(function(e,t){e.hSpacing=(0,a.Bh)(t),e.vSpacing=(0,a.Bh)(t,4)}))}},{key:"mp4a",value:function(t){return v(t,!1,(function(t,n,r){var i=p(t,n);t.esds=e.esds(e.findBox(n.subarray(i),["esds"],r+i)[0])}))}},{key:"esds",value:function(e){return v(e,!0,(function(e,t){e.codec="mp4a.";for(var n=0,r=0,i=0,a=0;t.length;){for(a=t[n=0],r=t[n+1],n+=2;128&r;)i=(127&r)<<7,r=t[n],n+=1;if(i+=127&r,3===a)t=t.subarray(n+3);else{if(4!==a){if(5===a){var s=e.config=t.subarray(n,n+i),o=(248&s[0])>>3;return 31===o&&s.length>=2&&(o=32+((7&s[0])<<3)+((224&s[1])>>5)),e.objectType=o,e.codec+=o.toString(16),void("."===e.codec[e.codec.length-1]&&(e.codec=e.codec.substring(0,e.codec.length-1)))}return void("."===e.codec[e.codec.length-1]&&(e.codec=e.codec.substring(0,e.codec.length-1)))}e.codec+=(t[n].toString(16)+".").padStart(3,"0"),t=t.subarray(n+13)}}}))}},{key:"alaw",value:function(e){return v(e,!1,(function(e,t){p(e,t)}))}},{key:"stts",value:function(e){return v(e,!0,(function(e,t){for(var n=(0,a.Bh)(t),r=[],i=4,s=0;s<n;s++)r.push({count:(0,a.Bh)(t,i),delta:(0,a.Bh)(t,i+4)}),i+=8;e.entryCount=n,e.entries=r}))}},{key:"ctts",value:function(e){return v(e,!0,(function(e,t){var n=(0,a.Bh)(t),r=[],i=4;if(1===e.version)for(var s=0;s<n;s++)r.push({count:(0,a.Bh)(t,i),offset:(0,a.Bh)(t,i+4)}),i+=8;else for(var o=0;o<n;o++)r.push({count:(0,a.Bh)(t,i),offset:-(1+~(0,a.Bh)(t,i+4))}),i+=8;e.entryCount=n,e.entries=r}))}},{key:"stsc",value:function(e){return v(e,!0,(function(e,t){for(var n=(0,a.Bh)(t),r=[],i=4,s=0;s<n;s++)r.push({firstChunk:(0,a.Bh)(t,i),samplesPerChunk:(0,a.Bh)(t,i+4),sampleDescriptionIndex:(0,a.Bh)(t,i+8)}),i+=12;e.entryCount=n,e.entries=r}))}},{key:"stsz",value:function(e){return v(e,!0,(function(e,t){var n=(0,a.Bh)(t),r=(0,a.Bh)(t,4),i=[];if(!n)for(var s=8,o=0;o<r;o++)i.push((0,a.Bh)(t,s)),s+=4;e.sampleSize=n,e.sampleCount=r,e.entrySizes=i}))}},{key:"stco",value:function(e){return v(e,!0,(function(e,t){for(var n=(0,a.Bh)(t),r=[],i=4,s=0;s<n;s++)r.push((0,a.Bh)(t,i)),i+=4;e.entryCount=n,e.entries=r}))}},{key:"co64",value:function(e){return v(e,!0,(function(e,t){for(var n=(0,a.Bh)(t),r=[],i=4,s=0;s<n;s++)r.push((0,a.h9)(t,i)),i+=8;e.entryCount=n,e.entries=r}))}},{key:"stss",value:function(e){return v(e,!0,(function(e,t){for(var n=(0,a.Bh)(t),r=[],i=4,s=0;s<n;s++)r.push((0,a.Bh)(t,i)),i+=4;e.entryCount=n,e.entries=r}))}},{key:"moof",value:function(t){return v(t,!1,(function(t,n,r){t.mfhd=e.mfhd(e.findBox(n,["mfhd"],r)[0]),t.traf=e.findBox(n,["traf"],r).map((function(t){return e.traf(t)}))}))}},{key:"mfhd",value:function(e){return v(e,!0,(function(e,t){e.sequenceNumber=(0,a.Bh)(t)}))}},{key:"traf",value:function(t){return v(t,!1,(function(t,n,r){t.tfhd=e.tfhd(e.findBox(n,["tfhd"],r)[0]),t.tfdt=e.tfdt(e.findBox(n,["tfdt"],r)[0]),t.trun=e.trun(e.findBox(n,["trun"],r)[0])}))}},{key:"trun",value:function(e){return v(e,!0,(function(e,t){var n=e.version,r=e.flags,i=t.length,s=e.sampleCount=(0,a.Bh)(t),o=4;if(i>o&&1&r&&(e.dataOffset=-(1+~(0,a.Bh)(t,o)),o+=4),i>o&&4&r&&(e.firstSampleFlags=(0,a.Bh)(t,o),o+=4),e.samples=[],i>o)for(var u,c=0;c<s;c++)u={},256&r&&(u.duration=(0,a.Bh)(t,o),o+=4),512&r&&(u.size=(0,a.Bh)(t,o),o+=4),1024&r&&(u.flags=(0,a.Bh)(t,o),o+=4),2048&r&&(u.cts=n?-(1+~(0,a.Bh)(t,o+4)):(0,a.Bh)(t,o),o+=4),e.samples.push(u)}))}},{key:"tfdt",value:function(e){return v(e,!0,(function(e,t){1===e.version?e.baseMediaDecodeTime=(0,a.h9)(t):e.baseMediaDecodeTime=(0,a.Bh)(t)}))}},{key:"probe",value:function(t){return!!e.findBox(t,["ftyp"])}},{key:"parseSampleFlags",value:function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}},{key:"moovToTrack",value:function(e,t,n){var r,a,s=e.trak;if(s&&s.length){var o=s.find((function(e){var t,n;return"vide"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)})),u=s.find((function(e){var t,n;return"soun"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)}));if(o&&t){var c,f,d,h,p,v,y,m=t;null!=(null===(c=o.tkhd)||void 0===c?void 0:c.trackId)&&(m.id=o.tkhd.trackId),m.tkhdDuration=o.tkhd.duration,m.mvhdDurtion=e.mvhd.duration,m.mvhdTimecale=e.mvhd.timescale,m.timescale=m.formatTimescale=o.mdia.mdhd.timescale,m.duration=o.mdia.mdhd.duration||m.mvhdDurtion/m.mvhdTimecale*m.timescale;var g,b,x,k,w,A,S,_,E=o.mdia.minf.stbl.stsd.entries[0];if(m.width=E.width,m.height=E.height,E.pasp&&(m.sarRatio=[E.pasp.hSpacing,E.pasp.vSpacing]),E.hvcC)m.codecType=i._e.HEVC,m.codec=E.hvcC.codec,m.vps=E.hvcC.vps,m.sps=E.hvcC.sps,m.pps=E.hvcC.pps,m.hvcC=E.hvcC.data;else{if(!E.avcC)throw new Error("unknown video stsd entry");m.codec=E.avcC.codec,m.sps=E.avcC.sps,m.pps=E.avcC.pps}m.present=!0,m.ext={},m.ext.stss=null===(f=o.mdia)||void 0===f||null===(d=f.minf)||void 0===d||null===(h=d.stbl)||void 0===h?void 0:h.stss,m.ext.ctts=null===(p=o.mdia)||void 0===p||null===(v=p.minf)||void 0===v||null===(y=v.stbl)||void 0===y?void 0:y.ctts,E&&"encv"===E.type&&(m.isVideoEncryption=!0,E.default_KID=null===(g=E.sinf)||void 0===g||null===(b=g.schi)||void 0===b?void 0:b.tenc.default_KID,E.default_IsEncrypted=null===(x=E.sinf)||void 0===x||null===(k=x.schi)||void 0===k?void 0:k.tenc.default_IsEncrypted,E.default_IV_size=null===(w=E.sinf)||void 0===w||null===(A=w.schi)||void 0===A?void 0:A.tenc.default_IV_size,m.videoSenc=o.mdia.minf.stbl.senc&&o.mdia.minf.stbl.senc.samples,E.data_format=null===(S=E.sinf)||void 0===S||null===(_=S.frma)||void 0===_?void 0:_.data_format,m.useEME=e.useEME,m.kidValue=e.kidValue,m.pssh=e.pssh,m.encv=E)}if(u&&n){var U,T,C,B,D,I,V,P,z,M=n;null!=(null===(U=u.tkhd)||void 0===U?void 0:U.trackId)&&(M.id=u.tkhd.trackId),M.tkhdDuration=u.tkhd.duration,M.mvhdDurtion=e.mvhd.duration,M.mvhdTimecale=e.mvhd.timescale,M.timescale=M.formatTimescale=u.mdia.mdhd.timescale,M.duration=u.mdia.mdhd.duration||M.mvhdDurtion/M.mvhdTimecale*M.timescale;var R,L,O,H,F,N,j,q,Z=u.mdia.minf.stbl.stsd.entries[0];switch(M.sampleSize=Z.sampleSize,M.sampleRate=Z.sampleRate,M.channelCount=Z.channelCount,M.present=!0,Z.type){case"alaw":M.codecType=M.codec=i.yQ.G711PCMA,M.sampleRate=8e3;break;case"ulaw":M.codecType=M.codec=i.yQ.G711PCMU,M.sampleRate=8e3;break;default:M.sampleDuration=l.getFrameDuration(M.sampleRate,M.timescale),M.sampleRateIndex=l.getRateIndexByRate(M.sampleRate),M.objectType=(null===(r=Z.esds)||void 0===r?void 0:r.objectType)||2,Z.esds&&(M.config=Array.from(Z.esds.config)),M.codec=(null===(a=Z.esds)||void 0===a?void 0:a.codec)||"mp4a.40.2"}M.sampleDuration=l.getFrameDuration(M.sampleRate,M.timescale),M.objectType=(null===(T=Z.esds)||void 0===T?void 0:T.objectType)||2,Z.esds&&(Z.esds.config?M.config=Array.from(Z.esds.config):console.warn("esds config is null")),M.codec=(null===(C=Z.esds)||void 0===C?void 0:C.codec)||"mp4a.40.2",M.sampleRateIndex=l.getRateIndexByRate(M.sampleRate),M.ext={},M.ext.stss=null===(B=u.mdia)||void 0===B||null===(D=B.minf)||void 0===D||null===(I=D.stbl)||void 0===I?void 0:I.stss,M.ext.ctts=null===(V=u.mdia)||void 0===V||null===(P=V.minf)||void 0===P||null===(z=P.stbl)||void 0===z?void 0:z.ctts,M.present=!0,Z&&"enca"===Z.type&&(M.isAudioEncryption=!0,Z.data_format=null===(R=Z.sinf)||void 0===R||null===(L=R.frma)||void 0===L?void 0:L.data_format,Z.default_KID=null===(O=Z.sinf)||void 0===O||null===(H=O.schi)||void 0===H?void 0:H.tenc.default_KID,Z.default_IsEncrypted=null===(F=Z.sinf)||void 0===F||null===(N=F.schi)||void 0===N?void 0:N.tenc.default_IsEncrypted,Z.default_IV_size=null===(j=Z.sinf)||void 0===j||null===(q=j.schi)||void 0===q?void 0:q.tenc.default_IV_size,M.audioSenc=u.mdia.minf.stbl.senc&&u.mdia.minf.stbl.senc.samples,M.useEME=e.useEME,M.kidValue=e.kidValue,M.enca=Z)}if(n&&(n.isVideoEncryption=!!t&&t.isVideoEncryption),t&&(t.isAudioEncryption=!!n&&n.isAudioEncryption),null!=t&&t.encv||null!=n&&n.enca){var J,Q,K=null==t||null===(J=t.encv)||void 0===J?void 0:J.default_KID,Y=null==n||null===(Q=n.enca)||void 0===Q?void 0:Q.default_KID,G=K||Y?(K||Y).join(""):null;t&&(t.kid=G),n&&(n.kid=G)}return t&&(t.flags=3841),n&&(n.flags=1793),{videoTrack:t,audioTrack:n}}}},{key:"evaluateDefaultDuration",value:function(e,t,n){var r,i=null==t||null===(r=t.samples)||void 0===r?void 0:r.length;return i?1024*i/t.timescale*e.timescale/n:1024}},{key:"moofToSamples",value:function(t,n,r){var i={};return t.mfhd&&(n&&(n.sequenceNumber=t.mfhd.sequenceNumber),r&&(r.sequenceNumber=t.mfhd.sequenceNumber)),t.traf.forEach((function(t){var a=t.tfhd,s=t.tfdt,o=t.trun;if(a&&o){s&&(n&&n.id===a.trackId&&(n.baseMediaDecodeTime=s.baseMediaDecodeTime),r&&r.id===a.trackId&&(r.baseMediaDecodeTime=s.baseMediaDecodeTime));var u=a.defaultSampleSize||0,c=a.defaultSampleDuration||e.evaluateDefaultDuration(n,r,o.samples.length||o.sampleCount),l=o.dataOffset||0,f=0,d=-1;if(!o.samples.length&&o.sampleCount){i[a.trackId]=[];for(var h=0;h<o.sampleCount;h++)i[a.trackId].push({offset:l,dts:f,duration:c,size:u}),f+=c,l+=u}else i[a.trackId]=o.samples.map((function(e,t){return(e={offset:l,dts:f,pts:f+(e.cts||0),duration:e.duration||c,size:e.size||u,gopId:d,keyframe:0===t||null!==e.flags&&void 0!==e.flags&&(65536&e.flags)>>>0!=65536}).keyframe&&(d++,e.gopId=d),f+=e.duration,l+=e.size,e}))}})),i}},{key:"moovToSamples",value:function(e){var t=e.trak;if(t&&t.length){var n=t.find((function(e){var t,n;return"vide"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)})),r=t.find((function(e){var t,n;return"soun"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)}));if(n||r){var i,a;if(n){var s,o,u=null===(s=n.mdia)||void 0===s||null===(o=s.minf)||void 0===o?void 0:o.stbl;if(!u)return;var c=u.stts,l=u.stsc,f=u.stsz,h=u.stco,p=u.stss,v=u.ctts;if(!(c&&l&&f&&h&&p))return;i=d(c,l,f,h,v,p)}if(r){var y,m,g,b=null===(y=r.mdia)||void 0===y||null===(m=y.minf)||void 0===m?void 0:m.stbl;if(!b)return;var x=null===(g=r.mdia.mdhd)||void 0===g?void 0:g.timescale,k=b.stts,w=b.stsc,A=b.stsz,S=b.stco;if(!(x&&k&&w&&A&&S))return;a=d(k,w,A,S)}return{videoSamples:i,audioSamples:a}}}}}]),e}();function d(e,t,n,r,i,a){var s,o,u,c=[],l=null==i?void 0:i.entries,f=t.entries,d=r.entries,h=n.entrySizes,p=null==a?void 0:a.entries;p&&(s={},p.forEach((function(e){s[e-1]=!0}))),l&&(o=[],l.forEach((function(e){for(var t=e.count,n=e.offset,r=0;r<t;r++)o.push(n)})));var v=-1,y=0,m=0,g=0,b=0,x=0,k=f[0].samplesPerChunk,w=f[1]?f[1].firstChunk-1:1/0;return e.entries.forEach((function(e){for(var t=e.count,r=e.delta,i=0;i<t;i++)u={dts:y,duration:r,size:h[m]||n.sampleSize,offset:d[g]+x,index:m},p&&(u.keyframe=s[m],u.keyframe&&v++,u.gopId=v),o&&m<o.length&&(u.pts=u.dts+o[m]),c.push(u),y+=r,++m<k?x+=u.size:(g++,x=0,g>=w&&(b++,w=f[b+1]?f[b+1].firstChunk-1:1/0),k+=f[b].samplesPerChunk)})),c}function h(e,t){return e.dataReferenceIndex=(0,a.i4)(t,6),e.width=(0,a.i4)(t,24),e.height=(0,a.i4)(t,26),e.horizresolution=(0,a.Bh)(t,28),e.vertresolution=(0,a.Bh)(t,32),e.frameCount=(0,a.i4)(t,40),e.depth=(0,a.i4)(t,74),78}function p(e,t){return e.dataReferenceIndex=(0,a.i4)(t,6),e.channelCount=(0,a.i4)(t,16),e.sampleSize=(0,a.i4)(t,18),e.sampleRate=(0,a.Bh)(t,24)/65536,28}function v(e,t,n){if(e){if(e.size!==e.data.length)throw new Error("box ".concat(e.type," size !== data.length"));var r={start:e.start,size:e.size,headerSize:e.headerSize,type:e.type};return t&&(r.version=e.data[e.headerSize],r.flags=(0,a.sV)(e.data,e.headerSize+1),r.headerSize+=4),n(r,e.data.subarray(r.headerSize),r.start+r.headerSize),r}}var y=function(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.push(function(e,t,n){for(var r=String(0),i=Math.ceil(2/r.length),a=[],s=String(e);i--;)a.push(r);return a.join("").substring(0,2-s.length)+s}(Number(t).toString(16)))})),e[0]}},57870:(e,t,n)=>{function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.filter(Boolean);var r=new Uint8Array(t.reduce((function(e,t){return e+t.byteLength}),0)),i=0;return t.forEach((function(e){r.set(e,i),i+=e.byteLength})),r}n.d(t,{Bh:()=>o,Qc:()=>f,dB:()=>c,gJ:()=>r,h9:()=>u,i4:()=>a,mw:()=>l,sV:()=>s});var i=Math.pow(2,32);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<8)+(e[t+1]||0)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<16)+(e[t+1]<<8)+(e[t+2]||0)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<24>>>0)+(e[t+1]<<16)+(e[t+2]<<8)+(e[t+3]||0)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o(e,t)*i+o(e,t+4)}function c(e){for(var t,n="avc1.",r=0;r<3;r++)(t=e[r].toString(16)).length<2&&(t="0".concat(t)),n+=t;return n}function l(e){var t="";if(e.forEach((function(e){t+=function(e){return("0"+Number(e).toString(16)).slice(-2).toUpperCase()}(e)})),t.length<=32)for(var n=32-t.length,r=0;r<n;r++)t+="0";return t}function f(e){if(!Array.isArray(e)){for(var t=[],n="",r=0;r<e.length;r++)r%2&&(n=e[r-1]+e[r],t.push(parseInt(n,16)),n="");return t}return e.map((function(e){return parseInt(e,16)}))}}}]);